10:31:11 [INFO] gameserver.network.server: Client closed cleanly: uid=2 remote=('192.168.178.25', 60885)
10:31:11 [INFO] gameserver.network.server: Session removed: uid=2
10:31:55 [INFO] websockets.server: connection open
10:31:55 [INFO] gameserver.network.server: Session registered: uid=-31
10:31:55 [INFO] gameserver.network.server: Client connected: uid=-31 remote=('192.168.178.25', 60905) UA=Mozilla/5.0 (iPhone; CPU iPhone OS 18_7 like Mac OS X) AppleWebKit/605.1.15 (KHT origin=http://192.168.178.47:8000 subprotocol=(none)
10:31:55 [INFO] websockets.server: connection open
10:31:55 [INFO] gameserver.network.server: Session registered: uid=-32
10:31:55 [INFO] gameserver.network.server: Client connected: uid=-32 remote=('192.168.178.25', 60907) UA=Mozilla/5.0 (iPhone; CPU iPhone OS 18_7 like Mac OS X) AppleWebKit/605.1.15 (KHT origin=http://192.168.178.47:8000 subprotocol=(none)
10:31:55 [INFO] gameserver.network.server: Client closed cleanly: uid=-31 remote=('192.168.178.25', 60905)
10:31:55 [INFO] gameserver.network.server: Session removed: uid=-31
10:32:31 [INFO] gameserver.network.auth: Login success: eem (uid=2)
10:32:31 [INFO] gameserver.network.server: Session registered: uid=2
10:32:31 [INFO] gameserver.network.server: Session upgraded: guest=-32 → uid=2
10:32:36 [INFO] gameserver.network.handlers: change_citizen request from uid=2
10:32:36 [INFO] gameserver.network.handlers: change_citizen success uid=2: {'merchant': 2, 'scientist': 3, 'artist': 0, 'free': 6}
10:32:37 [INFO] gameserver.network.handlers: change_citizen request from uid=2
10:32:37 [INFO] gameserver.network.handlers: change_citizen success uid=2: {'merchant': 2, 'scientist': 4, 'artist': 0, 'free': 5}
10:33:11 [INFO] gameserver.network.server: Client closed cleanly: uid=2 remote=('192.168.178.25', 60907)
10:33:11 [INFO] gameserver.network.server: Session removed: uid=2
10:33:29 [INFO] websockets.server: connection open
10:33:29 [INFO] gameserver.network.server: Session registered: uid=-33
10:33:29 [INFO] gameserver.network.server: Client connected: uid=-33 remote=('192.168.178.25', 60922) UA=Mozilla/5.0 (iPhone; CPU iPhone OS 18_7 like Mac OS X) AppleWebKit/605.1.15 (KHT origin=http://192.168.178.47:8000 subprotocol=(none)
10:33:29 [INFO] gameserver.network.server: Client closed cleanly: uid=-33 remote=('192.168.178.25', 60922)
10:33:29 [INFO] gameserver.network.server: Session removed: uid=-33
10:33:29 [INFO] websockets.server: connection open
10:33:29 [INFO] gameserver.network.server: Session registered: uid=-34
10:33:29 [INFO] gameserver.network.server: Client connected: uid=-34 remote=('192.168.178.25', 60930) UA=Mozilla/5.0 (iPhone; CPU iPhone OS 18_7 like Mac OS X) AppleWebKit/605.1.15 (KHT origin=http://192.168.178.47:8000 subprotocol=(none)
10:33:54 [INFO] gameserver.network.server: Client closed cleanly: uid=-34 remote=('192.168.178.25', 60930)
10:33:54 [INFO] gameserver.network.server: Session removed: uid=-34
10:34:33 [INFO] websockets.server: connection open
10:34:33 [INFO] gameserver.network.server: Session registered: uid=-35
10:34:33 [INFO] gameserver.network.server: Client connected: uid=-35 remote=('192.168.178.25', 60948) UA=Mozilla/5.0 (iPhone; CPU iPhone OS 18_7 like Mac OS X) AppleWebKit/605.1.15 (KHT origin=http://192.168.178.47:8000 subprotocol=(none)
10:34:33 [INFO] websockets.server: connection open
10:34:33 [INFO] gameserver.network.server: Session registered: uid=-36
10:34:33 [INFO] gameserver.network.server: Client connected: uid=-36 remote=('192.168.178.25', 60956) UA=Mozilla/5.0 (iPhone; CPU iPhone OS 18_7 like Mac OS X) AppleWebKit/605.1.15 (KHT origin=http://192.168.178.47:8000 subprotocol=(none)
10:34:33 [INFO] gameserver.network.server: Client closed cleanly: uid=-35 remote=('192.168.178.25', 60948)
10:34:33 [INFO] gameserver.network.server: Session removed: uid=-35
10:34:41 [INFO] gameserver.network.server: Client closed cleanly: uid=-36 remote=('192.168.178.25', 60956)
10:34:41 [INFO] gameserver.network.server: Session removed: uid=-36
10:34:57 [INFO] websockets.server: connection open
10:34:57 [INFO] gameserver.network.server: Session registered: uid=-37
10:34:57 [INFO] gameserver.network.server: Client connected: uid=-37 remote=('192.168.178.25', 60968) UA=Mozilla/5.0 (iPhone; CPU iPhone OS 18_7 like Mac OS X) AppleWebKit/605.1.15 (KHT origin=http://192.168.178.47:8000 subprotocol=(none)
10:34:57 [INFO] gameserver.network.server: Client closed cleanly: uid=-37 remote=('192.168.178.25', 60968)
10:34:57 [INFO] gameserver.network.server: Session removed: uid=-37
10:35:38 [INFO] websockets.server: connection open
10:35:38 [INFO] gameserver.network.server: Session registered: uid=-38
10:35:38 [INFO] gameserver.network.server: Client connected: uid=-38 remote=('192.168.178.25', 60986) UA=Mozilla/5.0 (iPhone; CPU iPhone OS 18_7 like Mac OS X) AppleWebKit/605.1.15 (KHT origin=http://192.168.178.47:8000 subprotocol=(none)
10:35:40 [INFO] gameserver.network.server: Client disconnected: uid=-38 code=CloseCode.ABNORMAL_CLOSURE reason=(none) remote=('192.168.178.25', 60986)
10:35:40 [INFO] gameserver.network.server: Session removed: uid=-38
10:38:17 [INFO] websockets.server: connection open
10:38:17 [INFO] gameserver.network.server: Session registered: uid=-39
10:38:17 [INFO] gameserver.network.server: Client connected: uid=-39 remote=('192.168.178.25', 61026) UA=Mozilla/5.0 (iPhone; CPU iPhone OS 18_7 like Mac OS X) AppleWebKit/605.1.15 (KHT origin=http://192.168.178.47:8000 subprotocol=(none)
10:38:17 [INFO] websockets.server: connection open
10:38:17 [INFO] gameserver.network.server: Session registered: uid=-40
10:38:17 [INFO] gameserver.network.server: Client connected: uid=-40 remote=('192.168.178.25', 61034) UA=Mozilla/5.0 (iPhone; CPU iPhone OS 18_7 like Mac OS X) AppleWebKit/605.1.15 (KHT origin=http://192.168.178.47:8000 subprotocol=(none)
10:38:17 [INFO] gameserver.network.server: Client closed cleanly: uid=-39 remote=('192.168.178.25', 61026)
10:38:17 [INFO] gameserver.network.server: Session removed: uid=-39
10:38:21 [INFO] gameserver.network.server: Client closed cleanly: uid=-40 remote=('192.168.178.25', 61034)
10:38:21 [INFO] gameserver.network.server: Session removed: uid=-40
10:39:59 [INFO] websockets.server: connection open
10:39:59 [INFO] gameserver.network.server: Session registered: uid=-41
10:39:59 [INFO] gameserver.network.server: Client connected: uid=-41 remote=('192.168.178.25', 61060) UA=Mozilla/5.0 (iPhone; CPU iPhone OS 18_7 like Mac OS X) AppleWebKit/605.1.15 (KHT origin=http://192.168.178.47:8000 subprotocol=(none)
10:39:59 [INFO] websockets.server: connection open
10:39:59 [INFO] gameserver.network.server: Session registered: uid=-42
10:39:59 [INFO] gameserver.network.server: Client connected: uid=-42 remote=('192.168.178.25', 61068) UA=Mozilla/5.0 (iPhone; CPU iPhone OS 18_7 like Mac OS X) AppleWebKit/605.1.15 (KHT origin=http://192.168.178.47:8000 subprotocol=(none)
10:39:59 [INFO] gameserver.network.server: Client closed cleanly: uid=-41 remote=('192.168.178.25', 61060)
10:39:59 [INFO] gameserver.network.server: Session removed: uid=-41
10:40:02 [INFO] gameserver.network.server: Client closed cleanly: uid=-42 remote=('192.168.178.25', 61068)
10:40:02 [INFO] gameserver.network.server: Session removed: uid=-42
10:40:39 [INFO] websockets.server: connection open
10:40:39 [INFO] gameserver.network.server: Session registered: uid=-43
10:40:39 [INFO] gameserver.network.server: Client connected: uid=-43 remote=('192.168.178.25', 61080) UA=Mozilla/5.0 (iPhone; CPU iPhone OS 18_7 like Mac OS X) AppleWebKit/605.1.15 (KHT origin=http://192.168.178.47:8000 subprotocol=(none)
10:40:39 [INFO] gameserver.network.server: Client closed cleanly: uid=-43 remote=('192.168.178.25', 61080)
10:40:39 [INFO] gameserver.network.server: Session removed: uid=-43
10:40:39 [INFO] websockets.server: connection open
10:40:39 [INFO] gameserver.network.server: Session registered: uid=-44
10:40:39 [INFO] gameserver.network.server: Client connected: uid=-44 remote=('192.168.178.25', 61088) UA=Mozilla/5.0 (iPhone; CPU iPhone OS 18_7 like Mac OS X) AppleWebKit/605.1.15 (KHT origin=http://192.168.178.47:8000 subprotocol=(none)
10:40:39 [INFO] gameserver.network.server: Client closed cleanly: uid=-44 remote=('192.168.178.25', 61088)
10:40:39 [INFO] gameserver.network.server: Session removed: uid=-44
10:40:53 [INFO] websockets.server: connection open
10:40:53 [INFO] gameserver.network.server: Session registered: uid=-45
10:40:53 [INFO] gameserver.network.server: Client connected: uid=-45 remote=('192.168.178.25', 61094) UA=Mozilla/5.0 (iPhone; CPU iPhone OS 18_7 like Mac OS X) AppleWebKit/605.1.15 (KHT origin=http://192.168.178.47:8000 subprotocol=(none)
10:40:53 [INFO] gameserver.network.server: Client closed cleanly: uid=-45 remote=('192.168.178.25', 61094)
10:40:53 [INFO] gameserver.network.server: Session removed: uid=-45
10:40:53 [INFO] websockets.server: connection open
10:40:53 [INFO] gameserver.network.server: Session registered: uid=-46
10:40:53 [INFO] gameserver.network.server: Client connected: uid=-46 remote=('192.168.178.25', 61102) UA=Mozilla/5.0 (iPhone; CPU iPhone OS 18_7 like Mac OS X) AppleWebKit/605.1.15 (KHT origin=http://192.168.178.47:8000 subprotocol=(none)
10:40:56 [INFO] gameserver.network.server: Client closed cleanly: uid=-46 remote=('192.168.178.25', 61102)
10:40:56 [INFO] gameserver.network.server: Session removed: uid=-46
10:41:15 [INFO] websockets.server: connection open
10:41:15 [INFO] gameserver.network.server: Session registered: uid=-47
10:41:15 [INFO] gameserver.network.server: Client connected: uid=-47 remote=('192.168.178.25', 61122) UA=Mozilla/5.0 (iPhone; CPU iPhone OS 18_7 like Mac OS X) AppleWebKit/605.1.15 (KHT origin=http://192.168.178.47:8000 subprotocol=(none)
10:41:15 [INFO] gameserver.network.server: Client closed cleanly: uid=-47 remote=('192.168.178.25', 61122)
10:41:15 [INFO] gameserver.network.server: Session removed: uid=-47
10:41:15 [INFO] websockets.server: connection open
10:41:15 [INFO] gameserver.network.server: Session registered: uid=-48
10:41:15 [INFO] gameserver.network.server: Client connected: uid=-48 remote=('192.168.178.25', 61130) UA=Mozilla/5.0 (iPhone; CPU iPhone OS 18_7 like Mac OS X) AppleWebKit/605.1.15 (KHT origin=http://192.168.178.47:8000 subprotocol=(none)
10:42:03 [INFO] gameserver.network.server: Client closed cleanly: uid=-48 remote=('192.168.178.25', 61130)
10:42:03 [INFO] gameserver.network.server: Session removed: uid=-48
10:42:25 [INFO] websockets.server: connection open
10:42:25 [INFO] gameserver.network.server: Session registered: uid=-49
10:42:25 [INFO] gameserver.network.server: Client connected: uid=-49 remote=('192.168.178.25', 61197) UA=Mozilla/5.0 (iPhone; CPU iPhone OS 18_7 like Mac OS X) AppleWebKit/605.1.15 (KHT origin=http://192.168.178.47:8000 subprotocol=(none)
10:42:25 [INFO] gameserver.network.server: Client closed cleanly: uid=-49 remote=('192.168.178.25', 61197)
10:42:25 [INFO] gameserver.network.server: Session removed: uid=-49
10:42:25 [INFO] websockets.server: connection open
10:42:25 [INFO] gameserver.network.server: Session registered: uid=-50
10:42:25 [INFO] gameserver.network.server: Client connected: uid=-50 remote=('192.168.178.25', 61205) UA=Mozilla/5.0 (iPhone; CPU iPhone OS 18_7 like Mac OS X) AppleWebKit/605.1.15 (KHT origin=http://192.168.178.47:8000 subprotocol=(none)
10:43:13 [INFO] gameserver.network.server: Client closed cleanly: uid=-50 remote=('192.168.178.25', 61205)
10:43:13 [INFO] gameserver.network.server: Session removed: uid=-50
10:43:17 [INFO] websockets.server: connection open
10:43:17 [INFO] gameserver.network.server: Session registered: uid=-51
10:43:17 [INFO] gameserver.network.server: Client connected: uid=-51 remote=('192.168.178.25', 61207) UA=Mozilla/5.0 (iPhone; CPU iPhone OS 18_7 like Mac OS X) AppleWebKit/605.1.15 (KHT origin=http://192.168.178.47:8000 subprotocol=(none)
10:43:26 [INFO] gameserver.network.server: Client closed cleanly: uid=-51 remote=('192.168.178.25', 61207)
10:43:26 [INFO] gameserver.network.server: Session removed: uid=-51
10:43:55 [INFO] websockets.server: connection open
10:43:55 [INFO] gameserver.network.server: Session registered: uid=-52
10:43:55 [INFO] gameserver.network.server: Client connected: uid=-52 remote=('192.168.178.25', 61232) UA=Mozilla/5.0 (iPhone; CPU iPhone OS 18_7 like Mac OS X) AppleWebKit/605.1.15 (KHT origin=http://192.168.178.47:8000 subprotocol=(none)
10:43:55 [INFO] websockets.server: connection open
10:43:55 [INFO] gameserver.network.server: Session registered: uid=-53
10:43:55 [INFO] gameserver.network.server: Client connected: uid=-53 remote=('192.168.178.25', 61240) UA=Mozilla/5.0 (iPhone; CPU iPhone OS 18_7 like Mac OS X) AppleWebKit/605.1.15 (KHT origin=http://192.168.178.47:8000 subprotocol=(none)
10:43:55 [INFO] gameserver.network.server: Client closed cleanly: uid=-52 remote=('192.168.178.25', 61232)
10:43:55 [INFO] gameserver.network.server: Session removed: uid=-52
10:44:52 [INFO] gameserver.network.server: Client closed cleanly: uid=-53 remote=('192.168.178.25', 61240)
10:44:52 [INFO] gameserver.network.server: Session removed: uid=-53
10:45:18 [INFO] websockets.server: connection open
10:45:18 [INFO] gameserver.network.server: Session registered: uid=-54
10:45:18 [INFO] gameserver.network.server: Client connected: uid=-54 remote=('192.168.178.25', 61256) UA=Mozilla/5.0 (iPhone; CPU iPhone OS 18_7 like Mac OS X) AppleWebKit/605.1.15 (KHT origin=http://192.168.178.47:8000 subprotocol=(none)
10:45:18 [INFO] gameserver.network.server: Client closed cleanly: uid=-54 remote=('192.168.178.25', 61256)
10:45:18 [INFO] gameserver.network.server: Session removed: uid=-54
10:45:18 [INFO] websockets.server: connection open
10:45:18 [INFO] gameserver.network.server: Session registered: uid=-55
10:45:18 [INFO] gameserver.network.server: Client connected: uid=-55 remote=('192.168.178.25', 61264) UA=Mozilla/5.0 (iPhone; CPU iPhone OS 18_7 like Mac OS X) AppleWebKit/605.1.15 (KHT origin=http://192.168.178.47:8000 subprotocol=(none)
10:45:25 [INFO] gameserver.network.server: Client closed cleanly: uid=-55 remote=('192.168.178.25', 61264)
10:45:25 [INFO] gameserver.network.server: Session removed: uid=-55
10:46:02 [INFO] websockets.server: connection open
10:46:02 [INFO] gameserver.network.server: Session registered: uid=-56
10:46:02 [INFO] gameserver.network.server: Client connected: uid=-56 remote=('192.168.178.25', 61282) UA=Mozilla/5.0 (iPhone; CPU iPhone OS 18_7 like Mac OS X) AppleWebKit/605.1.15 (KHT origin=http://192.168.178.47:8000 subprotocol=(none)
10:46:02 [INFO] gameserver.network.server: Client closed cleanly: uid=-56 remote=('192.168.178.25', 61282)
10:46:02 [INFO] gameserver.network.server: Session removed: uid=-56
10:46:02 [INFO] websockets.server: connection open
10:46:02 [INFO] gameserver.network.server: Session registered: uid=-57
10:46:02 [INFO] gameserver.network.server: Client connected: uid=-57 remote=('192.168.178.25', 61290) UA=Mozilla/5.0 (iPhone; CPU iPhone OS 18_7 like Mac OS X) AppleWebKit/605.1.15 (KHT origin=http://192.168.178.47:8000 subprotocol=(none)
10:46:30 [INFO] gameserver.network.server: Client closed cleanly: uid=-57 remote=('192.168.178.25', 61290)
10:46:30 [INFO] gameserver.network.server: Session removed: uid=-57
10:46:38 [INFO] websockets.server: connection open
10:46:38 [INFO] gameserver.network.server: Session registered: uid=-58
10:46:38 [INFO] gameserver.network.server: Client connected: uid=-58 remote=('192.168.178.25', 61300) UA=Mozilla/5.0 (iPhone; CPU iPhone OS 18_7 like Mac OS X) AppleWebKit/605.1.15 (KHT origin=http://192.168.178.47:8000 subprotocol=(none)
10:46:38 [INFO] gameserver.network.server: Client closed cleanly: uid=-58 remote=('192.168.178.25', 61300)
10:46:38 [INFO] gameserver.network.server: Session removed: uid=-58
10:46:38 [INFO] websockets.server: connection open
10:46:38 [INFO] gameserver.network.server: Session registered: uid=-59
10:46:38 [INFO] gameserver.network.server: Client connected: uid=-59 remote=('192.168.178.25', 61308) UA=Mozilla/5.0 (iPhone; CPU iPhone OS 18_7 like Mac OS X) AppleWebKit/605.1.15 (KHT origin=http://192.168.178.47:8000 subprotocol=(none)
10:46:41 [INFO] gameserver.network.server: Client closed cleanly: uid=-59 remote=('192.168.178.25', 61308)
10:46:41 [INFO] gameserver.network.server: Session removed: uid=-59
10:46:51 [INFO] websockets.server: connection open
10:46:51 [INFO] gameserver.network.server: Session registered: uid=-60
10:46:51 [INFO] gameserver.network.server: Client connected: uid=-60 remote=('192.168.178.25', 61316) UA=Mozilla/5.0 (iPhone; CPU iPhone OS 18_7 like Mac OS X) AppleWebKit/605.1.15 (KHT origin=http://192.168.178.47:8000 subprotocol=(none)
10:46:51 [INFO] websockets.server: connection open
10:46:51 [INFO] gameserver.network.server: Session registered: uid=-61
10:46:51 [INFO] gameserver.network.server: Client connected: uid=-61 remote=('192.168.178.25', 61324) UA=Mozilla/5.0 (iPhone; CPU iPhone OS 18_7 like Mac OS X) AppleWebKit/605.1.15 (KHT origin=http://192.168.178.47:8000 subprotocol=(none)
10:46:51 [INFO] gameserver.network.server: Client closed cleanly: uid=-60 remote=('192.168.178.25', 61316)
10:46:51 [INFO] gameserver.network.server: Session removed: uid=-60
10:48:02 [INFO] gameserver.network.server: Client closed cleanly: uid=-61 remote=('192.168.178.25', 61324)
10:48:02 [INFO] gameserver.network.server: Session removed: uid=-61
10:48:26 [INFO] websockets.server: connection open
10:48:26 [INFO] gameserver.network.server: Session registered: uid=-62
10:48:26 [INFO] gameserver.network.server: Client connected: uid=-62 remote=('192.168.178.25', 61346) UA=Mozilla/5.0 (iPhone; CPU iPhone OS 18_7 like Mac OS X) AppleWebKit/605.1.15 (KHT origin=http://192.168.178.47:8000 subprotocol=(none)
10:48:26 [INFO] gameserver.network.server: Client closed cleanly: uid=-62 remote=('192.168.178.25', 61346)
10:48:26 [INFO] gameserver.network.server: Session removed: uid=-62
10:48:26 [INFO] websockets.server: connection open
10:48:26 [INFO] gameserver.network.server: Session registered: uid=-63
10:48:26 [INFO] gameserver.network.server: Client connected: uid=-63 remote=('192.168.178.25', 61354) UA=Mozilla/5.0 (iPhone; CPU iPhone OS 18_7 like Mac OS X) AppleWebKit/605.1.15 (KHT origin=http://192.168.178.47:8000 subprotocol=(none)
10:48:30 [INFO] gameserver.network.server: Client closed cleanly: uid=-63 remote=('192.168.178.25', 61354)
10:48:30 [INFO] gameserver.network.server: Session removed: uid=-63
10:48:43 [INFO] websockets.server: connection open
10:48:43 [INFO] gameserver.network.server: Session registered: uid=-64
10:48:43 [INFO] gameserver.network.server: Client connected: uid=-64 remote=('192.168.178.25', 61360) UA=Mozilla/5.0 (iPhone; CPU iPhone OS 18_7 like Mac OS X) AppleWebKit/605.1.15 (KHT origin=http://192.168.178.47:8000 subprotocol=(none)
10:48:45 [INFO] gameserver.network.server: Client disconnected: uid=-64 code=CloseCode.ABNORMAL_CLOSURE reason=(none) remote=('192.168.178.25', 61360)
10:48:45 [INFO] gameserver.network.server: Session removed: uid=-64
10:48:48 [INFO] websockets.server: connection open
10:48:48 [INFO] gameserver.network.server: Session registered: uid=-65
10:48:48 [INFO] gameserver.network.server: Client connected: uid=-65 remote=('192.168.178.25', 61362) UA=Mozilla/5.0 (iPhone; CPU iPhone OS 18_7 like Mac OS X) AppleWebKit/605.1.15 (KHT origin=http://192.168.178.47:8000 subprotocol=(none)
10:48:55 [INFO] gameserver.network.server: Client closed cleanly: uid=-65 remote=('192.168.178.25', 61362)
10:48:55 [INFO] gameserver.network.server: Session removed: uid=-65
10:50:30 [INFO] websockets.server: connection open
10:50:30 [INFO] gameserver.network.server: Session registered: uid=-66
10:50:30 [INFO] gameserver.network.server: Client connected: uid=-66 remote=('192.168.178.25', 61390) UA=Mozilla/5.0 (iPhone; CPU iPhone OS 18_7 like Mac OS X) AppleWebKit/605.1.15 (KHT origin=http://192.168.178.47:8000 subprotocol=(none)
10:50:30 [INFO] gameserver.network.server: Client closed cleanly: uid=-66 remote=('192.168.178.25', 61390)
10:50:30 [INFO] gameserver.network.server: Session removed: uid=-66
10:50:30 [INFO] websockets.server: connection open
10:50:30 [INFO] gameserver.network.server: Session registered: uid=-67
10:50:30 [INFO] gameserver.network.server: Client connected: uid=-67 remote=('192.168.178.25', 61392) UA=Mozilla/5.0 (iPhone; CPU iPhone OS 18_7 like Mac OS X) AppleWebKit/605.1.15 (KHT origin=http://192.168.178.47:8000 subprotocol=(none)
10:50:36 [INFO] gameserver.network.server: Client disconnected: uid=-67 code=CloseCode.ABNORMAL_CLOSURE reason=(none) remote=('192.168.178.25', 61392)
10:50:36 [INFO] gameserver.network.server: Session removed: uid=-67
11:02:05 [INFO] websockets.server: connection open
11:02:05 [INFO] gameserver.network.server: Session registered: uid=-68
11:02:05 [INFO] gameserver.network.server: Client connected: uid=-68 remote=('192.168.178.25', 61396) UA=Mozilla/5.0 (iPhone; CPU iPhone OS 18_7 like Mac OS X) AppleWebKit/605.1.15 (KHT origin=http://192.168.178.47:8000 subprotocol=(none)
11:02:07 [INFO] gameserver.network.server: Client disconnected: uid=-68 code=CloseCode.ABNORMAL_CLOSURE reason=(none) remote=('192.168.178.25', 61396)
11:02:07 [INFO] gameserver.network.server: Session removed: uid=-68
11:23:20 [INFO] websockets.server: connection open
11:23:20 [INFO] gameserver.network.server: Session registered: uid=-69
11:23:20 [INFO] gameserver.network.server: Client connected: uid=-69 remote=('192.168.178.25', 61399) UA=Mozilla/5.0 (iPhone; CPU iPhone OS 18_7 like Mac OS X) AppleWebKit/605.1.15 (KHT origin=http://192.168.178.47:8000 subprotocol=(none)
11:23:20 [INFO] websockets.server: connection open
11:23:20 [INFO] gameserver.network.server: Session registered: uid=-70
11:23:20 [INFO] gameserver.network.server: Client connected: uid=-70 remote=('192.168.178.25', 61410) UA=Mozilla/5.0 (iPhone; CPU iPhone OS 18_7 like Mac OS X) AppleWebKit/605.1.15 (KHT origin=http://192.168.178.47:8000 subprotocol=(none)
11:23:20 [INFO] gameserver.network.server: Client closed cleanly: uid=-69 remote=('192.168.178.25', 61399)
11:23:20 [INFO] gameserver.network.server: Session removed: uid=-69
11:23:29 [INFO] gameserver.network.server: Client closed cleanly: uid=-70 remote=('192.168.178.25', 61410)
11:23:29 [INFO] gameserver.network.server: Session removed: uid=-70
11:23:41 [INFO] websockets.server: connection open
11:23:41 [INFO] gameserver.network.server: Session registered: uid=-71
11:23:41 [INFO] gameserver.network.server: Client connected: uid=-71 remote=('192.168.178.25', 61420) UA=Mozilla/5.0 (iPhone; CPU iPhone OS 18_7 like Mac OS X) AppleWebKit/605.1.15 (KHT origin=http://192.168.178.47:8000 subprotocol=(none)
11:23:41 [INFO] websockets.server: connection open
11:23:41 [INFO] gameserver.network.server: Session registered: uid=-72
11:23:41 [INFO] gameserver.network.server: Client connected: uid=-72 remote=('192.168.178.25', 61428) UA=Mozilla/5.0 (iPhone; CPU iPhone OS 18_7 like Mac OS X) AppleWebKit/605.1.15 (KHT origin=http://192.168.178.47:8000 subprotocol=(none)
11:23:41 [INFO] gameserver.network.server: Client closed cleanly: uid=-71 remote=('192.168.178.25', 61420)
11:23:41 [INFO] gameserver.network.server: Session removed: uid=-71
11:23:45 [INFO] gameserver.network.server: Client closed cleanly: uid=-72 remote=('192.168.178.25', 61428)
11:23:45 [INFO] gameserver.network.server: Session removed: uid=-72
11:24:06 [INFO] websockets.server: connection open
11:24:06 [INFO] gameserver.network.server: Session registered: uid=-73
11:24:06 [INFO] gameserver.network.server: Client connected: uid=-73 remote=('192.168.178.25', 61440) UA=Mozilla/5.0 (iPhone; CPU iPhone OS 18_7 like Mac OS X) AppleWebKit/605.1.15 (KHT origin=http://192.168.178.47:8000 subprotocol=(none)
11:24:06 [INFO] gameserver.network.server: Client closed cleanly: uid=-73 remote=('192.168.178.25', 61440)
11:24:06 [INFO] gameserver.network.server: Session removed: uid=-73
11:25:00 [INFO] websockets.server: connection open
11:25:00 [INFO] gameserver.network.server: Session registered: uid=-74
11:25:00 [INFO] gameserver.network.server: Client connected: uid=-74 remote=('192.168.178.25', 61477) UA=Mozilla/5.0 (iPhone; CPU iPhone OS 18_7 like Mac OS X) AppleWebKit/605.1.15 (KHT origin=http://192.168.178.47:8000 subprotocol=(none)
11:25:00 [INFO] websockets.server: connection open
11:25:00 [INFO] gameserver.network.server: Session registered: uid=-75
11:25:00 [INFO] gameserver.network.server: Client connected: uid=-75 remote=('192.168.178.25', 61486) UA=Mozilla/5.0 (iPhone; CPU iPhone OS 18_7 like Mac OS X) AppleWebKit/605.1.15 (KHT origin=http://192.168.178.47:8000 subprotocol=(none)
11:25:00 [INFO] gameserver.network.server: Client closed cleanly: uid=-74 remote=('192.168.178.25', 61477)
11:25:00 [INFO] gameserver.network.server: Session removed: uid=-74
11:25:15 [INFO] gameserver.network.auth: Login success: eem (uid=2)
11:25:15 [INFO] gameserver.network.server: Session registered: uid=2
11:25:15 [INFO] gameserver.network.server: Session upgraded: guest=-75 → uid=2
11:25:22 [INFO] gameserver.network.server: Client closed cleanly: uid=2 remote=('192.168.178.25', 61486)
11:25:22 [INFO] gameserver.network.server: Session removed: uid=2
11:25:26 [INFO] websockets.server: connection open
11:25:26 [INFO] gameserver.network.server: Session registered: uid=-76
11:25:26 [INFO] gameserver.network.server: Client connected: uid=-76 remote=('192.168.178.25', 61489) UA=Mozilla/5.0 (iPhone; CPU iPhone OS 18_7 like Mac OS X) AppleWebKit/605.1.15 (KHT origin=http://192.168.178.47:8000 subprotocol=(none)
11:25:26 [INFO] gameserver.network.auth: Login success: eem (uid=2)
11:25:26 [INFO] gameserver.network.server: Session registered: uid=2
11:25:26 [INFO] gameserver.network.server: Session upgraded: guest=-76 → uid=2
11:25:30 [INFO] gameserver.network.handlers: notification_request from uid=2 (not yet implemented)
11:25:40 [INFO] gameserver.network.server: Client closed cleanly: uid=2 remote=('192.168.178.25', 61489)
11:25:40 [INFO] gameserver.network.server: Session removed: uid=2
11:25:57 [INFO] websockets.server: connection open
11:25:57 [INFO] gameserver.network.server: Session registered: uid=-77
11:25:57 [INFO] gameserver.network.server: Client connected: uid=-77 remote=('192.168.178.25', 61506) UA=Mozilla/5.0 (iPhone; CPU iPhone OS 18_7 like Mac OS X) AppleWebKit/605.1.15 (KHT origin=http://192.168.178.47:8000 subprotocol=(none)
11:25:57 [INFO] gameserver.network.server: Client closed cleanly: uid=-77 remote=('192.168.178.25', 61506)
11:25:57 [INFO] gameserver.network.server: Session removed: uid=-77
11:25:57 [INFO] websockets.server: connection open
11:25:57 [INFO] gameserver.network.server: Session registered: uid=-78
11:25:57 [INFO] gameserver.network.server: Client connected: uid=-78 remote=('192.168.178.25', 61508) UA=Mozilla/5.0 (iPhone; CPU iPhone OS 18_7 like Mac OS X) AppleWebKit/605.1.15 (KHT origin=http://192.168.178.47:8000 subprotocol=(none)
11:26:09 [INFO] gameserver.network.auth: Login success: eem (uid=2)
11:26:09 [INFO] gameserver.network.server: Session registered: uid=2
11:26:09 [INFO] gameserver.network.server: Session upgraded: guest=-78 → uid=2
11:26:13 [INFO] gameserver.network.server: Client closed cleanly: uid=2 remote=('192.168.178.25', 61508)
11:26:13 [INFO] gameserver.network.server: Session removed: uid=2
11:27:14 [INFO] websockets.server: connection open
11:27:14 [INFO] gameserver.network.server: Session registered: uid=-79
11:27:14 [INFO] gameserver.network.server: Client connected: uid=-79 remote=('192.168.178.25', 61510) UA=Mozilla/5.0 (iPhone; CPU iPhone OS 18_7 like Mac OS X) AppleWebKit/605.1.15 (KHT origin=http://192.168.178.47:8000 subprotocol=(none)
11:27:14 [INFO] websockets.server: connection open
11:27:14 [INFO] gameserver.network.server: Session registered: uid=-80
11:27:14 [INFO] gameserver.network.server: Client connected: uid=-80 remote=('192.168.178.25', 61518) UA=Mozilla/5.0 (iPhone; CPU iPhone OS 18_7 like Mac OS X) AppleWebKit/605.1.15 (KHT origin=http://192.168.178.47:8000 subprotocol=(none)
11:27:14 [INFO] gameserver.network.server: Client closed cleanly: uid=-79 remote=('192.168.178.25', 61510)
11:27:14 [INFO] gameserver.network.server: Session removed: uid=-79
11:27:14 [INFO] gameserver.network.auth: Login success: eem (uid=2)
11:27:14 [INFO] gameserver.network.server: Session registered: uid=2
11:27:14 [INFO] gameserver.network.server: Session upgraded: guest=-80 → uid=2
11:27:22 [INFO] gameserver.network.server: Client closed cleanly: uid=2 remote=('192.168.178.25', 61518)
11:27:22 [INFO] gameserver.network.server: Session removed: uid=2
11:28:52 [INFO] websockets.server: connection open
11:28:52 [INFO] gameserver.network.server: Session registered: uid=-81
11:28:52 [INFO] gameserver.network.server: Client connected: uid=-81 remote=('192.168.178.25', 61522) UA=Mozilla/5.0 (iPhone; CPU iPhone OS 18_7 like Mac OS X) AppleWebKit/605.1.15 (KHT origin=http://192.168.178.47:8000 subprotocol=(none)
11:28:52 [INFO] gameserver.network.server: Client closed cleanly: uid=-81 remote=('192.168.178.25', 61522)
11:28:52 [INFO] gameserver.network.server: Session removed: uid=-81
11:28:52 [INFO] websockets.server: connection open
11:28:52 [INFO] gameserver.network.server: Session registered: uid=-82
11:28:52 [INFO] gameserver.network.server: Client connected: uid=-82 remote=('192.168.178.25', 61530) UA=Mozilla/5.0 (iPhone; CPU iPhone OS 18_7 like Mac OS X) AppleWebKit/605.1.15 (KHT origin=http://192.168.178.47:8000 subprotocol=(none)
11:29:47 [INFO] gameserver.network.server: Client closed cleanly: uid=-82 remote=('192.168.178.25', 61530)
11:29:47 [INFO] gameserver.network.server: Session removed: uid=-82
11:29:48 [INFO] websockets.server: connection open
11:29:48 [INFO] gameserver.network.server: Session registered: uid=-83
11:29:48 [INFO] gameserver.network.server: Client connected: uid=-83 remote=('192.168.178.25', 61538) UA=Mozilla/5.0 (iPhone; CPU iPhone OS 18_7 like Mac OS X) AppleWebKit/605.1.15 (KHT origin=http://192.168.178.47:8000 subprotocol=(none)
11:29:48 [INFO] gameserver.network.server: Client closed cleanly: uid=-83 remote=('192.168.178.25', 61538)
11:29:48 [INFO] gameserver.network.server: Session removed: uid=-83
11:29:48 [INFO] websockets.server: connection open
11:29:48 [INFO] gameserver.network.server: Session registered: uid=-84
11:29:48 [INFO] gameserver.network.server: Client connected: uid=-84 remote=('192.168.178.25', 61540) UA=Mozilla/5.0 (iPhone; CPU iPhone OS 18_7 like Mac OS X) AppleWebKit/605.1.15 (KHT origin=http://192.168.178.47:8000 subprotocol=(none)
11:29:49 [INFO] gameserver.network.server: Client closed cleanly: uid=-84 remote=('192.168.178.25', 61540)
11:29:49 [INFO] gameserver.network.server: Session removed: uid=-84
11:29:51 [INFO] websockets.server: connection open
11:29:51 [INFO] gameserver.network.server: Session registered: uid=-85
11:29:51 [INFO] gameserver.network.server: Client connected: uid=-85 remote=('192.168.178.25', 61542) UA=Mozilla/5.0 (iPhone; CPU iPhone OS 18_7 like Mac OS X) AppleWebKit/605.1.15 (KHT origin=http://192.168.178.47:8000 subprotocol=(none)
11:29:51 [INFO] gameserver.network.server: Client closed cleanly: uid=-85 remote=('192.168.178.25', 61542)
11:29:51 [INFO] gameserver.network.server: Session removed: uid=-85
11:29:51 [INFO] websockets.server: connection open
11:29:51 [INFO] gameserver.network.server: Session registered: uid=-86
11:29:51 [INFO] gameserver.network.server: Client connected: uid=-86 remote=('192.168.178.25', 61544) UA=Mozilla/5.0 (iPhone; CPU iPhone OS 18_7 like Mac OS X) AppleWebKit/605.1.15 (KHT origin=http://192.168.178.47:8000 subprotocol=(none)
11:29:55 [INFO] gameserver.network.auth: Login success: eem (uid=2)
11:29:55 [INFO] gameserver.network.server: Session registered: uid=2
11:29:55 [INFO] gameserver.network.server: Session upgraded: guest=-86 → uid=2
11:32:21 [INFO] gameserver.network.server: Client closed cleanly: uid=2 remote=('192.168.178.25', 61544)
11:32:21 [INFO] gameserver.network.server: Session removed: uid=2
11:32:30 [INFO] __main__: Shutdown signal received — stopping …
11:32:30 [INFO] __main__: Shutting down …
11:32:30 [INFO] gameserver.persistence.state_save: Game state saved to state.yaml (2 empires, 0 attacks, 0 battles)
11:32:30 [INFO] websockets.server: server closing
11:32:30 [INFO] websockets.server: server closed
11:32:30 [INFO] gameserver.network.server: WebSocket server stopped
11:32:30 [INFO] __main__:   WebSocket server stopped
11:32:30 [INFO] __main__:   debug dashboard stopped
11:32:30 [INFO] __main__:   database closed
11:32:30 [INFO] __main__:   goodbye
11:32:33 [INFO] __main__: === Game Server starting ===
11:32:33 [INFO] __main__: Loading configuration …
11:32:34 [INFO] __main__:   items:        210 loaded from config
11:32:34 [INFO] __main__:   map:          4 paths, 23 build tiles from config/maps/default.yaml
11:32:34 [INFO] __main__:   ai_templates: 2 entries from config/ai_templates.yaml
11:32:34 [INFO] gameserver.loaders.game_config_loader: Loaded game config from config/game.yaml (30 keys)
11:32:34 [INFO] __main__:   game_config:  loaded
11:32:34 [INFO] __main__: Initializing persistence …
11:32:34 [INFO] gameserver.persistence.database: Database connected: gameserver.db
11:32:34 [INFO] __main__:   database:     connected (gameserver.db)
11:32:34 [INFO] gameserver.persistence.state_load: Restoring state from state.yaml (saved at 2026-02-14T11:32:30, version 1)
11:32:34 [INFO] gameserver.persistence.state_load: Restored 2 empires, 0 attacks, 0 battles
11:32:34 [INFO] __main__:   state:        restored from disk (2 empires, 0 attacks)
11:32:34 [INFO] __main__: Creating services …
11:32:34 [INFO] __main__:   upgrade_provider: 210 items registered
11:32:34 [INFO] __main__:   all services created
11:32:34 [INFO] __main__: Wiring event handlers …
11:32:34 [INFO] __main__:   event handlers registered
11:32:34 [INFO] gameserver.engine.empire_service: Empire registered: uid=100 name='TestImperium'
11:32:34 [INFO] gameserver.engine.empire_service: Empire 100: recalculated effects → {}
11:32:34 [INFO] gameserver.engine.empire_service: Empire registered: uid=2 name='Empire1'
11:32:34 [INFO] gameserver.engine.empire_service: Empire 2: recalculated effects → {'life_offset': 0.011, 'gold_offset': 0.2, 'culture_offset': 0.2, 'culture_modifier': 0.1, 'gold_modifier': 0.1, 'build_speed_modifier': 0.1}
11:32:34 [INFO] __main__: Restored 2 empires from saved state
11:32:34 [INFO] __main__: Starting network server …
11:32:34 [INFO] gameserver.network.handlers: Registered 32 message handlers: ping, summary_request, item_request, military_request, map_load_request, map_save_request, new_item, new_structure, delete_structure, upgrade_structure, citizen_upgrade, change_citizen, increase_life, new_army, new_attack_request, change_army, new_wave, change_wave, end_siege, battle_register, battle_unregister, battle_next_wave_request, notification_request, user_message, timeline_request, userinfo_request, hall_of_fame_request, preferences_request, change_preferences, auth_request, signup, create_empire
11:32:34 [INFO] websockets.server: server listening on 0.0.0.0:8765
11:32:34 [INFO] gameserver.network.server: WebSocket server listening on ws://0.0.0.0:8765
11:32:34 [INFO] __main__:   WebSocket server listening on 0.0.0.0:8765
11:32:34 [INFO] gameserver.debug.dashboard: Debug dashboard running at http://0.0.0.0:9000/
11:32:34 [INFO] __main__: Starting game loop …
11:32:34 [INFO] __main__:   game loop running (1 s tick)
11:32:39 [INFO] websockets.server: connection open
11:32:39 [INFO] gameserver.network.server: Session registered: uid=-1
11:32:39 [INFO] gameserver.network.server: Client connected: uid=-1 remote=('192.168.178.25', 61548) UA=Mozilla/5.0 (iPhone; CPU iPhone OS 18_7 like Mac OS X) AppleWebKit/605.1.15 (KHT origin=http://192.168.178.47:8000 subprotocol=(none)
11:32:39 [INFO] gameserver.network.server: Client closed cleanly: uid=-1 remote=('192.168.178.25', 61548)
11:32:39 [INFO] gameserver.network.server: Session removed: uid=-1
11:32:39 [INFO] websockets.server: connection open
11:32:39 [INFO] gameserver.network.server: Session registered: uid=-2
11:32:39 [INFO] gameserver.network.server: Client connected: uid=-2 remote=('192.168.178.25', 61556) UA=Mozilla/5.0 (iPhone; CPU iPhone OS 18_7 like Mac OS X) AppleWebKit/605.1.15 (KHT origin=http://192.168.178.47:8000 subprotocol=(none)
11:32:39 [INFO] gameserver.network.auth: Login success: eem (uid=2)
11:32:39 [INFO] gameserver.network.server: Session registered: uid=2
11:32:39 [INFO] gameserver.network.server: Session upgraded: guest=-2 → uid=2
11:33:46 [INFO] gameserver.network.server: Client closed cleanly: uid=2 remote=('192.168.178.25', 61556)
11:33:46 [INFO] gameserver.network.server: Session removed: uid=2
11:33:48 [INFO] websockets.server: connection open
11:33:48 [INFO] gameserver.network.server: Session registered: uid=-3
11:33:48 [INFO] gameserver.network.server: Client connected: uid=-3 remote=('192.168.178.25', 61564) UA=Mozilla/5.0 (iPhone; CPU iPhone OS 18_7 like Mac OS X) AppleWebKit/605.1.15 (KHT origin=http://192.168.178.47:8000 subprotocol=(none)
11:33:48 [INFO] websockets.server: connection open
11:33:48 [INFO] gameserver.network.server: Session registered: uid=-4
11:33:48 [INFO] gameserver.network.server: Client connected: uid=-4 remote=('192.168.178.25', 61566) UA=Mozilla/5.0 (iPhone; CPU iPhone OS 18_7 like Mac OS X) AppleWebKit/605.1.15 (KHT origin=http://192.168.178.47:8000 subprotocol=(none)
11:33:48 [INFO] gameserver.network.server: Client closed cleanly: uid=-3 remote=('192.168.178.25', 61564)
11:33:48 [INFO] gameserver.network.server: Session removed: uid=-3
11:33:48 [INFO] gameserver.network.auth: Login success: eem (uid=2)
11:33:48 [INFO] gameserver.network.server: Session registered: uid=2
11:33:48 [INFO] gameserver.network.server: Session upgraded: guest=-4 → uid=2
11:35:54 [INFO] gameserver.network.server: Client closed cleanly: uid=2 remote=('192.168.178.25', 61566)
11:35:54 [INFO] gameserver.network.server: Session removed: uid=2
11:57:34 [INFO] websockets.server: connection open
11:57:34 [INFO] gameserver.network.server: Session registered: uid=-5
11:57:34 [INFO] gameserver.network.server: Client connected: uid=-5 remote=('192.168.178.25', 61568) UA=Mozilla/5.0 (iPhone; CPU iPhone OS 18_7 like Mac OS X) AppleWebKit/605.1.15 (KHT origin=http://192.168.178.47:8000 subprotocol=(none)
11:57:34 [INFO] websockets.server: connection open
11:57:34 [INFO] gameserver.network.server: Session registered: uid=-6
11:57:34 [INFO] gameserver.network.server: Client connected: uid=-6 remote=('192.168.178.25', 61576) UA=Mozilla/5.0 (iPhone; CPU iPhone OS 18_7 like Mac OS X) AppleWebKit/605.1.15 (KHT origin=http://192.168.178.47:8000 subprotocol=(none)
11:57:34 [INFO] gameserver.network.server: Client closed cleanly: uid=-5 remote=('192.168.178.25', 61568)
11:57:34 [INFO] gameserver.network.server: Session removed: uid=-5
11:57:34 [INFO] gameserver.network.auth: Login success: eem (uid=2)
11:57:34 [INFO] gameserver.network.server: Session registered: uid=2
11:57:34 [INFO] gameserver.network.server: Session upgraded: guest=-6 → uid=2
11:57:38 [INFO] gameserver.network.server: Client closed cleanly: uid=2 remote=('192.168.178.25', 61576)
11:57:38 [INFO] gameserver.network.server: Session removed: uid=2
11:57:43 [INFO] websockets.server: connection open
11:57:43 [INFO] gameserver.network.server: Session registered: uid=-7
11:57:43 [INFO] gameserver.network.server: Client connected: uid=-7 remote=('192.168.178.25', 61578) UA=Mozilla/5.0 (iPhone; CPU iPhone OS 18_7 like Mac OS X) AppleWebKit/605.1.15 (KHT origin=http://192.168.178.47:8000 subprotocol=(none)
11:57:43 [INFO] gameserver.network.server: Client closed cleanly: uid=-7 remote=('192.168.178.25', 61578)
11:57:43 [INFO] gameserver.network.server: Session removed: uid=-7
11:57:43 [INFO] websockets.server: connection open
11:57:43 [INFO] gameserver.network.server: Session registered: uid=-8
11:57:43 [INFO] gameserver.network.server: Client connected: uid=-8 remote=('192.168.178.25', 61580) UA=Mozilla/5.0 (iPhone; CPU iPhone OS 18_7 like Mac OS X) AppleWebKit/605.1.15 (KHT origin=http://192.168.178.47:8000 subprotocol=(none)
11:57:43 [INFO] gameserver.network.auth: Login success: eem (uid=2)
11:57:43 [INFO] gameserver.network.server: Session registered: uid=2
11:57:43 [INFO] gameserver.network.server: Session upgraded: guest=-8 → uid=2
11:57:49 [INFO] gameserver.network.server: Client disconnected: uid=2 code=CloseCode.ABNORMAL_CLOSURE reason=(none) remote=('192.168.178.25', 61580)
11:57:49 [INFO] gameserver.network.server: Session removed: uid=2
11:57:59 [INFO] websockets.server: connection open
11:57:59 [INFO] gameserver.network.server: Session registered: uid=-9
11:57:59 [INFO] gameserver.network.server: Client connected: uid=-9 remote=('192.168.178.2', 50818) UA=Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:147.0) Gecko/20100101 Firefox/147.0 origin=http://192.168.178.30:8000 subprotocol=(none)
11:58:01 [INFO] gameserver.network.auth: Login success: eem (uid=2)
11:58:01 [INFO] gameserver.network.server: Session registered: uid=2
11:58:01 [INFO] gameserver.network.server: Session upgraded: guest=-9 → uid=2
12:00:56 [INFO] gameserver.network.server: Client closed cleanly: uid=2 remote=('192.168.178.2', 50818)
12:00:56 [INFO] gameserver.network.server: Session removed: uid=2
12:00:56 [INFO] websockets.server: connection open
12:00:56 [INFO] gameserver.network.server: Session registered: uid=-10
12:00:56 [INFO] gameserver.network.server: Client connected: uid=-10 remote=('192.168.178.2', 62061) UA=Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:147.0) Gecko/20100101 Firefox/147.0 origin=http://192.168.178.30:8000 subprotocol=(none)
12:00:56 [INFO] gameserver.network.auth: Login success: eem (uid=2)
12:00:56 [INFO] gameserver.network.server: Session registered: uid=2
12:00:56 [INFO] gameserver.network.server: Session upgraded: guest=-10 → uid=2
12:10:53 [INFO] gameserver.network.server: Client closed cleanly: uid=2 remote=('192.168.178.2', 62061)
12:10:53 [INFO] gameserver.network.server: Session removed: uid=2
12:10:54 [INFO] websockets.server: connection open
12:10:54 [INFO] gameserver.network.server: Session registered: uid=-11
12:10:54 [INFO] gameserver.network.server: Client connected: uid=-11 remote=('192.168.178.2', 59912) UA=Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:147.0) Gecko/20100101 Firefox/147.0 origin=http://192.168.178.30:8000 subprotocol=(none)
12:10:54 [INFO] gameserver.network.auth: Login success: eem (uid=2)
12:10:54 [INFO] gameserver.network.server: Session registered: uid=2
12:10:54 [INFO] gameserver.network.server: Session upgraded: guest=-11 → uid=2
12:11:08 [INFO] gameserver.network.server: Client closed cleanly: uid=2 remote=('192.168.178.2', 59912)
12:11:08 [INFO] gameserver.network.server: Session removed: uid=2
12:11:08 [INFO] websockets.server: connection open
12:11:08 [INFO] gameserver.network.server: Session registered: uid=-12
12:11:08 [INFO] gameserver.network.server: Client connected: uid=-12 remote=('192.168.178.2', 59933) UA=Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:147.0) Gecko/20100101 Firefox/147.0 origin=http://192.168.178.30:8000 subprotocol=(none)
12:11:08 [INFO] gameserver.network.auth: Login success: eem (uid=2)
12:11:08 [INFO] gameserver.network.server: Session registered: uid=2
12:11:08 [INFO] gameserver.network.server: Session upgraded: guest=-12 → uid=2
12:11:58 [INFO] gameserver.network.server: Client closed cleanly: uid=2 remote=('192.168.178.2', 59933)
12:11:58 [INFO] gameserver.network.server: Session removed: uid=2
12:11:59 [INFO] websockets.server: connection open
12:11:59 [INFO] gameserver.network.server: Session registered: uid=-13
12:11:59 [INFO] gameserver.network.server: Client connected: uid=-13 remote=('192.168.178.2', 56632) UA=Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:147.0) Gecko/20100101 Firefox/147.0 origin=http://192.168.178.30:8000 subprotocol=(none)
12:11:59 [INFO] gameserver.network.auth: Login success: eem (uid=2)
12:11:59 [INFO] gameserver.network.server: Session registered: uid=2
12:11:59 [INFO] gameserver.network.server: Session upgraded: guest=-13 → uid=2
12:12:00 [INFO] gameserver.network.server: Client closed cleanly: uid=2 remote=('192.168.178.2', 56632)
12:12:00 [INFO] gameserver.network.server: Session removed: uid=2
12:12:00 [INFO] websockets.server: connection open
12:12:00 [INFO] gameserver.network.server: Session registered: uid=-14
12:12:00 [INFO] gameserver.network.server: Client connected: uid=-14 remote=('192.168.178.2', 56634) UA=Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:147.0) Gecko/20100101 Firefox/147.0 origin=http://192.168.178.30:8000 subprotocol=(none)
12:12:00 [INFO] gameserver.network.auth: Login success: eem (uid=2)
12:12:00 [INFO] gameserver.network.server: Session registered: uid=2
12:12:00 [INFO] gameserver.network.server: Session upgraded: guest=-14 → uid=2
12:12:01 [INFO] gameserver.network.server: Client closed cleanly: uid=2 remote=('192.168.178.2', 56634)
12:12:01 [INFO] gameserver.network.server: Session removed: uid=2
12:12:01 [INFO] websockets.server: connection open
12:12:01 [INFO] gameserver.network.server: Session registered: uid=-15
12:12:01 [INFO] gameserver.network.server: Client connected: uid=-15 remote=('192.168.178.2', 56643) UA=Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:147.0) Gecko/20100101 Firefox/147.0 origin=http://192.168.178.30:8000 subprotocol=(none)
12:12:01 [INFO] gameserver.network.auth: Login success: eem (uid=2)
12:12:01 [INFO] gameserver.network.server: Session registered: uid=2
12:12:01 [INFO] gameserver.network.server: Session upgraded: guest=-15 → uid=2
12:12:02 [INFO] gameserver.network.server: Client closed cleanly: uid=2 remote=('192.168.178.2', 56643)
12:12:02 [INFO] gameserver.network.server: Session removed: uid=2
12:12:02 [INFO] websockets.server: connection open
12:12:02 [INFO] gameserver.network.server: Session registered: uid=-16
12:12:02 [INFO] gameserver.network.server: Client connected: uid=-16 remote=('192.168.178.2', 56644) UA=Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:147.0) Gecko/20100101 Firefox/147.0 origin=http://192.168.178.30:8000 subprotocol=(none)
12:12:02 [INFO] gameserver.network.auth: Login success: eem (uid=2)
12:12:02 [INFO] gameserver.network.server: Session registered: uid=2
12:12:02 [INFO] gameserver.network.server: Session upgraded: guest=-16 → uid=2
12:12:04 [INFO] gameserver.network.server: Client closed cleanly: uid=2 remote=('192.168.178.2', 56644)
12:12:04 [INFO] gameserver.network.server: Session removed: uid=2
12:12:04 [INFO] websockets.server: connection open
12:12:04 [INFO] gameserver.network.server: Session registered: uid=-17
12:12:04 [INFO] gameserver.network.server: Client connected: uid=-17 remote=('192.168.178.2', 56645) UA=Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:147.0) Gecko/20100101 Firefox/147.0 origin=http://192.168.178.30:8000 subprotocol=(none)
12:12:04 [INFO] gameserver.network.auth: Login success: eem (uid=2)
12:12:04 [INFO] gameserver.network.server: Session registered: uid=2
12:12:04 [INFO] gameserver.network.server: Session upgraded: guest=-17 → uid=2
12:12:04 [INFO] gameserver.network.server: Client closed cleanly: uid=2 remote=('192.168.178.2', 56645)
12:12:04 [INFO] gameserver.network.server: Session removed: uid=2
12:12:04 [INFO] websockets.server: connection open
12:12:04 [INFO] gameserver.network.server: Session registered: uid=-18
12:12:04 [INFO] gameserver.network.server: Client connected: uid=-18 remote=('192.168.178.2', 56646) UA=Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:147.0) Gecko/20100101 Firefox/147.0 origin=http://192.168.178.30:8000 subprotocol=(none)
12:12:04 [INFO] gameserver.network.auth: Login success: eem (uid=2)
12:12:04 [INFO] gameserver.network.server: Session registered: uid=2
12:12:04 [INFO] gameserver.network.server: Session upgraded: guest=-18 → uid=2
12:12:13 [INFO] gameserver.network.server: Client closed cleanly: uid=2 remote=('192.168.178.2', 56646)
12:12:13 [INFO] gameserver.network.server: Session removed: uid=2
12:12:13 [INFO] websockets.server: connection open
12:12:13 [INFO] gameserver.network.server: Session registered: uid=-19
12:12:13 [INFO] gameserver.network.server: Client connected: uid=-19 remote=('192.168.178.2', 56655) UA=Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:147.0) Gecko/20100101 Firefox/147.0 origin=http://192.168.178.30:8000 subprotocol=(none)
12:12:13 [INFO] gameserver.network.auth: Login success: eem (uid=2)
12:12:13 [INFO] gameserver.network.server: Session registered: uid=2
12:12:13 [INFO] gameserver.network.server: Session upgraded: guest=-19 → uid=2
12:12:16 [INFO] gameserver.network.server: Client closed cleanly: uid=2 remote=('192.168.178.2', 56655)
12:12:16 [INFO] gameserver.network.server: Session removed: uid=2
12:12:16 [INFO] websockets.server: connection open
12:12:16 [INFO] gameserver.network.server: Session registered: uid=-20
12:12:16 [INFO] gameserver.network.server: Client connected: uid=-20 remote=('192.168.178.2', 56664) UA=Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:147.0) Gecko/20100101 Firefox/147.0 origin=http://192.168.178.30:8000 subprotocol=(none)
12:12:16 [INFO] gameserver.network.auth: Login success: eem (uid=2)
12:12:16 [INFO] gameserver.network.server: Session registered: uid=2
12:12:16 [INFO] gameserver.network.server: Session upgraded: guest=-20 → uid=2
12:12:55 [INFO] gameserver.network.server: Client closed cleanly: uid=2 remote=('192.168.178.2', 56664)
12:12:55 [INFO] gameserver.network.server: Session removed: uid=2
12:12:56 [INFO] websockets.server: connection open
12:12:56 [INFO] gameserver.network.server: Session registered: uid=-21
12:12:56 [INFO] gameserver.network.server: Client connected: uid=-21 remote=('192.168.178.2', 56691) UA=Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:147.0) Gecko/20100101 Firefox/147.0 origin=http://192.168.178.30:8000 subprotocol=(none)
12:12:56 [INFO] gameserver.network.auth: Login success: eem (uid=2)
12:12:56 [INFO] gameserver.network.server: Session registered: uid=2
12:12:56 [INFO] gameserver.network.server: Session upgraded: guest=-21 → uid=2
12:12:57 [INFO] gameserver.network.server: Client closed cleanly: uid=2 remote=('192.168.178.2', 56691)
12:12:57 [INFO] gameserver.network.server: Session removed: uid=2
12:12:57 [INFO] websockets.server: connection open
12:12:57 [INFO] gameserver.network.server: Session registered: uid=-22
12:12:57 [INFO] gameserver.network.server: Client connected: uid=-22 remote=('192.168.178.2', 56692) UA=Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:147.0) Gecko/20100101 Firefox/147.0 origin=http://192.168.178.30:8000 subprotocol=(none)
12:12:57 [INFO] gameserver.network.auth: Login success: eem (uid=2)
12:12:57 [INFO] gameserver.network.server: Session registered: uid=2
12:12:57 [INFO] gameserver.network.server: Session upgraded: guest=-22 → uid=2
12:12:58 [INFO] gameserver.network.server: Client closed cleanly: uid=2 remote=('192.168.178.2', 56692)
12:12:58 [INFO] gameserver.network.server: Session removed: uid=2
12:12:59 [INFO] websockets.server: connection open
12:12:59 [INFO] gameserver.network.server: Session registered: uid=-23
12:12:59 [INFO] gameserver.network.server: Client connected: uid=-23 remote=('192.168.178.2', 56701) UA=Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:147.0) Gecko/20100101 Firefox/147.0 origin=http://192.168.178.30:8000 subprotocol=(none)
12:12:59 [INFO] gameserver.network.auth: Login success: eem (uid=2)
12:12:59 [INFO] gameserver.network.server: Session registered: uid=2
12:12:59 [INFO] gameserver.network.server: Session upgraded: guest=-23 → uid=2
12:13:03 [INFO] gameserver.network.server: Client closed cleanly: uid=2 remote=('192.168.178.2', 56701)
12:13:03 [INFO] gameserver.network.server: Session removed: uid=2
12:13:03 [INFO] websockets.server: connection open
12:13:03 [INFO] gameserver.network.server: Session registered: uid=-24
12:13:03 [INFO] gameserver.network.server: Client connected: uid=-24 remote=('192.168.178.2', 56705) UA=Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:147.0) Gecko/20100101 Firefox/147.0 origin=http://192.168.178.30:8000 subprotocol=(none)
12:13:03 [INFO] gameserver.network.auth: Login success: eem (uid=2)
12:13:03 [INFO] gameserver.network.server: Session registered: uid=2
12:13:03 [INFO] gameserver.network.server: Session upgraded: guest=-24 → uid=2
12:13:04 [INFO] gameserver.network.server: Client closed cleanly: uid=2 remote=('192.168.178.2', 56705)
12:13:04 [INFO] gameserver.network.server: Session removed: uid=2
12:13:04 [INFO] websockets.server: connection open
12:13:04 [INFO] gameserver.network.server: Session registered: uid=-25
12:13:04 [INFO] gameserver.network.server: Client connected: uid=-25 remote=('192.168.178.2', 56706) UA=Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:147.0) Gecko/20100101 Firefox/147.0 origin=http://192.168.178.30:8000 subprotocol=(none)
12:13:05 [INFO] gameserver.network.auth: Login success: eem (uid=2)
12:13:05 [INFO] gameserver.network.server: Session registered: uid=2
12:13:05 [INFO] gameserver.network.server: Session upgraded: guest=-25 → uid=2
12:13:05 [INFO] gameserver.network.server: Client closed cleanly: uid=2 remote=('192.168.178.2', 56706)
12:13:05 [INFO] gameserver.network.server: Session removed: uid=2
12:13:05 [INFO] websockets.server: connection open
12:13:05 [INFO] gameserver.network.server: Session registered: uid=-26
12:13:05 [INFO] gameserver.network.server: Client connected: uid=-26 remote=('192.168.178.2', 56707) UA=Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:147.0) Gecko/20100101 Firefox/147.0 origin=http://192.168.178.30:8000 subprotocol=(none)
12:13:05 [INFO] gameserver.network.auth: Login success: eem (uid=2)
12:13:05 [INFO] gameserver.network.server: Session registered: uid=2
12:13:05 [INFO] gameserver.network.server: Session upgraded: guest=-26 → uid=2
12:13:05 [INFO] gameserver.network.server: Client closed cleanly: uid=2 remote=('192.168.178.2', 56707)
12:13:05 [INFO] gameserver.network.server: Session removed: uid=2
12:13:05 [INFO] websockets.server: connection open
12:13:05 [INFO] gameserver.network.server: Session registered: uid=-27
12:13:05 [INFO] gameserver.network.server: Client connected: uid=-27 remote=('192.168.178.2', 56708) UA=Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:147.0) Gecko/20100101 Firefox/147.0 origin=http://192.168.178.30:8000 subprotocol=(none)
12:13:05 [INFO] gameserver.network.auth: Login success: eem (uid=2)
12:13:05 [INFO] gameserver.network.server: Session registered: uid=2
12:13:05 [INFO] gameserver.network.server: Session upgraded: guest=-27 → uid=2
12:13:05 [INFO] gameserver.network.server: Client closed cleanly: uid=2 remote=('192.168.178.2', 56708)
12:13:05 [INFO] gameserver.network.server: Session removed: uid=2
12:13:05 [INFO] websockets.server: connection open
12:13:05 [INFO] gameserver.network.server: Session registered: uid=-28
12:13:05 [INFO] gameserver.network.server: Client connected: uid=-28 remote=('192.168.178.2', 56709) UA=Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:147.0) Gecko/20100101 Firefox/147.0 origin=http://192.168.178.30:8000 subprotocol=(none)
12:13:05 [INFO] gameserver.network.auth: Login success: eem (uid=2)
12:13:05 [INFO] gameserver.network.server: Session registered: uid=2
12:13:05 [INFO] gameserver.network.server: Session upgraded: guest=-28 → uid=2
12:13:06 [INFO] gameserver.network.server: Client closed cleanly: uid=2 remote=('192.168.178.2', 56709)
12:13:06 [INFO] gameserver.network.server: Session removed: uid=2
12:13:06 [INFO] websockets.server: connection open
12:13:06 [INFO] gameserver.network.server: Session registered: uid=-29
12:13:06 [INFO] gameserver.network.server: Client connected: uid=-29 remote=('192.168.178.2', 56710) UA=Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:147.0) Gecko/20100101 Firefox/147.0 origin=http://192.168.178.30:8000 subprotocol=(none)
12:13:06 [INFO] gameserver.network.auth: Login success: eem (uid=2)
12:13:06 [INFO] gameserver.network.server: Session registered: uid=2
12:13:06 [INFO] gameserver.network.server: Session upgraded: guest=-29 → uid=2
12:13:09 [INFO] gameserver.network.server: Client closed cleanly: uid=2 remote=('192.168.178.2', 56710)
12:13:09 [INFO] gameserver.network.server: Session removed: uid=2
12:13:09 [INFO] websockets.server: connection open
12:13:09 [INFO] gameserver.network.server: Session registered: uid=-30
12:13:09 [INFO] gameserver.network.server: Client connected: uid=-30 remote=('192.168.178.2', 56711) UA=Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:147.0) Gecko/20100101 Firefox/147.0 origin=http://192.168.178.30:8000 subprotocol=(none)
12:13:09 [INFO] gameserver.network.auth: Login success: eem (uid=2)
12:13:09 [INFO] gameserver.network.server: Session registered: uid=2
12:13:09 [INFO] gameserver.network.server: Session upgraded: guest=-30 → uid=2
12:13:11 [INFO] gameserver.network.server: Client closed cleanly: uid=2 remote=('192.168.178.2', 56711)
12:13:11 [INFO] gameserver.network.server: Session removed: uid=2
12:13:11 [INFO] websockets.server: connection open
12:13:11 [INFO] gameserver.network.server: Session registered: uid=-31
12:13:11 [INFO] gameserver.network.server: Client connected: uid=-31 remote=('192.168.178.2', 56712) UA=Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:147.0) Gecko/20100101 Firefox/147.0 origin=http://192.168.178.30:8000 subprotocol=(none)
12:13:11 [INFO] gameserver.network.auth: Login success: eem (uid=2)
12:13:11 [INFO] gameserver.network.server: Session registered: uid=2
12:13:11 [INFO] gameserver.network.server: Session upgraded: guest=-31 → uid=2
12:13:16 [INFO] gameserver.network.server: Client closed cleanly: uid=2 remote=('192.168.178.2', 56712)
12:13:16 [INFO] gameserver.network.server: Session removed: uid=2
12:13:16 [INFO] websockets.server: connection open
12:13:16 [INFO] gameserver.network.server: Session registered: uid=-32
12:13:16 [INFO] gameserver.network.server: Client connected: uid=-32 remote=('192.168.178.2', 56718) UA=Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:147.0) Gecko/20100101 Firefox/147.0 origin=http://192.168.178.30:8000 subprotocol=(none)
12:13:16 [INFO] gameserver.network.auth: Login success: eem (uid=2)
12:13:16 [INFO] gameserver.network.server: Session registered: uid=2
12:13:16 [INFO] gameserver.network.server: Session upgraded: guest=-32 → uid=2
12:15:11 [INFO] gameserver.network.server: Client closed cleanly: uid=2 remote=('192.168.178.2', 56718)
12:15:11 [INFO] gameserver.network.server: Session removed: uid=2
12:15:11 [INFO] websockets.server: connection open
12:15:11 [INFO] gameserver.network.server: Session registered: uid=-33
12:15:11 [INFO] gameserver.network.server: Client connected: uid=-33 remote=('192.168.178.2', 56760) UA=Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:147.0) Gecko/20100101 Firefox/147.0 origin=http://192.168.178.30:8000 subprotocol=(none)
12:15:11 [INFO] gameserver.network.auth: Login success: eem (uid=2)
12:15:11 [INFO] gameserver.network.server: Session registered: uid=2
12:15:11 [INFO] gameserver.network.server: Session upgraded: guest=-33 → uid=2
12:15:33 [INFO] gameserver.network.server: Client closed cleanly: uid=2 remote=('192.168.178.2', 56760)
12:15:33 [INFO] gameserver.network.server: Session removed: uid=2
12:15:33 [INFO] websockets.server: connection open
12:15:33 [INFO] gameserver.network.server: Session registered: uid=-34
12:15:33 [INFO] gameserver.network.server: Client connected: uid=-34 remote=('192.168.178.2', 56769) UA=Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:147.0) Gecko/20100101 Firefox/147.0 origin=http://192.168.178.30:8000 subprotocol=(none)
12:15:33 [INFO] gameserver.network.auth: Login success: eem (uid=2)
12:15:33 [INFO] gameserver.network.server: Session registered: uid=2
12:15:33 [INFO] gameserver.network.server: Session upgraded: guest=-34 → uid=2
12:16:21 [INFO] gameserver.network.server: Client closed cleanly: uid=2 remote=('192.168.178.2', 56769)
12:16:21 [INFO] gameserver.network.server: Session removed: uid=2
12:16:21 [INFO] websockets.server: connection open
12:16:21 [INFO] gameserver.network.server: Session registered: uid=-35
12:16:21 [INFO] gameserver.network.server: Client connected: uid=-35 remote=('192.168.178.2', 56825) UA=Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:147.0) Gecko/20100101 Firefox/147.0 origin=http://192.168.178.30:8000 subprotocol=(none)
12:16:21 [INFO] gameserver.network.auth: Login success: eem (uid=2)
12:16:21 [INFO] gameserver.network.server: Session registered: uid=2
12:16:21 [INFO] gameserver.network.server: Session upgraded: guest=-35 → uid=2
12:16:24 [INFO] gameserver.network.server: Client closed cleanly: uid=2 remote=('192.168.178.2', 56825)
12:16:24 [INFO] gameserver.network.server: Session removed: uid=2
12:16:24 [INFO] websockets.server: connection open
12:16:24 [INFO] gameserver.network.server: Session registered: uid=-36
12:16:24 [INFO] gameserver.network.server: Client connected: uid=-36 remote=('192.168.178.2', 56827) UA=Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:147.0) Gecko/20100101 Firefox/147.0 origin=http://192.168.178.30:8000 subprotocol=(none)
12:16:24 [INFO] gameserver.network.auth: Login success: eem (uid=2)
12:16:24 [INFO] gameserver.network.server: Session registered: uid=2
12:16:24 [INFO] gameserver.network.server: Session upgraded: guest=-36 → uid=2
12:18:34 [INFO] gameserver.network.server: Client closed cleanly: uid=2 remote=('192.168.178.2', 56827)
12:18:34 [INFO] gameserver.network.server: Session removed: uid=2
12:18:34 [INFO] websockets.server: connection open
12:18:34 [INFO] gameserver.network.server: Session registered: uid=-37
12:18:34 [INFO] gameserver.network.server: Client connected: uid=-37 remote=('192.168.178.2', 54487) UA=Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:147.0) Gecko/20100101 Firefox/147.0 origin=http://192.168.178.30:8000 subprotocol=(none)
12:18:34 [INFO] gameserver.network.auth: Login success: eem (uid=2)
12:18:34 [INFO] gameserver.network.server: Session registered: uid=2
12:18:34 [INFO] gameserver.network.server: Session upgraded: guest=-37 → uid=2
12:18:37 [INFO] gameserver.network.server: Client closed cleanly: uid=2 remote=('192.168.178.2', 54487)
12:18:37 [INFO] gameserver.network.server: Session removed: uid=2
12:18:37 [INFO] websockets.server: connection open
12:18:37 [INFO] gameserver.network.server: Session registered: uid=-38
12:18:37 [INFO] gameserver.network.server: Client connected: uid=-38 remote=('192.168.178.2', 54488) UA=Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:147.0) Gecko/20100101 Firefox/147.0 origin=http://192.168.178.30:8000 subprotocol=(none)
12:18:37 [INFO] gameserver.network.auth: Login success: eem (uid=2)
12:18:37 [INFO] gameserver.network.server: Session registered: uid=2
12:18:37 [INFO] gameserver.network.server: Session upgraded: guest=-38 → uid=2
12:18:43 [INFO] websockets.server: connection open
12:18:43 [INFO] gameserver.network.server: Session registered: uid=-39
12:18:43 [INFO] gameserver.network.server: Client connected: uid=-39 remote=('192.168.178.25', 61582) UA=Mozilla/5.0 (iPhone; CPU iPhone OS 18_7 like Mac OS X) AppleWebKit/605.1.15 (KHT origin=http://192.168.178.47:8000 subprotocol=(none)
12:18:43 [INFO] gameserver.network.server: Client closed cleanly: uid=-39 remote=('192.168.178.25', 61582)
12:18:43 [INFO] gameserver.network.server: Session removed: uid=-39
12:18:43 [INFO] websockets.server: connection open
12:18:43 [INFO] gameserver.network.server: Session registered: uid=-40
12:18:43 [INFO] gameserver.network.server: Client connected: uid=-40 remote=('192.168.178.25', 61590) UA=Mozilla/5.0 (iPhone; CPU iPhone OS 18_7 like Mac OS X) AppleWebKit/605.1.15 (KHT origin=http://192.168.178.47:8000 subprotocol=(none)
12:18:43 [INFO] gameserver.network.auth: Login success: eem (uid=2)
12:18:43 [INFO] gameserver.network.server: Superseding existing session: uid=2
12:18:43 [INFO] gameserver.network.server: Session registered: uid=2
12:18:43 [INFO] gameserver.network.server: Session upgraded: guest=-40 → uid=2
12:18:43 [INFO] gameserver.network.server: Client disconnected: uid=2 code=1008 reason=Superseded by new connection remote=('192.168.178.2', 54488)
12:18:43 [INFO] gameserver.network.server: Session unregister: uid=2 already taken over by new connection — keeping
12:18:43 [INFO] gameserver.network.server: Session removed: uid=2
12:18:44 [INFO] websockets.server: connection open
12:18:44 [INFO] gameserver.network.server: Session registered: uid=-41
12:18:44 [INFO] gameserver.network.server: Client connected: uid=-41 remote=('192.168.178.2', 54489) UA=Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:147.0) Gecko/20100101 Firefox/147.0 origin=http://192.168.178.30:8000 subprotocol=(none)
12:18:44 [INFO] gameserver.network.auth: Login success: eem (uid=2)
12:18:44 [INFO] gameserver.network.server: Superseding existing session: uid=2
12:18:44 [INFO] gameserver.network.server: Session registered: uid=2
12:18:44 [INFO] gameserver.network.server: Session upgraded: guest=-41 → uid=2
12:18:44 [INFO] gameserver.network.auth: Login success: eem (uid=2)
12:18:44 [INFO] gameserver.network.server: Session registered: uid=2
12:18:44 [INFO] gameserver.network.server: Session upgraded: guest=2 → uid=2
12:18:44 [INFO] gameserver.network.server: Client disconnected: uid=2 code=1008 reason=Superseded by new connection remote=('192.168.178.25', 61590)
12:18:44 [INFO] gameserver.network.server: Session unregister: uid=2 already taken over by new connection — keeping
12:18:44 [INFO] gameserver.network.server: Session removed: uid=2
12:18:53 [INFO] websockets.server: connection open
12:18:53 [INFO] gameserver.network.server: Session registered: uid=-42
12:18:53 [INFO] gameserver.network.server: Client connected: uid=-42 remote=('192.168.178.25', 61594) UA=Mozilla/5.0 (iPhone; CPU iPhone OS 18_7 like Mac OS X) AppleWebKit/605.1.15 (KHT origin=http://192.168.178.47:8000 subprotocol=(none)
12:18:53 [INFO] gameserver.network.server: Client closed cleanly: uid=-42 remote=('192.168.178.25', 61594)
12:18:53 [INFO] gameserver.network.server: Session removed: uid=-42
12:18:53 [INFO] websockets.server: connection open
12:18:53 [INFO] gameserver.network.server: Session registered: uid=-43
12:18:53 [INFO] gameserver.network.server: Client connected: uid=-43 remote=('192.168.178.25', 61602) UA=Mozilla/5.0 (iPhone; CPU iPhone OS 18_7 like Mac OS X) AppleWebKit/605.1.15 (KHT origin=http://192.168.178.47:8000 subprotocol=(none)
12:18:53 [INFO] gameserver.network.auth: Login success: eem (uid=2)
12:18:53 [INFO] gameserver.network.server: Superseding existing session: uid=2
12:18:53 [INFO] gameserver.network.server: Session registered: uid=2
12:18:53 [INFO] gameserver.network.server: Session upgraded: guest=-43 → uid=2
12:18:53 [INFO] gameserver.network.server: Client disconnected: uid=2 code=1008 reason=Superseded by new connection remote=('192.168.178.2', 54489)
12:18:53 [INFO] gameserver.network.server: Session unregister: uid=2 already taken over by new connection — keeping
12:18:53 [INFO] gameserver.network.server: Session removed: uid=2
12:18:54 [INFO] websockets.server: connection open
12:18:54 [INFO] gameserver.network.server: Session registered: uid=-44
12:18:54 [INFO] gameserver.network.server: Client connected: uid=-44 remote=('192.168.178.2', 54496) UA=Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:147.0) Gecko/20100101 Firefox/147.0 origin=http://192.168.178.30:8000 subprotocol=(none)
12:18:54 [INFO] gameserver.network.auth: Login success: eem (uid=2)
12:18:54 [INFO] gameserver.network.server: Superseding existing session: uid=2
12:18:54 [INFO] gameserver.network.server: Session registered: uid=2
12:18:54 [INFO] gameserver.network.server: Session upgraded: guest=-44 → uid=2
12:18:54 [INFO] gameserver.network.auth: Login success: eem (uid=2)
12:18:54 [INFO] gameserver.network.server: Session registered: uid=2
12:18:54 [INFO] gameserver.network.server: Session upgraded: guest=2 → uid=2
12:18:54 [INFO] gameserver.network.server: Client disconnected: uid=2 code=1008 reason=Superseded by new connection remote=('192.168.178.25', 61602)
12:18:54 [INFO] gameserver.network.server: Session unregister: uid=2 already taken over by new connection — keeping
12:18:54 [INFO] gameserver.network.server: Session removed: uid=2
12:18:58 [INFO] websockets.server: connection open
12:18:58 [INFO] gameserver.network.server: Session registered: uid=-45
12:18:58 [INFO] gameserver.network.server: Client connected: uid=-45 remote=('192.168.178.25', 61604) UA=Mozilla/5.0 (iPhone; CPU iPhone OS 18_7 like Mac OS X) AppleWebKit/605.1.15 (KHT origin=http://192.168.178.47:8000 subprotocol=(none)
12:18:58 [INFO] gameserver.network.server: Client closed cleanly: uid=-45 remote=('192.168.178.25', 61604)
12:18:58 [INFO] gameserver.network.server: Session removed: uid=-45
12:18:58 [INFO] websockets.server: connection open
12:18:58 [INFO] gameserver.network.server: Session registered: uid=-46
12:18:58 [INFO] gameserver.network.server: Client connected: uid=-46 remote=('192.168.178.25', 61607) UA=Mozilla/5.0 (iPhone; CPU iPhone OS 18_7 like Mac OS X) AppleWebKit/605.1.15 (KHT origin=http://192.168.178.47:8000 subprotocol=(none)
12:18:58 [INFO] gameserver.network.auth: Login success: eem (uid=2)
12:18:58 [INFO] gameserver.network.server: Superseding existing session: uid=2
12:18:58 [INFO] gameserver.network.server: Session registered: uid=2
12:18:58 [INFO] gameserver.network.server: Session upgraded: guest=-46 → uid=2
12:18:58 [INFO] gameserver.network.server: Client disconnected: uid=2 code=1008 reason=Superseded by new connection remote=('192.168.178.2', 54496)
12:18:58 [INFO] gameserver.network.server: Session unregister: uid=2 already taken over by new connection — keeping
12:18:58 [INFO] gameserver.network.server: Session removed: uid=2
12:19:00 [INFO] websockets.server: connection open
12:19:00 [INFO] gameserver.network.server: Session registered: uid=-47
12:19:00 [INFO] gameserver.network.server: Client connected: uid=-47 remote=('192.168.178.2', 54503) UA=Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:147.0) Gecko/20100101 Firefox/147.0 origin=http://192.168.178.30:8000 subprotocol=(none)
12:19:00 [INFO] gameserver.network.auth: Login success: eem (uid=2)
12:19:00 [INFO] gameserver.network.server: Superseding existing session: uid=2
12:19:00 [INFO] gameserver.network.server: Session registered: uid=2
12:19:00 [INFO] gameserver.network.server: Session upgraded: guest=-47 → uid=2
12:19:00 [INFO] gameserver.network.auth: Login success: eem (uid=2)
12:19:00 [INFO] gameserver.network.server: Session registered: uid=2
12:19:00 [INFO] gameserver.network.server: Session upgraded: guest=2 → uid=2
12:19:00 [INFO] gameserver.network.server: Client disconnected: uid=2 code=1008 reason=Superseded by new connection remote=('192.168.178.25', 61607)
12:19:00 [INFO] gameserver.network.server: Session unregister: uid=2 already taken over by new connection — keeping
12:19:00 [INFO] gameserver.network.server: Session removed: uid=2
14:06:23 [INFO] __main__: Shutdown signal received — stopping …
14:06:23 [INFO] __main__: Shutting down …
14:06:23 [INFO] gameserver.persistence.state_save: Game state saved to state.yaml (2 empires, 0 attacks, 0 battles)
14:06:23 [INFO] websockets.server: server closing
14:06:23 [INFO] gameserver.network.server: Client closed cleanly: uid=2 remote=('192.168.178.2', 54503)
14:06:23 [INFO] gameserver.network.server: Session removed: uid=2
14:06:23 [INFO] websockets.server: server closed
14:06:23 [INFO] gameserver.network.server: WebSocket server stopped
14:06:23 [INFO] __main__:   WebSocket server stopped
14:06:23 [INFO] __main__:   debug dashboard stopped
14:06:23 [INFO] __main__:   database closed
14:06:23 [INFO] __main__:   goodbye
14:06:26 [INFO] __main__: === Game Server starting ===
14:06:26 [INFO] __main__: Loading configuration …
14:06:27 [INFO] __main__:   items:        210 loaded from config
14:06:27 [INFO] __main__:   map:          4 paths, 23 build tiles from config/maps/default.yaml
14:06:27 [INFO] __main__:   ai_templates: 2 entries from config/ai_templates.yaml
14:06:27 [INFO] gameserver.loaders.game_config_loader: Loaded game config from config/game.yaml (31 keys)
14:06:27 [INFO] __main__:   game_config:  loaded
14:06:27 [INFO] __main__: Initializing persistence …
14:06:27 [INFO] gameserver.persistence.database: Database connected: gameserver.db
14:06:27 [INFO] __main__:   database:     connected (gameserver.db)
14:06:27 [INFO] gameserver.persistence.state_load: Restoring state from state.yaml (saved at 2026-02-14T14:06:23, version 1)
14:06:27 [INFO] gameserver.persistence.state_load: Restored 2 empires, 0 attacks, 0 battles
14:06:27 [INFO] __main__:   state:        restored from disk (2 empires, 0 attacks)
14:06:27 [INFO] __main__: Creating services …
14:06:27 [INFO] __main__:   upgrade_provider: 210 items registered
14:06:27 [INFO] __main__:   all services created
14:06:27 [INFO] __main__: Wiring event handlers …
14:06:27 [INFO] __main__:   event handlers registered
14:06:27 [INFO] gameserver.engine.empire_service: Empire registered: uid=100 name='TestImperium'
14:06:27 [INFO] gameserver.engine.empire_service: Empire 100: recalculated effects → {}
14:06:27 [INFO] gameserver.engine.empire_service: Empire registered: uid=2 name='Empire1'
14:06:27 [INFO] gameserver.engine.empire_service: Empire 2: recalculated effects → {'life_offset': 0.011, 'gold_offset': 0.2, 'culture_offset': 0.2, 'culture_modifier': 0.1, 'gold_modifier': 0.1, 'build_speed_modifier': 0.1}
14:06:27 [INFO] __main__: Restored 2 empires from saved state
14:06:27 [INFO] __main__: Starting network servers …
14:06:27 [INFO] gameserver.network.handlers: Registered 32 message handlers: ping, summary_request, item_request, military_request, map_load_request, map_save_request, new_item, new_structure, delete_structure, upgrade_structure, citizen_upgrade, change_citizen, increase_life, new_army, new_attack_request, change_army, new_wave, change_wave, end_siege, battle_register, battle_unregister, battle_next_wave_request, notification_request, user_message, timeline_request, userinfo_request, hall_of_fame_request, preferences_request, change_preferences, auth_request, signup, create_empire
14:06:27 [INFO] websockets.server: server listening on 0.0.0.0:8765
14:06:27 [INFO] gameserver.network.server: WebSocket server listening on ws://0.0.0.0:8765
14:06:27 [INFO] __main__:   WebSocket server listening on 0.0.0.0:8765
14:06:28 [INFO] gameserver.network.rest_api: REST API created with 19 routes
14:06:28 [INFO] __main__:   REST API listening on http://0.0.0.0:8080
INFO:     Started server process [2570]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
14:06:28 [INFO] gameserver.debug.dashboard: Debug dashboard running at http://0.0.0.0:9000/
14:06:28 [INFO] __main__: Starting game loop …
14:06:28 [INFO] __main__:   game loop running (1 s tick)
14:06:28 [INFO] websockets.server: connection open
14:06:28 [INFO] gameserver.network.server: Session registered: uid=-1
14:06:28 [INFO] gameserver.network.server: Client connected: uid=-1 remote=('192.168.178.2', 55401) UA=Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:147.0) Gecko/20100101 Firefox/147.0 origin=http://192.168.178.30:8000 subprotocol=(none)
INFO:     Uvicorn running on http://0.0.0.0:8080 (Press CTRL+C to quit)
14:06:28 [INFO] gameserver.network.auth: Login success: eem (uid=2)
14:06:28 [INFO] gameserver.network.server: Session registered: uid=2
14:06:28 [INFO] gameserver.network.server: Session upgraded: guest=-1 → uid=2
14:06:28 [INFO] gameserver.network.auth: Login success: eem (uid=2)
14:06:28 [INFO] gameserver.network.server: Session registered: uid=2
14:06:28 [INFO] gameserver.network.server: Session upgraded: guest=2 → uid=2
14:06:45 [INFO] gameserver.network.server: Client closed cleanly: uid=2 remote=('192.168.178.2', 55401)
14:06:45 [INFO] gameserver.network.server: Session removed: uid=2
14:07:29 [INFO] gameserver.network.auth: Login success: eem (uid=2)
14:07:29 [INFO] websockets.server: connection open
14:07:29 [INFO] gameserver.network.server: WS authenticated via JWT: uid=2
14:07:29 [INFO] gameserver.network.server: Session registered: uid=2
14:07:29 [INFO] gameserver.network.server: Client connected: uid=2 remote=('192.168.178.2', 59111) UA=Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:147.0) Gecko/20100101 Firefox/147.0 origin=http://192.168.178.30:8000 subprotocol=(none)
14:07:34 [INFO] gameserver.network.handlers: change_citizen request from uid=2
14:07:34 [INFO] gameserver.network.handlers: change_citizen success uid=2: {'merchant': 2, 'scientist': 4, 'artist': 1, 'free': 4}
14:07:35 [INFO] gameserver.network.handlers: change_citizen request from uid=2
14:07:35 [INFO] gameserver.network.handlers: change_citizen success uid=2: {'merchant': 2, 'scientist': 4, 'artist': 0, 'free': 5}
14:07:54 [INFO] gameserver.network.handlers: citizen_upgrade request from uid=2
14:07:54 [INFO] gameserver.network.handlers: citizen_upgrade success uid=2
14:07:55 [INFO] gameserver.network.handlers: citizen_upgrade request from uid=2
14:07:55 [INFO] gameserver.network.handlers: citizen_upgrade failed uid=2: Not enough culture (need 16184.7, have 15643.0)
14:08:21 [INFO] websockets.server: connection open
14:08:21 [INFO] gameserver.network.server: Session registered: uid=-2
14:08:21 [INFO] gameserver.network.server: Client connected: uid=-2 remote=('192.168.178.25', 56023) UA=Mozilla/5.0 (iPhone; CPU iPhone OS 18_7 like Mac OS X) AppleWebKit/605.1.15 (KHT origin=http://192.168.178.47:8000 subprotocol=(none)
14:08:21 [INFO] websockets.server: connection open
14:08:21 [INFO] gameserver.network.server: Session registered: uid=-3
14:08:21 [INFO] gameserver.network.server: Client connected: uid=-3 remote=('192.168.178.25', 56025) UA=Mozilla/5.0 (iPhone; CPU iPhone OS 18_7 like Mac OS X) AppleWebKit/605.1.15 (KHT origin=http://192.168.178.47:8000 subprotocol=(none)
14:08:21 [INFO] gameserver.network.server: Client closed cleanly: uid=-2 remote=('192.168.178.25', 56023)
14:08:21 [INFO] gameserver.network.server: Session removed: uid=-2
14:08:25 [INFO] gameserver.network.auth: Login success: eem (uid=2)
14:08:33 [INFO] gameserver.network.handlers: notification_request from uid=-3 (not yet implemented)
14:08:40 [INFO] gameserver.network.server: Client closed cleanly: uid=-3 remote=('192.168.178.25', 56025)
14:08:40 [INFO] gameserver.network.server: Session removed: uid=-3
14:08:47 [INFO] websockets.server: connection open
14:08:47 [INFO] gameserver.network.server: Session registered: uid=-4
14:08:47 [INFO] gameserver.network.server: Client connected: uid=-4 remote=('192.168.178.25', 56046) UA=Mozilla/5.0 (iPhone; CPU iPhone OS 18_7 like Mac OS X) AppleWebKit/605.1.15 (KHT origin=http://192.168.178.47:8000 subprotocol=(none)
14:08:47 [INFO] websockets.server: connection open
14:08:47 [INFO] gameserver.network.server: Session registered: uid=-5
14:08:47 [INFO] gameserver.network.server: Client connected: uid=-5 remote=('192.168.178.25', 56055) UA=Mozilla/5.0 (iPhone; CPU iPhone OS 18_7 like Mac OS X) AppleWebKit/605.1.15 (KHT origin=http://192.168.178.47:8000 subprotocol=(none)
14:08:47 [INFO] gameserver.network.server: Client closed cleanly: uid=-4 remote=('192.168.178.25', 56046)
14:08:47 [INFO] gameserver.network.server: Session removed: uid=-4
14:08:53 [INFO] gameserver.network.auth: Login success: eem (uid=2)
14:09:21 [INFO] gameserver.network.server: Client closed cleanly: uid=-5 remote=('192.168.178.25', 56055)
14:09:21 [INFO] gameserver.network.server: Session removed: uid=-5
14:12:57 [INFO] __main__: Shutdown signal received — stopping …
14:12:57 [INFO] __main__: Shutting down …
14:12:57 [INFO] gameserver.persistence.state_save: Game state saved to state.yaml (2 empires, 0 attacks, 0 battles)
14:12:57 [INFO] websockets.server: server closing
14:12:57 [INFO] gameserver.network.server: Client closed cleanly: uid=2 remote=('192.168.178.2', 59111)
14:12:57 [INFO] gameserver.network.server: Session removed: uid=2
14:12:57 [INFO] websockets.server: server closed
14:12:57 [INFO] gameserver.network.server: WebSocket server stopped
14:12:57 [INFO] __main__:   WebSocket server stopped
14:12:57 [INFO] __main__:   REST API server stopped
14:12:57 [INFO] __main__:   debug dashboard stopped
14:12:57 [INFO] __main__:   database closed
14:12:57 [INFO] __main__:   goodbye
ERROR:    Traceback (most recent call last):
  File "/home/pi/e3/.venv/lib/python3.9/site-packages/starlette/routing.py", line 701, in lifespan
    await receive()
  File "/home/pi/e3/.venv/lib/python3.9/site-packages/uvicorn/lifespan/on.py", line 137, in receive
    return await self.receive_queue.get()
  File "/usr/lib/python3.9/asyncio/queues.py", line 166, in get
    await getter
asyncio.exceptions.CancelledError

14:12:59 [INFO] __main__: === Game Server starting ===
14:12:59 [INFO] __main__: Loading configuration …
14:12:59 [INFO] __main__:   items:        210 loaded from config
14:12:59 [INFO] __main__:   map:          4 paths, 23 build tiles from config/maps/default.yaml
14:12:59 [INFO] __main__:   ai_templates: 2 entries from config/ai_templates.yaml
14:12:59 [INFO] gameserver.loaders.game_config_loader: Loaded game config from config/game.yaml (31 keys)
14:12:59 [INFO] __main__:   game_config:  loaded
14:12:59 [INFO] __main__: Initializing persistence …
14:12:59 [INFO] gameserver.persistence.database: Database connected: gameserver.db
14:12:59 [INFO] __main__:   database:     connected (gameserver.db)
14:12:59 [INFO] gameserver.persistence.state_load: Restoring state from state2.yaml (saved at 2026-02-11T04:57:57, version 1)
14:12:59 [INFO] gameserver.persistence.state_load: Restored 2 empires, 1 attacks, 0 battles
14:12:59 [INFO] __main__:   state:        restored from disk (2 empires, 1 attacks)
14:12:59 [INFO] __main__: Creating services …
14:12:59 [INFO] __main__:   upgrade_provider: 210 items registered
14:12:59 [INFO] __main__:   all services created
14:12:59 [INFO] __main__: Wiring event handlers …
14:12:59 [INFO] __main__:   event handlers registered
14:12:59 [INFO] gameserver.engine.empire_service: Empire registered: uid=100 name='TestImperium'
14:12:59 [INFO] gameserver.engine.empire_service: Empire 100: recalculated effects → {}
14:12:59 [INFO] gameserver.engine.empire_service: Empire registered: uid=2 name='Empire1'
14:12:59 [INFO] gameserver.engine.empire_service: Empire 2: recalculated effects → {'life_offset': 0.001, 'gold_offset': 0.2, 'culture_offset': 0.2, 'culture_modifier': 0.1, 'gold_modifier': 0.1, 'build_speed_modifier': 0.1}
14:12:59 [INFO] __main__: Restored 2 empires from saved state
14:12:59 [INFO] __main__: Restored 1 attacks from saved state
14:12:59 [INFO] __main__: Starting network servers …
14:12:59 [INFO] gameserver.network.handlers: Registered 32 message handlers: ping, summary_request, item_request, military_request, map_load_request, map_save_request, new_item, new_structure, delete_structure, upgrade_structure, citizen_upgrade, change_citizen, increase_life, new_army, new_attack_request, change_army, new_wave, change_wave, end_siege, battle_register, battle_unregister, battle_next_wave_request, notification_request, user_message, timeline_request, userinfo_request, hall_of_fame_request, preferences_request, change_preferences, auth_request, signup, create_empire
14:12:59 [INFO] websockets.server: server listening on 0.0.0.0:8765
14:12:59 [INFO] gameserver.network.server: WebSocket server listening on ws://0.0.0.0:8765
14:12:59 [INFO] __main__:   WebSocket server listening on 0.0.0.0:8765
14:13:01 [INFO] gameserver.network.rest_api: REST API created with 19 routes
14:13:01 [INFO] __main__:   REST API listening on http://0.0.0.0:8080
INFO:     Started server process [3098]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
14:13:01 [INFO] gameserver.debug.dashboard: Debug dashboard running at http://0.0.0.0:9000/
14:13:01 [INFO] __main__: Starting game loop …
14:13:01 [INFO] __main__:   game loop running (1 s tick)
14:13:01 [INFO] gameserver.engine.attack_service: [STATE] Attack 1: TRAVELLING → IN_SIEGE (attacker=100, defender=2, army=1)
INFO:     Uvicorn running on http://0.0.0.0:8080 (Press CTRL+C to quit)
14:13:01 [INFO] websockets.server: connection open
14:13:01 [INFO] gameserver.network.server: Session registered: uid=-1
14:13:01 [INFO] gameserver.network.server: Client connected: uid=-1 remote=('192.168.178.2', 63136) UA=Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:147.0) Gecko/20100101 Firefox/147.0 origin=http://192.168.178.30:8000 subprotocol=(none)
14:13:01 [INFO] gameserver.network.server: Client closed cleanly: uid=-1 remote=('192.168.178.2', 63136)
14:13:01 [INFO] gameserver.network.server: Session removed: uid=-1
14:13:01 [INFO] gameserver.network.auth: Login success: eem (uid=2)
14:13:01 [INFO] websockets.server: connection open
14:13:01 [INFO] gameserver.network.server: WS authenticated via JWT: uid=2
14:13:01 [INFO] gameserver.network.server: Session registered: uid=2
14:13:01 [INFO] gameserver.network.server: Client connected: uid=2 remote=('192.168.178.2', 63138) UA=Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:147.0) Gecko/20100101 Firefox/147.0 origin=http://192.168.178.30:8000 subprotocol=(none)
14:13:02 [INFO] gameserver.engine.attack_service: [STATE] Attack 1: IN_SIEGE → IN_BATTLE (attacker=100, defender=2, army=1)
14:13:02 [INFO] gameserver.network.handlers: [battle:start_requested] attack_id=1 attacker=100 defender=2 army=1
14:13:02 [INFO] gameserver.network.handlers: [battle:start_requested] SUCCESS: battle 1 created (attacker=100, defender=2)
14:13:02 [INFO] gameserver.engine.battle_service: [battle_loop] Starting battle (bid=1, defender=2, attackers=[100])
14:13:02 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=1 (SWORDMAN) spawned from wave 1 (progress=1/6)
14:13:02 [INFO] gameserver.network.handlers: battle_register: uid=2 registered for attack 1 (phase=in_battle)
14:13:02 [INFO] gameserver.network.handlers: _send_battle_setup: sent to uid=2 (attack_id=1)
14:13:04 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=2 (SWORDMAN) spawned from wave 1 (progress=2/6)
14:13:06 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=3 (SWORDMAN) spawned from wave 1 (progress=3/6)
14:13:08 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=4 (SWORDMAN) spawned from wave 1 (progress=4/6)
14:13:09 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=5 (SWORDMAN) spawned from wave 1 (progress=5/6)
14:13:11 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=6 (SWORDMAN) spawned from wave 1 (progress=6/6)
14:13:16 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=7 (SLAVE) spawned from wave 2 (progress=1/4)
14:13:18 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=8 (SLAVE) spawned from wave 2 (progress=2/4)
14:13:20 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=9 (SLAVE) spawned from wave 2 (progress=3/4)
14:13:22 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=10 (SLAVE) spawned from wave 2 (progress=4/4)
14:13:32 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=1 (SWORDMAN) killed at path_progress=0.00
14:13:32 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=2 (SWORDMAN) killed at path_progress=0.00
14:13:32 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=3 (SWORDMAN) killed at path_progress=0.00
14:13:32 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=4 (SWORDMAN) killed at path_progress=0.00
14:13:32 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=5 (SWORDMAN) killed at path_progress=0.00
14:13:32 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=6 (SWORDMAN) killed at path_progress=0.00
14:13:32 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=7 (SLAVE) killed at path_progress=0.00
14:13:32 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=8 (SLAVE) killed at path_progress=0.00
14:13:32 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=9 (SLAVE) killed at path_progress=0.00
14:13:32 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.00
14:13:32 [INFO] gameserver.engine.battle_service: [FINISH] Battle bid=1 finished (defender won)
14:13:32 [INFO] gameserver.network.handlers: [battle] bid=1 complete: attacker_wins=False
14:13:32 [INFO] gameserver.network.handlers: [battle] bid=1 resource transfer complete
14:13:32 [INFO] gameserver.network.handlers: [battle] marked attack 1 as FINISHED
14:13:37 [WARNING] gameserver.network.handlers: battle_unregister: uid=2 not registered for any attack
14:15:46 [WARNING] gameserver.network.handlers: battle_register: no attack found for uid=2 target=2
14:15:51 [WARNING] gameserver.network.handlers: battle_unregister: uid=2 not registered for any attack
14:15:56 [INFO] gameserver.network.server: Client closed cleanly: uid=2 remote=('192.168.178.2', 63138)
14:15:56 [INFO] gameserver.network.server: Session removed: uid=2
14:15:56 [INFO] websockets.server: connection open
14:15:56 [INFO] gameserver.network.server: WS authenticated via JWT: uid=2
14:15:56 [INFO] gameserver.network.server: Session registered: uid=2
14:15:56 [INFO] gameserver.network.server: Client connected: uid=2 remote=('192.168.178.2', 54908) UA=Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:147.0) Gecko/20100101 Firefox/147.0 origin=http://192.168.178.30:8000 subprotocol=(none)
14:16:06 [INFO] gameserver.network.auth: Login success: eem (uid=2)
14:16:21 [INFO] __main__: Shutdown signal received — stopping …
14:16:22 [INFO] __main__: Shutting down …
14:16:22 [INFO] gameserver.persistence.state_save: Game state saved to state.yaml (2 empires, 0 attacks, 0 battles)
14:16:22 [INFO] websockets.server: server closing
14:16:22 [INFO] gameserver.network.server: Client closed cleanly: uid=2 remote=('192.168.178.2', 54908)
14:16:22 [INFO] gameserver.network.server: Session removed: uid=2
14:16:22 [INFO] websockets.server: server closed
14:16:22 [INFO] gameserver.network.server: WebSocket server stopped
14:16:22 [INFO] __main__:   WebSocket server stopped
14:16:22 [INFO] __main__:   REST API server stopped
14:16:22 [INFO] __main__:   debug dashboard stopped
14:16:22 [INFO] __main__:   database closed
14:16:22 [INFO] __main__:   goodbye
ERROR:    Traceback (most recent call last):
  File "/home/pi/e3/.venv/lib/python3.9/site-packages/starlette/routing.py", line 701, in lifespan
    await receive()
  File "/home/pi/e3/.venv/lib/python3.9/site-packages/uvicorn/lifespan/on.py", line 137, in receive
    return await self.receive_queue.get()
  File "/usr/lib/python3.9/asyncio/queues.py", line 166, in get
    await getter
asyncio.exceptions.CancelledError

14:16:24 [INFO] __main__: === Game Server starting ===
14:16:24 [INFO] __main__: Loading configuration …
14:16:25 [INFO] __main__:   items:        210 loaded from config
14:16:25 [INFO] __main__:   map:          4 paths, 23 build tiles from config/maps/default.yaml
14:16:25 [INFO] __main__:   ai_templates: 2 entries from config/ai_templates.yaml
14:16:25 [INFO] gameserver.loaders.game_config_loader: Loaded game config from config/game.yaml (31 keys)
14:16:25 [INFO] __main__:   game_config:  loaded
14:16:25 [INFO] __main__: Initializing persistence …
14:16:25 [INFO] gameserver.persistence.database: Database connected: gameserver.db
14:16:25 [INFO] __main__:   database:     connected (gameserver.db)
14:16:25 [INFO] gameserver.persistence.state_load: Restoring state from state2.yaml (saved at 2026-02-11T04:57:57, version 1)
14:16:25 [INFO] gameserver.persistence.state_load: Restored 2 empires, 1 attacks, 0 battles
14:16:25 [INFO] __main__:   state:        restored from disk (2 empires, 1 attacks)
14:16:25 [INFO] __main__: Creating services …
14:16:25 [INFO] __main__:   upgrade_provider: 210 items registered
14:16:25 [INFO] __main__:   all services created
14:16:25 [INFO] __main__: Wiring event handlers …
14:16:25 [INFO] __main__:   event handlers registered
14:16:25 [INFO] gameserver.engine.empire_service: Empire registered: uid=100 name='TestImperium'
14:16:25 [INFO] gameserver.engine.empire_service: Empire 100: recalculated effects → {}
14:16:25 [INFO] gameserver.engine.empire_service: Empire registered: uid=2 name='Empire1'
14:16:25 [INFO] gameserver.engine.empire_service: Empire 2: recalculated effects → {'life_offset': 0.001, 'gold_offset': 0.2, 'culture_offset': 0.2, 'culture_modifier': 0.1, 'gold_modifier': 0.1, 'build_speed_modifier': 0.1}
14:16:25 [INFO] __main__: Restored 2 empires from saved state
14:16:25 [INFO] __main__: Restored 1 attacks from saved state
14:16:25 [INFO] __main__: Starting network servers …
14:16:25 [INFO] gameserver.network.handlers: Registered 32 message handlers: ping, summary_request, item_request, military_request, map_load_request, map_save_request, new_item, new_structure, delete_structure, upgrade_structure, citizen_upgrade, change_citizen, increase_life, new_army, new_attack_request, change_army, new_wave, change_wave, end_siege, battle_register, battle_unregister, battle_next_wave_request, notification_request, user_message, timeline_request, userinfo_request, hall_of_fame_request, preferences_request, change_preferences, auth_request, signup, create_empire
14:16:25 [INFO] websockets.server: server listening on 0.0.0.0:8765
14:16:25 [INFO] gameserver.network.server: WebSocket server listening on ws://0.0.0.0:8765
14:16:25 [INFO] __main__:   WebSocket server listening on 0.0.0.0:8765
14:16:26 [INFO] gameserver.network.rest_api: REST API created with 19 routes
14:16:26 [INFO] __main__:   REST API listening on http://0.0.0.0:8080
INFO:     Started server process [3376]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
14:16:26 [INFO] gameserver.debug.dashboard: Debug dashboard running at http://0.0.0.0:9000/
14:16:26 [INFO] __main__: Starting game loop …
14:16:26 [INFO] __main__:   game loop running (1 s tick)
14:16:26 [INFO] gameserver.engine.attack_service: [STATE] Attack 1: TRAVELLING → IN_SIEGE (attacker=100, defender=2, army=1)
14:16:26 [INFO] websockets.server: connection open
14:16:26 [INFO] gameserver.network.server: WS authenticated via JWT: uid=2
14:16:26 [INFO] gameserver.network.server: Session registered: uid=2
14:16:26 [INFO] gameserver.network.server: Client connected: uid=2 remote=('192.168.178.2', 54916) UA=Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:147.0) Gecko/20100101 Firefox/147.0 origin=http://192.168.178.30:8000 subprotocol=(none)
14:16:26 [INFO] websockets.server: connection open
14:16:26 [INFO] gameserver.network.server: Session registered: uid=-1
14:16:26 [INFO] gameserver.network.server: Client connected: uid=-1 remote=('192.168.178.2', 54932) UA=Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:147.0) Gecko/20100101 Firefox/147.0 origin=http://192.168.178.30:8000 subprotocol=(none)
INFO:     Uvicorn running on http://0.0.0.0:8080 (Press CTRL+C to quit)
14:16:26 [INFO] gameserver.network.server: Client disconnected: uid=2 code=CloseCode.ABNORMAL_CLOSURE reason=(none) remote=('192.168.178.2', 54916)
14:16:26 [INFO] gameserver.network.server: Session removed: uid=2
14:16:26 [INFO] gameserver.network.server: Client disconnected: uid=-1 code=CloseCode.ABNORMAL_CLOSURE reason=(none) remote=('192.168.178.2', 54932)
14:16:26 [INFO] gameserver.network.server: Session removed: uid=-1
14:16:26 [INFO] gameserver.network.auth: Login success: eem (uid=2)
14:16:26 [INFO] websockets.server: connection open
14:16:26 [INFO] gameserver.network.server: WS authenticated via JWT: uid=2
14:16:26 [INFO] gameserver.network.server: Session registered: uid=2
14:16:26 [INFO] gameserver.network.server: Client connected: uid=2 remote=('192.168.178.2', 54935) UA=Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:147.0) Gecko/20100101 Firefox/147.0 origin=http://192.168.178.30:8000 subprotocol=(none)
14:16:27 [INFO] gameserver.engine.attack_service: [STATE] Attack 1: IN_SIEGE → IN_BATTLE (attacker=100, defender=2, army=1)
14:16:27 [INFO] gameserver.network.handlers: [battle:start_requested] attack_id=1 attacker=100 defender=2 army=1
14:16:27 [INFO] gameserver.network.handlers: [battle:start_requested] SUCCESS: battle 1 created (attacker=100, defender=2)
14:16:27 [INFO] gameserver.engine.battle_service: [battle_loop] Starting battle (bid=1, defender=2, attackers=[100])
14:16:27 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=1 (SWORDMAN) spawned from wave 1 (progress=1/6)
14:16:27 [INFO] gameserver.network.handlers: battle_register: uid=2 registered for attack 1 (phase=in_battle)
14:16:27 [INFO] gameserver.network.handlers: _send_battle_setup: sent to uid=2 (attack_id=1)
14:16:29 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=2 (SWORDMAN) spawned from wave 1 (progress=2/6)
14:16:31 [ERROR] websockets.server: opening handshake failed
Traceback (most recent call last):
  File "/home/pi/e3/.venv/lib/python3.9/site-packages/websockets/http11.py", line 138, in parse
    request_line = yield from parse_line(read_line)
  File "/home/pi/e3/.venv/lib/python3.9/site-packages/websockets/http11.py", line 309, in parse_line
    line = yield from read_line(MAX_LINE_LENGTH)
  File "/home/pi/e3/.venv/lib/python3.9/site-packages/websockets/streams.py", line 46, in read_line
    raise EOFError(f"stream ends after {p} bytes, before end of line")
EOFError: stream ends after 0 bytes, before end of line

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/pi/e3/.venv/lib/python3.9/site-packages/websockets/server.py", line 545, in parse
    request = yield from Request.parse(
  File "/home/pi/e3/.venv/lib/python3.9/site-packages/websockets/http11.py", line 140, in parse
    raise EOFError("connection closed while reading HTTP request line") from exc
EOFError: connection closed while reading HTTP request line

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/pi/e3/.venv/lib/python3.9/site-packages/websockets/asyncio/server.py", line 356, in conn_handler
    await connection.handshake(
  File "/home/pi/e3/.venv/lib/python3.9/site-packages/websockets/asyncio/server.py", line 207, in handshake
    raise self.protocol.handshake_exc
websockets.exceptions.InvalidMessage: did not receive a valid HTTP request
14:16:31 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=3 (SWORDMAN) spawned from wave 1 (progress=3/6)
14:16:33 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=4 (SWORDMAN) spawned from wave 1 (progress=4/6)
14:16:35 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=5 (SWORDMAN) spawned from wave 1 (progress=5/6)
14:16:37 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=6 (SWORDMAN) spawned from wave 1 (progress=6/6)
14:16:42 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=7 (SLAVE) spawned from wave 2 (progress=1/4)
14:16:44 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=8 (SLAVE) spawned from wave 2 (progress=2/4)
14:16:46 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=9 (SLAVE) spawned from wave 2 (progress=3/4)
14:16:48 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=10 (SLAVE) spawned from wave 2 (progress=4/4)
14:16:57 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=1 (SWORDMAN) killed at path_progress=0.00
14:16:57 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=2 (SWORDMAN) killed at path_progress=0.00
14:16:57 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=3 (SWORDMAN) killed at path_progress=0.00
14:16:57 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=4 (SWORDMAN) killed at path_progress=0.00
14:16:57 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=5 (SWORDMAN) killed at path_progress=0.00
14:16:57 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=6 (SWORDMAN) killed at path_progress=0.00
14:16:57 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=7 (SLAVE) killed at path_progress=0.00
14:16:57 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=8 (SLAVE) killed at path_progress=0.00
14:16:57 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=9 (SLAVE) killed at path_progress=0.00
14:16:57 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.00
14:16:57 [INFO] gameserver.engine.battle_service: [FINISH] Battle bid=1 finished (defender won)
14:16:57 [INFO] gameserver.network.handlers: [battle] bid=1 complete: attacker_wins=False
14:16:57 [INFO] gameserver.network.handlers: [battle] bid=1 resource transfer complete
14:16:57 [INFO] gameserver.network.handlers: [battle] marked attack 1 as FINISHED
14:18:17 [WARNING] gameserver.network.handlers: battle_unregister: uid=2 not registered for any attack
14:18:18 [INFO] gameserver.network.server: Client closed cleanly: uid=2 remote=('192.168.178.2', 54935)
14:18:18 [INFO] gameserver.network.server: Session removed: uid=2
14:18:18 [INFO] websockets.server: connection open
14:18:18 [INFO] gameserver.network.server: WS authenticated via JWT: uid=2
14:18:18 [INFO] gameserver.network.server: Session registered: uid=2
14:18:18 [INFO] gameserver.network.server: Client connected: uid=2 remote=('192.168.178.2', 54780) UA=Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:147.0) Gecko/20100101 Firefox/147.0 origin=http://192.168.178.30:8000 subprotocol=(none)
14:19:11 [INFO] gameserver.network.auth: Login success: eem (uid=2)
14:19:17 [INFO] __main__: Shutdown signal received — stopping …
14:19:17 [INFO] __main__: Shutting down …
14:19:18 [INFO] gameserver.persistence.state_save: Game state saved to state.yaml (2 empires, 0 attacks, 0 battles)
14:19:18 [INFO] websockets.server: server closing
14:19:18 [INFO] gameserver.network.server: Client closed cleanly: uid=2 remote=('192.168.178.2', 54780)
14:19:18 [INFO] gameserver.network.server: Session removed: uid=2
14:19:18 [INFO] websockets.server: server closed
14:19:18 [INFO] gameserver.network.server: WebSocket server stopped
14:19:18 [INFO] __main__:   WebSocket server stopped
14:19:18 [INFO] __main__:   REST API server stopped
14:19:18 [INFO] __main__:   debug dashboard stopped
14:19:18 [INFO] __main__:   database closed
14:19:18 [INFO] __main__:   goodbye
ERROR:    Traceback (most recent call last):
  File "/home/pi/e3/.venv/lib/python3.9/site-packages/starlette/routing.py", line 701, in lifespan
    await receive()
  File "/home/pi/e3/.venv/lib/python3.9/site-packages/uvicorn/lifespan/on.py", line 137, in receive
    return await self.receive_queue.get()
  File "/usr/lib/python3.9/asyncio/queues.py", line 166, in get
    await getter
asyncio.exceptions.CancelledError

14:19:19 [INFO] __main__: === Game Server starting ===
14:19:19 [INFO] __main__: Loading configuration …
14:19:20 [INFO] __main__:   items:        210 loaded from config
14:19:20 [INFO] __main__:   map:          4 paths, 23 build tiles from config/maps/default.yaml
14:19:20 [INFO] __main__:   ai_templates: 2 entries from config/ai_templates.yaml
14:19:20 [INFO] gameserver.loaders.game_config_loader: Loaded game config from config/game.yaml (31 keys)
14:19:20 [INFO] __main__:   game_config:  loaded
14:19:20 [INFO] __main__: Initializing persistence …
14:19:20 [INFO] gameserver.persistence.database: Database connected: gameserver.db
14:19:20 [INFO] __main__:   database:     connected (gameserver.db)
14:19:20 [INFO] gameserver.persistence.state_load: Restoring state from state2.yaml (saved at 2026-02-11T04:57:57, version 1)
14:19:20 [INFO] gameserver.persistence.state_load: Restored 2 empires, 1 attacks, 0 battles
14:19:20 [INFO] __main__:   state:        restored from disk (2 empires, 1 attacks)
14:19:20 [INFO] __main__: Creating services …
14:19:20 [INFO] __main__:   upgrade_provider: 210 items registered
14:19:20 [INFO] __main__:   all services created
14:19:20 [INFO] __main__: Wiring event handlers …
14:19:20 [INFO] __main__:   event handlers registered
14:19:20 [INFO] gameserver.engine.empire_service: Empire registered: uid=100 name='TestImperium'
14:19:20 [INFO] gameserver.engine.empire_service: Empire 100: recalculated effects → {}
14:19:20 [INFO] gameserver.engine.empire_service: Empire registered: uid=2 name='Empire1'
14:19:20 [INFO] gameserver.engine.empire_service: Empire 2: recalculated effects → {'life_offset': 0.001, 'gold_offset': 0.2, 'culture_offset': 0.2, 'culture_modifier': 0.1, 'gold_modifier': 0.1, 'build_speed_modifier': 0.1}
14:19:20 [INFO] __main__: Restored 2 empires from saved state
14:19:20 [INFO] __main__: Restored 1 attacks from saved state
14:19:20 [INFO] __main__: Starting network servers …
14:19:20 [INFO] gameserver.network.handlers: Registered 32 message handlers: ping, summary_request, item_request, military_request, map_load_request, map_save_request, new_item, new_structure, delete_structure, upgrade_structure, citizen_upgrade, change_citizen, increase_life, new_army, new_attack_request, change_army, new_wave, change_wave, end_siege, battle_register, battle_unregister, battle_next_wave_request, notification_request, user_message, timeline_request, userinfo_request, hall_of_fame_request, preferences_request, change_preferences, auth_request, signup, create_empire
14:19:20 [INFO] websockets.server: server listening on 0.0.0.0:8765
14:19:20 [INFO] gameserver.network.server: WebSocket server listening on ws://0.0.0.0:8765
14:19:20 [INFO] __main__:   WebSocket server listening on 0.0.0.0:8765
14:19:21 [INFO] gameserver.network.rest_api: REST API created with 19 routes
14:19:21 [INFO] __main__:   REST API listening on http://0.0.0.0:8080
INFO:     Started server process [3606]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
14:19:21 [INFO] gameserver.debug.dashboard: Debug dashboard running at http://0.0.0.0:9000/
14:19:21 [INFO] __main__: Starting game loop …
14:19:21 [INFO] __main__:   game loop running (1 s tick)
14:19:21 [INFO] gameserver.engine.attack_service: [STATE] Attack 1: TRAVELLING → IN_SIEGE (attacker=100, defender=2, army=1)
14:19:21 [INFO] websockets.server: connection open
14:19:21 [INFO] gameserver.network.server: WS authenticated via JWT: uid=2
14:19:21 [INFO] gameserver.network.server: Session registered: uid=2
14:19:21 [INFO] gameserver.network.server: Client connected: uid=2 remote=('192.168.178.2', 54804) UA=Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:147.0) Gecko/20100101 Firefox/147.0 origin=http://192.168.178.30:8000 subprotocol=(none)
INFO:     Uvicorn running on http://0.0.0.0:8080 (Press CTRL+C to quit)
14:19:21 [INFO] gameserver.network.auth: Login success: eem (uid=2)
14:19:21 [INFO] gameserver.network.server: Session registered: uid=2
14:19:21 [INFO] gameserver.network.server: Session upgraded: guest=2 → uid=2
14:19:22 [INFO] gameserver.engine.attack_service: [STATE] Attack 1: IN_SIEGE → IN_BATTLE (attacker=100, defender=2, army=1)
14:19:22 [INFO] gameserver.network.handlers: [battle:start_requested] attack_id=1 attacker=100 defender=2 army=1
14:19:22 [INFO] gameserver.network.handlers: [battle:start_requested] SUCCESS: battle 1 created (attacker=100, defender=2)
14:19:22 [INFO] gameserver.engine.battle_service: [battle_loop] Starting battle (bid=1, defender=2, attackers=[100])
14:19:22 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=1 (SWORDMAN) spawned from wave 1 (progress=1/6)
14:19:22 [INFO] gameserver.network.handlers: battle_register: uid=2 registered for attack 1 (phase=in_battle)
14:19:22 [INFO] gameserver.network.handlers: _send_battle_setup: sent to uid=2 (attack_id=1)
14:19:24 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=2 (SWORDMAN) spawned from wave 1 (progress=2/6)
14:19:25 [ERROR] websockets.server: opening handshake failed
Traceback (most recent call last):
  File "/home/pi/e3/.venv/lib/python3.9/site-packages/websockets/http11.py", line 138, in parse
    request_line = yield from parse_line(read_line)
  File "/home/pi/e3/.venv/lib/python3.9/site-packages/websockets/http11.py", line 309, in parse_line
    line = yield from read_line(MAX_LINE_LENGTH)
  File "/home/pi/e3/.venv/lib/python3.9/site-packages/websockets/streams.py", line 46, in read_line
    raise EOFError(f"stream ends after {p} bytes, before end of line")
EOFError: stream ends after 0 bytes, before end of line

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/pi/e3/.venv/lib/python3.9/site-packages/websockets/server.py", line 545, in parse
    request = yield from Request.parse(
  File "/home/pi/e3/.venv/lib/python3.9/site-packages/websockets/http11.py", line 140, in parse
    raise EOFError("connection closed while reading HTTP request line") from exc
EOFError: connection closed while reading HTTP request line

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/pi/e3/.venv/lib/python3.9/site-packages/websockets/asyncio/server.py", line 356, in conn_handler
    await connection.handshake(
  File "/home/pi/e3/.venv/lib/python3.9/site-packages/websockets/asyncio/server.py", line 207, in handshake
    raise self.protocol.handshake_exc
websockets.exceptions.InvalidMessage: did not receive a valid HTTP request
14:19:26 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=3 (SWORDMAN) spawned from wave 1 (progress=3/6)
14:19:28 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=4 (SWORDMAN) spawned from wave 1 (progress=4/6)
14:19:30 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=5 (SWORDMAN) spawned from wave 1 (progress=5/6)
14:19:32 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=6 (SWORDMAN) spawned from wave 1 (progress=6/6)
14:19:37 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=7 (SLAVE) spawned from wave 2 (progress=1/4)
14:19:39 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=8 (SLAVE) spawned from wave 2 (progress=2/4)
14:19:41 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=9 (SLAVE) spawned from wave 2 (progress=3/4)
14:19:42 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=10 (SLAVE) spawned from wave 2 (progress=4/4)
14:19:52 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=1 (SWORDMAN) killed at path_progress=0.00
14:19:52 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=2 (SWORDMAN) killed at path_progress=0.00
14:19:52 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=3 (SWORDMAN) killed at path_progress=0.00
14:19:52 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=4 (SWORDMAN) killed at path_progress=0.00
14:19:52 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=5 (SWORDMAN) killed at path_progress=0.00
14:19:52 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=6 (SWORDMAN) killed at path_progress=0.00
14:19:52 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=7 (SLAVE) killed at path_progress=0.00
14:19:52 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=8 (SLAVE) killed at path_progress=0.00
14:19:52 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=9 (SLAVE) killed at path_progress=0.00
14:19:52 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.00
14:19:52 [INFO] gameserver.engine.battle_service: [FINISH] Battle bid=1 finished (defender won)
14:19:52 [INFO] gameserver.network.handlers: [battle] bid=1 complete: attacker_wins=False
14:19:52 [INFO] gameserver.network.handlers: [battle] bid=1 resource transfer complete
14:19:52 [INFO] gameserver.network.handlers: [battle] marked attack 1 as FINISHED
14:19:54 [WARNING] gameserver.network.handlers: battle_unregister: uid=2 not registered for any attack
14:48:08 [INFO] gameserver.network.server: Client closed cleanly: uid=2 remote=('192.168.178.2', 54804)
14:48:08 [INFO] gameserver.network.server: Session removed: uid=2
14:48:12 [INFO] gameserver.network.auth: Login success: eem (uid=2)
14:49:21 [INFO] __main__: Shutdown signal received — stopping …
14:49:22 [INFO] __main__: Shutting down …
14:49:22 [INFO] gameserver.persistence.state_save: Game state saved to state.yaml (2 empires, 0 attacks, 0 battles)
14:49:22 [INFO] websockets.server: server closing
14:49:22 [INFO] websockets.server: server closed
14:49:22 [INFO] gameserver.network.server: WebSocket server stopped
14:49:22 [INFO] __main__:   WebSocket server stopped
14:49:22 [INFO] __main__:   REST API server stopped
14:49:22 [INFO] __main__:   debug dashboard stopped
14:49:22 [INFO] __main__:   database closed
14:49:22 [INFO] __main__:   goodbye
INFO:     Shutting down
ERROR:    Traceback (most recent call last):
  File "/home/pi/e3/.venv/lib/python3.9/site-packages/starlette/routing.py", line 701, in lifespan
    await receive()
  File "/home/pi/e3/.venv/lib/python3.9/site-packages/uvicorn/lifespan/on.py", line 137, in receive
    return await self.receive_queue.get()
  File "/usr/lib/python3.9/asyncio/queues.py", line 166, in get
    await getter
asyncio.exceptions.CancelledError

14:49:23 [INFO] __main__: === Game Server starting ===
14:49:23 [INFO] __main__: Loading configuration …
14:49:24 [INFO] __main__:   items:        210 loaded from config
14:49:24 [INFO] __main__:   map:          4 paths, 23 build tiles from config/maps/default.yaml
14:49:24 [INFO] __main__:   ai_templates: 2 entries from config/ai_templates.yaml
14:49:24 [INFO] gameserver.loaders.game_config_loader: Loaded game config from config/game.yaml (31 keys)
14:49:24 [INFO] __main__:   game_config:  loaded
14:49:24 [INFO] __main__: Initializing persistence …
14:49:24 [INFO] gameserver.persistence.database: Database connected: gameserver.db
14:49:24 [INFO] __main__:   database:     connected (gameserver.db)
14:49:24 [INFO] gameserver.persistence.state_load: Restoring state from state2.yaml (saved at 2026-02-11T04:57:57, version 1)
14:49:24 [INFO] gameserver.persistence.state_load: Restored 2 empires, 1 attacks, 0 battles
14:49:24 [INFO] __main__:   state:        restored from disk (2 empires, 1 attacks)
14:49:24 [INFO] __main__: Creating services …
14:49:24 [INFO] __main__:   upgrade_provider: 210 items registered
14:49:24 [INFO] __main__:   all services created
14:49:24 [INFO] __main__: Wiring event handlers …
14:49:24 [INFO] __main__:   event handlers registered
14:49:24 [INFO] gameserver.engine.empire_service: Empire registered: uid=100 name='TestImperium'
14:49:24 [INFO] gameserver.engine.empire_service: Empire 100: recalculated effects → {}
14:49:24 [INFO] gameserver.engine.empire_service: Empire registered: uid=2 name='Empire1'
14:49:24 [INFO] gameserver.engine.empire_service: Empire 2: recalculated effects → {'life_offset': 0.001, 'gold_offset': 0.2, 'culture_offset': 0.2, 'culture_modifier': 0.1, 'gold_modifier': 0.1, 'build_speed_modifier': 0.1}
14:49:24 [INFO] __main__: Restored 2 empires from saved state
14:49:24 [INFO] __main__: Restored 1 attacks from saved state
14:49:24 [INFO] __main__: Starting network servers …
14:49:24 [INFO] gameserver.network.handlers: Registered 32 message handlers: ping, summary_request, item_request, military_request, map_load_request, map_save_request, new_item, new_structure, delete_structure, upgrade_structure, citizen_upgrade, change_citizen, increase_life, new_army, new_attack_request, change_army, new_wave, change_wave, end_siege, battle_register, battle_unregister, battle_next_wave_request, notification_request, user_message, timeline_request, userinfo_request, hall_of_fame_request, preferences_request, change_preferences, auth_request, signup, create_empire
14:49:24 [INFO] websockets.server: server listening on 0.0.0.0:8765
14:49:24 [INFO] gameserver.network.server: WebSocket server listening on ws://0.0.0.0:8765
14:49:24 [INFO] __main__:   WebSocket server listening on 0.0.0.0:8765
14:49:25 [INFO] gameserver.network.rest_api: REST API created with 19 routes
14:49:25 [INFO] __main__:   REST API listening on http://0.0.0.0:8080
INFO:     Started server process [4444]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
14:49:25 [INFO] gameserver.debug.dashboard: Debug dashboard running at http://0.0.0.0:9000/
14:49:25 [INFO] __main__: Starting game loop …
14:49:25 [INFO] __main__:   game loop running (1 s tick)
14:49:25 [INFO] gameserver.engine.attack_service: [STATE] Attack 1: TRAVELLING → IN_SIEGE (attacker=100, defender=2, army=1)
INFO:     Uvicorn running on http://0.0.0.0:8080 (Press CTRL+C to quit)
14:49:26 [INFO] gameserver.network.auth: Login success: eem (uid=2)
14:49:26 [INFO] gameserver.network.auth: Login success: eem (uid=2)
14:49:26 [INFO] gameserver.engine.attack_service: [STATE] Attack 1: IN_SIEGE → IN_BATTLE (attacker=100, defender=2, army=1)
14:49:26 [INFO] gameserver.network.handlers: [battle:start_requested] attack_id=1 attacker=100 defender=2 army=1
14:49:26 [INFO] gameserver.network.handlers: [battle:start_requested] SUCCESS: battle 1 created (attacker=100, defender=2)
14:49:26 [INFO] gameserver.engine.battle_service: [battle_loop] Starting battle (bid=1, defender=2, attackers=[100])
14:49:26 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=1 (SWORDMAN) spawned from wave 1 (progress=1/6)
14:49:28 [INFO] websockets.server: connection open
14:49:28 [INFO] gameserver.network.server: WS authenticated via JWT: uid=2
14:49:28 [INFO] gameserver.network.server: Session registered: uid=2
14:49:28 [INFO] gameserver.network.server: Client connected: uid=2 remote=('192.168.178.2', 58062) UA=Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:147.0) Gecko/20100101 Firefox/147.0 origin=http://192.168.178.30:8000 subprotocol=(none)
14:49:28 [INFO] gameserver.network.handlers: battle_register: uid=2 registered for attack 1 (phase=in_battle)
14:49:28 [INFO] gameserver.network.handlers: _send_battle_setup: sent to uid=2 (attack_id=1)
14:49:28 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=2 (SWORDMAN) spawned from wave 1 (progress=2/6)
14:49:30 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=3 (SWORDMAN) spawned from wave 1 (progress=3/6)
14:49:32 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=4 (SWORDMAN) spawned from wave 1 (progress=4/6)
14:49:34 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=5 (SWORDMAN) spawned from wave 1 (progress=5/6)
14:49:36 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=6 (SWORDMAN) spawned from wave 1 (progress=6/6)
14:49:41 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=7 (SLAVE) spawned from wave 2 (progress=1/4)
14:49:43 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=8 (SLAVE) spawned from wave 2 (progress=2/4)
14:49:45 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=9 (SLAVE) spawned from wave 2 (progress=3/4)
14:49:47 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=10 (SLAVE) spawned from wave 2 (progress=4/4)
14:49:56 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=1 (SWORDMAN) killed at path_progress=0.00
14:49:56 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=2 (SWORDMAN) killed at path_progress=0.00
14:49:56 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=3 (SWORDMAN) killed at path_progress=0.00
14:49:56 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=4 (SWORDMAN) killed at path_progress=0.00
14:49:56 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=5 (SWORDMAN) killed at path_progress=0.00
14:49:56 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=6 (SWORDMAN) killed at path_progress=0.00
14:49:56 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=7 (SLAVE) killed at path_progress=0.00
14:49:56 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=8 (SLAVE) killed at path_progress=0.00
14:49:56 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=9 (SLAVE) killed at path_progress=0.00
14:49:56 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.00
14:49:56 [INFO] gameserver.engine.battle_service: [FINISH] Battle bid=1 finished (defender won)
14:49:56 [INFO] gameserver.network.handlers: [battle] bid=1 complete: attacker_wins=False
14:49:56 [INFO] gameserver.network.handlers: [battle] bid=1 resource transfer complete
14:49:56 [INFO] gameserver.network.handlers: [battle] marked attack 1 as FINISHED
14:50:19 [WARNING] gameserver.network.handlers: battle_unregister: uid=2 not registered for any attack
14:50:19 [INFO] gameserver.network.server: Client closed cleanly: uid=2 remote=('192.168.178.2', 58062)
14:50:19 [INFO] gameserver.network.server: Session removed: uid=2
15:06:43 [INFO] gameserver.network.auth: Login success: eem (uid=2)
15:17:36 [INFO] websockets.server: connection open
15:17:36 [INFO] gameserver.network.server: WS authenticated via JWT: uid=2
15:17:36 [INFO] gameserver.network.server: Session registered: uid=2
15:17:36 [INFO] gameserver.network.server: Client connected: uid=2 remote=('192.168.178.25', 56108) UA=Mozilla/5.0 (iPhone; CPU iPhone OS 18_7 like Mac OS X) AppleWebKit/605.1.15 (KHT origin=http://192.168.178.47:8000 subprotocol=(none)
15:18:01 [INFO] gameserver.network.server: Client closed cleanly: uid=2 remote=('192.168.178.25', 56108)
15:18:01 [INFO] gameserver.network.server: Session removed: uid=2
15:18:09 [INFO] gameserver.network.handlers: citizen_upgrade request from uid=2
15:18:09 [INFO] gameserver.network.handlers: citizen_upgrade success uid=2
15:18:10 [INFO] gameserver.network.handlers: citizen_upgrade request from uid=2
15:18:10 [INFO] gameserver.network.handlers: citizen_upgrade failed uid=2: Not enough culture (need 10659.9, have 9027.5)
15:56:25 [INFO] __main__: Shutdown signal received — stopping …
15:56:25 [INFO] __main__: Shutting down …
15:56:25 [INFO] gameserver.persistence.state_save: Game state saved to state.yaml (2 empires, 0 attacks, 0 battles)
15:56:25 [INFO] websockets.server: server closing
15:56:25 [INFO] websockets.server: server closed
15:56:25 [INFO] gameserver.network.server: WebSocket server stopped
15:56:25 [INFO] __main__:   WebSocket server stopped
15:56:25 [INFO] __main__:   REST API server stopped
15:56:25 [INFO] __main__:   debug dashboard stopped
15:56:25 [INFO] __main__:   database closed
15:56:25 [INFO] __main__:   goodbye
ERROR:    Traceback (most recent call last):
  File "/home/pi/e3/.venv/lib/python3.9/site-packages/starlette/routing.py", line 701, in lifespan
    await receive()
  File "/home/pi/e3/.venv/lib/python3.9/site-packages/uvicorn/lifespan/on.py", line 137, in receive
    return await self.receive_queue.get()
  File "/usr/lib/python3.9/asyncio/queues.py", line 166, in get
    await getter
asyncio.exceptions.CancelledError

15:56:27 [INFO] __main__: === Game Server starting ===
15:56:27 [INFO] __main__: Loading configuration …
15:56:27 [INFO] __main__:   items:        210 loaded from config
15:56:27 [INFO] __main__:   map:          4 paths, 23 build tiles from config/maps/default.yaml
15:56:27 [INFO] __main__:   ai_templates: 2 entries from config/ai_templates.yaml
15:56:27 [INFO] gameserver.loaders.game_config_loader: Loaded game config from config/game.yaml (31 keys)
15:56:27 [INFO] __main__:   game_config:  loaded
15:56:27 [INFO] __main__: Initializing persistence …
15:56:27 [INFO] gameserver.persistence.database: Database connected: gameserver.db
15:56:27 [INFO] __main__:   database:     connected (gameserver.db)
15:56:27 [INFO] gameserver.persistence.state_load: Restoring state from state2.yaml (saved at 2026-02-11T04:57:57, version 1)
15:56:27 [INFO] gameserver.persistence.state_load: Restored 2 empires, 1 attacks, 0 battles
15:56:27 [INFO] __main__:   state:        restored from disk (2 empires, 1 attacks)
15:56:27 [INFO] __main__: Creating services …
15:56:27 [INFO] __main__:   upgrade_provider: 210 items registered
15:56:27 [INFO] __main__:   all services created
15:56:27 [INFO] __main__: Wiring event handlers …
15:56:27 [INFO] __main__:   event handlers registered
15:56:27 [INFO] gameserver.engine.empire_service: Empire registered: uid=100 name='TestImperium'
15:56:27 [INFO] gameserver.engine.empire_service: Empire 100: recalculated effects → {}
15:56:27 [INFO] gameserver.engine.empire_service: Empire registered: uid=2 name='Empire1'
15:56:27 [INFO] gameserver.engine.empire_service: Empire 2: recalculated effects → {'life_offset': 0.001, 'gold_offset': 0.2, 'culture_offset': 0.2, 'culture_modifier': 0.1, 'gold_modifier': 0.1, 'build_speed_modifier': 0.1}
15:56:27 [INFO] __main__: Restored 2 empires from saved state
15:56:27 [INFO] __main__: Restored 1 attacks from saved state
15:56:27 [INFO] __main__: Starting network servers …
15:56:27 [INFO] gameserver.network.handlers: Registered 32 message handlers: ping, summary_request, item_request, military_request, map_load_request, map_save_request, new_item, new_structure, delete_structure, upgrade_structure, citizen_upgrade, change_citizen, increase_life, new_army, new_attack_request, change_army, new_wave, change_wave, end_siege, battle_register, battle_unregister, battle_next_wave_request, notification_request, user_message, timeline_request, userinfo_request, hall_of_fame_request, preferences_request, change_preferences, auth_request, signup, create_empire
15:56:27 [INFO] websockets.server: server listening on 0.0.0.0:8765
15:56:27 [INFO] gameserver.network.server: WebSocket server listening on ws://0.0.0.0:8765
15:56:27 [INFO] __main__:   WebSocket server listening on 0.0.0.0:8765
15:56:29 [INFO] gameserver.network.rest_api: REST API created with 19 routes
15:56:29 [INFO] __main__:   REST API listening on http://0.0.0.0:8080
INFO:     Started server process [6139]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
15:56:29 [INFO] gameserver.debug.dashboard: Debug dashboard running at http://0.0.0.0:9000/
15:56:29 [INFO] __main__: Starting game loop …
15:56:29 [INFO] __main__:   game loop running (1 s tick)
15:56:29 [INFO] gameserver.engine.attack_service: [STATE] Attack 1: TRAVELLING → IN_SIEGE (attacker=100, defender=2, army=1)
INFO:     Uvicorn running on http://0.0.0.0:8080 (Press CTRL+C to quit)
15:56:29 [INFO] gameserver.network.auth: Login success: eem (uid=2)
15:56:30 [INFO] gameserver.engine.attack_service: [STATE] Attack 1: IN_SIEGE → IN_BATTLE (attacker=100, defender=2, army=1)
15:56:30 [INFO] gameserver.network.handlers: [battle:start_requested] attack_id=1 attacker=100 defender=2 army=1
15:56:30 [INFO] gameserver.network.handlers: [battle:start_requested] SUCCESS: battle 1 created (attacker=100, defender=2)
15:56:30 [INFO] gameserver.engine.battle_service: [battle_loop] Starting battle (bid=1, defender=2, attackers=[100])
15:56:30 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=1 (SWORDMAN) spawned from wave 1 (progress=1/6)
15:56:32 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=2 (SWORDMAN) spawned from wave 1 (progress=2/6)
15:56:33 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=3 (SWORDMAN) spawned from wave 1 (progress=3/6)
15:56:35 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=4 (SWORDMAN) spawned from wave 1 (progress=4/6)
15:56:37 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=5 (SWORDMAN) spawned from wave 1 (progress=5/6)
15:56:39 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=6 (SWORDMAN) spawned from wave 1 (progress=6/6)
15:56:44 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=7 (SLAVE) spawned from wave 2 (progress=1/4)
15:56:46 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=8 (SLAVE) spawned from wave 2 (progress=2/4)
15:56:48 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=9 (SLAVE) spawned from wave 2 (progress=3/4)
15:56:50 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=10 (SLAVE) spawned from wave 2 (progress=4/4)
15:57:00 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=1 (SWORDMAN) killed at path_progress=0.00
15:57:00 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=2 (SWORDMAN) killed at path_progress=0.00
15:57:00 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=3 (SWORDMAN) killed at path_progress=0.00
15:57:00 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=4 (SWORDMAN) killed at path_progress=0.00
15:57:00 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=5 (SWORDMAN) killed at path_progress=0.00
15:57:00 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=6 (SWORDMAN) killed at path_progress=0.00
15:57:00 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=7 (SLAVE) killed at path_progress=0.00
15:57:00 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=8 (SLAVE) killed at path_progress=0.00
15:57:00 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=9 (SLAVE) killed at path_progress=0.00
15:57:00 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.00
15:57:00 [INFO] gameserver.engine.battle_service: [FINISH] Battle bid=1 finished (defender won)
15:57:00 [INFO] gameserver.network.handlers: [battle] bid=1 complete: attacker_wins=False
15:57:00 [INFO] gameserver.network.handlers: [battle] bid=1 resource transfer complete
15:57:00 [INFO] gameserver.network.handlers: [battle] marked attack 1 as FINISHED
15:58:26 [INFO] __main__: Shutdown signal received — stopping …
15:58:27 [INFO] __main__: Shutting down …
15:58:27 [INFO] gameserver.persistence.state_save: Game state saved to state.yaml (2 empires, 0 attacks, 0 battles)
15:58:27 [INFO] websockets.server: server closing
15:58:27 [INFO] websockets.server: server closed
15:58:27 [INFO] gameserver.network.server: WebSocket server stopped
15:58:27 [INFO] __main__:   WebSocket server stopped
15:58:27 [INFO] __main__:   REST API server stopped
15:58:27 [INFO] __main__:   debug dashboard stopped
15:58:27 [INFO] __main__:   database closed
15:58:27 [INFO] __main__:   goodbye
ERROR:    Traceback (most recent call last):
  File "/home/pi/e3/.venv/lib/python3.9/site-packages/starlette/routing.py", line 701, in lifespan
    await receive()
  File "/home/pi/e3/.venv/lib/python3.9/site-packages/uvicorn/lifespan/on.py", line 137, in receive
    return await self.receive_queue.get()
  File "/usr/lib/python3.9/asyncio/queues.py", line 166, in get
    await getter
asyncio.exceptions.CancelledError

15:58:28 [INFO] __main__: === Game Server starting ===
15:58:28 [INFO] __main__: Loading configuration …
15:58:29 [INFO] __main__:   items:        210 loaded from config
15:58:29 [INFO] __main__:   map:          4 paths, 23 build tiles from config/maps/default.yaml
15:58:29 [INFO] __main__:   ai_templates: 2 entries from config/ai_templates.yaml
15:58:29 [INFO] gameserver.loaders.game_config_loader: Loaded game config from config/game.yaml (31 keys)
15:58:29 [INFO] __main__:   game_config:  loaded
15:58:29 [INFO] __main__: Initializing persistence …
15:58:29 [INFO] gameserver.persistence.database: Database connected: gameserver.db
15:58:29 [INFO] __main__:   database:     connected (gameserver.db)
15:58:29 [INFO] gameserver.persistence.state_load: Restoring state from state2.yaml (saved at 2026-02-11T04:57:57, version 1)
15:58:29 [INFO] gameserver.persistence.state_load: Restored 2 empires, 1 attacks, 0 battles
15:58:29 [INFO] __main__:   state:        restored from disk (2 empires, 1 attacks)
15:58:29 [INFO] __main__: Creating services …
15:58:29 [INFO] __main__:   upgrade_provider: 210 items registered
15:58:29 [INFO] __main__:   all services created
15:58:29 [INFO] __main__: Wiring event handlers …
15:58:29 [INFO] __main__:   event handlers registered
15:58:29 [INFO] gameserver.engine.empire_service: Empire registered: uid=100 name='TestImperium'
15:58:29 [INFO] gameserver.engine.empire_service: Empire 100: recalculated effects → {}
15:58:29 [INFO] gameserver.engine.empire_service: Empire registered: uid=2 name='Empire1'
15:58:29 [INFO] gameserver.engine.empire_service: Empire 2: recalculated effects → {'life_offset': 0.001, 'gold_offset': 0.2, 'culture_offset': 0.2, 'culture_modifier': 0.1, 'gold_modifier': 0.1, 'build_speed_modifier': 0.1}
15:58:29 [INFO] __main__: Restored 2 empires from saved state
15:58:29 [INFO] __main__: Restored 1 attacks from saved state
15:58:29 [INFO] __main__: Starting network servers …
15:58:29 [INFO] gameserver.network.handlers: Registered 32 message handlers: ping, summary_request, item_request, military_request, map_load_request, map_save_request, new_item, new_structure, delete_structure, upgrade_structure, citizen_upgrade, change_citizen, increase_life, new_army, new_attack_request, change_army, new_wave, change_wave, end_siege, battle_register, battle_unregister, battle_next_wave_request, notification_request, user_message, timeline_request, userinfo_request, hall_of_fame_request, preferences_request, change_preferences, auth_request, signup, create_empire
15:58:29 [INFO] websockets.server: server listening on 0.0.0.0:8765
15:58:29 [INFO] gameserver.network.server: WebSocket server listening on ws://0.0.0.0:8765
15:58:29 [INFO] __main__:   WebSocket server listening on 0.0.0.0:8765
15:58:30 [INFO] gameserver.network.rest_api: REST API created with 19 routes
15:58:30 [INFO] __main__:   REST API listening on http://0.0.0.0:8080
INFO:     Started server process [6313]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
15:58:30 [INFO] gameserver.debug.dashboard: Debug dashboard running at http://0.0.0.0:9000/
15:58:30 [INFO] __main__: Starting game loop …
15:58:30 [INFO] __main__:   game loop running (1 s tick)
15:58:30 [INFO] gameserver.engine.attack_service: [STATE] Attack 1: TRAVELLING → IN_SIEGE (attacker=100, defender=2, army=1)
INFO:     Uvicorn running on http://0.0.0.0:8080 (Press CTRL+C to quit)
15:58:30 [INFO] gameserver.network.auth: Login success: eem (uid=2)
15:58:31 [INFO] gameserver.engine.attack_service: [STATE] Attack 1: IN_SIEGE → IN_BATTLE (attacker=100, defender=2, army=1)
15:58:31 [INFO] gameserver.network.handlers: [battle:start_requested] attack_id=1 attacker=100 defender=2 army=1
15:58:31 [INFO] gameserver.network.handlers: [battle:start_requested] SUCCESS: battle 1 created (attacker=100, defender=2)
15:58:31 [INFO] gameserver.engine.battle_service: [battle_loop] Starting battle (bid=1, defender=2, attackers=[100])
15:58:31 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=1 (SWORDMAN) spawned from wave 1 (progress=1/6)
15:58:33 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=2 (SWORDMAN) spawned from wave 1 (progress=2/6)
15:58:34 [INFO] websockets.server: connection open
15:58:34 [INFO] gameserver.network.server: WS authenticated via JWT: uid=2
15:58:34 [INFO] gameserver.network.server: Session registered: uid=2
15:58:34 [INFO] gameserver.network.server: Client connected: uid=2 remote=('192.168.178.2', 49730) UA=Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:147.0) Gecko/20100101 Firefox/147.0 origin=http://192.168.178.30:8000 subprotocol=(none)
15:58:34 [INFO] gameserver.network.handlers: battle_register: uid=2 registered for attack 1 (phase=in_battle)
15:58:34 [INFO] gameserver.network.handlers: _send_battle_setup: sent to uid=2 (attack_id=1)
15:58:35 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=3 (SWORDMAN) spawned from wave 1 (progress=3/6)
15:58:37 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=4 (SWORDMAN) spawned from wave 1 (progress=4/6)
15:58:39 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=5 (SWORDMAN) spawned from wave 1 (progress=5/6)
15:58:41 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=6 (SWORDMAN) spawned from wave 1 (progress=6/6)
15:58:46 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=7 (SLAVE) spawned from wave 2 (progress=1/4)
15:58:48 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=8 (SLAVE) spawned from wave 2 (progress=2/4)
15:58:50 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=9 (SLAVE) spawned from wave 2 (progress=3/4)
15:58:52 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=10 (SLAVE) spawned from wave 2 (progress=4/4)
15:59:01 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=1 (SWORDMAN) killed at path_progress=0.00
15:59:01 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=2 (SWORDMAN) killed at path_progress=0.00
15:59:01 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=3 (SWORDMAN) killed at path_progress=0.00
15:59:01 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=4 (SWORDMAN) killed at path_progress=0.00
15:59:01 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=5 (SWORDMAN) killed at path_progress=0.00
15:59:01 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=6 (SWORDMAN) killed at path_progress=0.00
15:59:01 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=7 (SLAVE) killed at path_progress=0.00
15:59:01 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=8 (SLAVE) killed at path_progress=0.00
15:59:01 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=9 (SLAVE) killed at path_progress=0.00
15:59:01 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.00
15:59:01 [INFO] gameserver.engine.battle_service: [FINISH] Battle bid=1 finished (defender won)
15:59:01 [INFO] gameserver.network.handlers: [battle] bid=1 complete: attacker_wins=False
15:59:01 [INFO] gameserver.network.handlers: [battle] bid=1 resource transfer complete
15:59:01 [INFO] gameserver.network.handlers: [battle] marked attack 1 as FINISHED
15:59:03 [WARNING] gameserver.network.handlers: battle_unregister: uid=2 not registered for any attack
15:59:03 [INFO] gameserver.network.server: Client closed cleanly: uid=2 remote=('192.168.178.2', 49730)
15:59:03 [INFO] gameserver.network.server: Session removed: uid=2
15:59:57 [INFO] __main__: Shutdown signal received — stopping …
15:59:57 [INFO] __main__: Shutting down …
15:59:57 [INFO] gameserver.persistence.state_save: Game state saved to state.yaml (2 empires, 0 attacks, 0 battles)
15:59:57 [INFO] websockets.server: server closing
15:59:57 [INFO] websockets.server: server closed
15:59:57 [INFO] gameserver.network.server: WebSocket server stopped
15:59:57 [INFO] __main__:   WebSocket server stopped
15:59:57 [INFO] __main__:   REST API server stopped
15:59:57 [INFO] __main__:   debug dashboard stopped
15:59:57 [INFO] __main__:   database closed
15:59:57 [INFO] __main__:   goodbye
ERROR:    Traceback (most recent call last):
  File "/home/pi/e3/.venv/lib/python3.9/site-packages/starlette/routing.py", line 701, in lifespan
    await receive()
  File "/home/pi/e3/.venv/lib/python3.9/site-packages/uvicorn/lifespan/on.py", line 137, in receive
    return await self.receive_queue.get()
  File "/usr/lib/python3.9/asyncio/queues.py", line 166, in get
    await getter
asyncio.exceptions.CancelledError

15:59:59 [INFO] __main__: === Game Server starting ===
15:59:59 [INFO] __main__: Loading configuration …
15:59:59 [INFO] __main__:   items:        210 loaded from config
15:59:59 [INFO] __main__:   map:          4 paths, 23 build tiles from config/maps/default.yaml
15:59:59 [INFO] __main__:   ai_templates: 2 entries from config/ai_templates.yaml
15:59:59 [INFO] gameserver.loaders.game_config_loader: Loaded game config from config/game.yaml (31 keys)
15:59:59 [INFO] __main__:   game_config:  loaded
15:59:59 [INFO] __main__: Initializing persistence …
15:59:59 [INFO] gameserver.persistence.database: Database connected: gameserver.db
15:59:59 [INFO] __main__:   database:     connected (gameserver.db)
15:59:59 [INFO] gameserver.persistence.state_load: Restoring state from state2.yaml (saved at 2026-02-11T04:57:57, version 1)
15:59:59 [INFO] gameserver.persistence.state_load: Restored 2 empires, 1 attacks, 0 battles
15:59:59 [INFO] __main__:   state:        restored from disk (2 empires, 1 attacks)
15:59:59 [INFO] __main__: Creating services …
15:59:59 [INFO] __main__:   upgrade_provider: 210 items registered
15:59:59 [INFO] __main__:   all services created
15:59:59 [INFO] __main__: Wiring event handlers …
15:59:59 [INFO] __main__:   event handlers registered
15:59:59 [INFO] gameserver.engine.empire_service: Empire registered: uid=100 name='TestImperium'
15:59:59 [INFO] gameserver.engine.empire_service: Empire 100: recalculated effects → {}
15:59:59 [INFO] gameserver.engine.empire_service: Empire registered: uid=2 name='Empire1'
15:59:59 [INFO] gameserver.engine.empire_service: Empire 2: recalculated effects → {'life_offset': 0.001, 'gold_offset': 0.2, 'culture_offset': 0.2, 'culture_modifier': 0.1, 'gold_modifier': 0.1, 'build_speed_modifier': 0.1}
15:59:59 [INFO] __main__: Restored 2 empires from saved state
15:59:59 [INFO] __main__: Restored 1 attacks from saved state
15:59:59 [INFO] __main__: Starting network servers …
15:59:59 [INFO] gameserver.network.handlers: Registered 32 message handlers: ping, summary_request, item_request, military_request, map_load_request, map_save_request, new_item, new_structure, delete_structure, upgrade_structure, citizen_upgrade, change_citizen, increase_life, new_army, new_attack_request, change_army, new_wave, change_wave, end_siege, battle_register, battle_unregister, battle_next_wave_request, notification_request, user_message, timeline_request, userinfo_request, hall_of_fame_request, preferences_request, change_preferences, auth_request, signup, create_empire
15:59:59 [INFO] websockets.server: server listening on 0.0.0.0:8765
15:59:59 [INFO] gameserver.network.server: WebSocket server listening on ws://0.0.0.0:8765
15:59:59 [INFO] __main__:   WebSocket server listening on 0.0.0.0:8765
16:00:01 [INFO] gameserver.network.rest_api: REST API created with 19 routes
16:00:01 [INFO] __main__:   REST API listening on http://0.0.0.0:8080
INFO:     Started server process [6539]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
16:00:01 [INFO] gameserver.debug.dashboard: Debug dashboard running at http://0.0.0.0:9000/
16:00:01 [INFO] __main__: Starting game loop …
16:00:01 [INFO] __main__:   game loop running (1 s tick)
16:00:01 [INFO] gameserver.engine.attack_service: [STATE] Attack 1: TRAVELLING → IN_SIEGE (attacker=100, defender=2, army=1)
INFO:     Uvicorn running on http://0.0.0.0:8080 (Press CTRL+C to quit)
16:00:02 [INFO] gameserver.engine.attack_service: [STATE] Attack 1: IN_SIEGE → IN_BATTLE (attacker=100, defender=2, army=1)
16:00:02 [INFO] gameserver.network.handlers: [battle:start_requested] attack_id=1 attacker=100 defender=2 army=1
16:00:02 [INFO] gameserver.network.handlers: [battle:start_requested] SUCCESS: battle 1 created (attacker=100, defender=2)
16:00:02 [INFO] gameserver.engine.battle_service: [battle_loop] Starting battle (bid=1, defender=2, attackers=[100])
16:00:02 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=1 (SWORDMAN) spawned from wave 1 (progress=1/6)
16:00:04 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=2 (SWORDMAN) spawned from wave 1 (progress=2/6)
16:00:06 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=3 (SWORDMAN) spawned from wave 1 (progress=3/6)
16:00:08 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=4 (SWORDMAN) spawned from wave 1 (progress=4/6)
16:00:10 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=5 (SWORDMAN) spawned from wave 1 (progress=5/6)
16:00:11 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=6 (SWORDMAN) spawned from wave 1 (progress=6/6)
16:00:16 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=7 (SLAVE) spawned from wave 2 (progress=1/4)
16:00:18 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=8 (SLAVE) spawned from wave 2 (progress=2/4)
16:00:20 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=9 (SLAVE) spawned from wave 2 (progress=3/4)
16:00:22 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=10 (SLAVE) spawned from wave 2 (progress=4/4)
16:00:32 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=1 (SWORDMAN) killed at path_progress=0.00
16:00:32 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=2 (SWORDMAN) killed at path_progress=0.00
16:00:32 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=3 (SWORDMAN) killed at path_progress=0.00
16:00:32 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=4 (SWORDMAN) killed at path_progress=0.00
16:00:32 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=5 (SWORDMAN) killed at path_progress=0.00
16:00:32 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=6 (SWORDMAN) killed at path_progress=0.00
16:00:32 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=7 (SLAVE) killed at path_progress=0.00
16:00:32 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=8 (SLAVE) killed at path_progress=0.00
16:00:32 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=9 (SLAVE) killed at path_progress=0.00
16:00:32 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.00
16:00:32 [INFO] gameserver.engine.battle_service: [FINISH] Battle bid=1 finished (defender won)
16:00:32 [INFO] gameserver.network.handlers: [battle] bid=1 complete: attacker_wins=False
16:00:32 [INFO] gameserver.network.handlers: [battle] bid=1 resource transfer complete
16:00:32 [INFO] gameserver.network.handlers: [battle] marked attack 1 as FINISHED
16:00:35 [INFO] __main__: Shutdown signal received — stopping …
16:00:35 [INFO] __main__: Shutting down …
16:00:35 [INFO] gameserver.persistence.state_save: Game state saved to state.yaml (2 empires, 0 attacks, 0 battles)
16:00:35 [INFO] websockets.server: server closing
16:00:35 [INFO] websockets.server: server closed
16:00:35 [INFO] gameserver.network.server: WebSocket server stopped
16:00:35 [INFO] __main__:   WebSocket server stopped
16:00:35 [INFO] __main__:   REST API server stopped
16:00:35 [INFO] __main__:   debug dashboard stopped
16:00:35 [INFO] __main__:   database closed
16:00:35 [INFO] __main__:   goodbye
ERROR:    Traceback (most recent call last):
  File "/home/pi/e3/.venv/lib/python3.9/site-packages/starlette/routing.py", line 701, in lifespan
    await receive()
  File "/home/pi/e3/.venv/lib/python3.9/site-packages/uvicorn/lifespan/on.py", line 137, in receive
    return await self.receive_queue.get()
  File "/usr/lib/python3.9/asyncio/queues.py", line 166, in get
    await getter
asyncio.exceptions.CancelledError

16:00:37 [INFO] __main__: === Game Server starting ===
16:00:37 [INFO] __main__: Loading configuration …
16:00:37 [INFO] __main__:   items:        210 loaded from config
16:00:38 [INFO] __main__:   map:          4 paths, 23 build tiles from config/maps/default.yaml
16:00:38 [INFO] __main__:   ai_templates: 2 entries from config/ai_templates.yaml
16:00:38 [INFO] gameserver.loaders.game_config_loader: Loaded game config from config/game.yaml (31 keys)
16:00:38 [INFO] __main__:   game_config:  loaded
16:00:38 [INFO] __main__: Initializing persistence …
16:00:38 [INFO] gameserver.persistence.database: Database connected: gameserver.db
16:00:38 [INFO] __main__:   database:     connected (gameserver.db)
16:00:38 [INFO] gameserver.persistence.state_load: Restoring state from state2.yaml (saved at 2026-02-11T04:57:57, version 1)
16:00:38 [INFO] gameserver.persistence.state_load: Restored 2 empires, 1 attacks, 0 battles
16:00:38 [INFO] __main__:   state:        restored from disk (2 empires, 1 attacks)
16:00:38 [INFO] __main__: Creating services …
16:00:38 [INFO] __main__:   upgrade_provider: 210 items registered
16:00:38 [INFO] __main__:   all services created
16:00:38 [INFO] __main__: Wiring event handlers …
16:00:38 [INFO] __main__:   event handlers registered
16:00:38 [INFO] gameserver.engine.empire_service: Empire registered: uid=100 name='TestImperium'
16:00:38 [INFO] gameserver.engine.empire_service: Empire 100: recalculated effects → {}
16:00:38 [INFO] gameserver.engine.empire_service: Empire registered: uid=2 name='Empire1'
16:00:38 [INFO] gameserver.engine.empire_service: Empire 2: recalculated effects → {'life_offset': 0.001, 'gold_offset': 0.2, 'culture_offset': 0.2, 'culture_modifier': 0.1, 'gold_modifier': 0.1, 'build_speed_modifier': 0.1}
16:00:38 [INFO] __main__: Restored 2 empires from saved state
16:00:38 [INFO] __main__: Restored 1 attacks from saved state
16:00:38 [INFO] __main__: Starting network servers …
16:00:38 [INFO] gameserver.network.handlers: Registered 32 message handlers: ping, summary_request, item_request, military_request, map_load_request, map_save_request, new_item, new_structure, delete_structure, upgrade_structure, citizen_upgrade, change_citizen, increase_life, new_army, new_attack_request, change_army, new_wave, change_wave, end_siege, battle_register, battle_unregister, battle_next_wave_request, notification_request, user_message, timeline_request, userinfo_request, hall_of_fame_request, preferences_request, change_preferences, auth_request, signup, create_empire
16:00:38 [INFO] websockets.server: server listening on 0.0.0.0:8765
16:00:38 [INFO] gameserver.network.server: WebSocket server listening on ws://0.0.0.0:8765
16:00:38 [INFO] __main__:   WebSocket server listening on 0.0.0.0:8765
16:00:39 [INFO] gameserver.network.rest_api: REST API created with 19 routes
16:00:39 [INFO] __main__:   REST API listening on http://0.0.0.0:8080
INFO:     Started server process [6633]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
16:00:39 [INFO] gameserver.debug.dashboard: Debug dashboard running at http://0.0.0.0:9000/
16:00:39 [INFO] __main__: Starting game loop …
16:00:39 [INFO] __main__:   game loop running (1 s tick)
16:00:39 [INFO] gameserver.engine.attack_service: [STATE] Attack 1: TRAVELLING → IN_SIEGE (attacker=100, defender=2, army=1)
INFO:     Uvicorn running on http://0.0.0.0:8080 (Press CTRL+C to quit)
16:00:39 [INFO] gameserver.network.auth: Login success: eem (uid=2)
16:00:40 [INFO] gameserver.engine.attack_service: [STATE] Attack 1: IN_SIEGE → IN_BATTLE (attacker=100, defender=2, army=1)
16:00:40 [INFO] gameserver.network.handlers: [battle:start_requested] attack_id=1 attacker=100 defender=2 army=1
16:00:40 [INFO] gameserver.network.handlers: [battle:start_requested] SUCCESS: battle 1 created (attacker=100, defender=2)
16:00:40 [INFO] gameserver.engine.battle_service: [battle_loop] Starting battle (bid=1, defender=2, attackers=[100])
16:00:40 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=1 (SWORDMAN) spawned from wave 1 (progress=1/6)
16:00:42 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=2 (SWORDMAN) spawned from wave 1 (progress=2/6)
16:00:44 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=3 (SWORDMAN) spawned from wave 1 (progress=3/6)
16:00:46 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=4 (SWORDMAN) spawned from wave 1 (progress=4/6)
16:00:47 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=5 (SWORDMAN) spawned from wave 1 (progress=5/6)
16:00:49 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=6 (SWORDMAN) spawned from wave 1 (progress=6/6)
16:00:54 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=7 (SLAVE) spawned from wave 2 (progress=1/4)
16:00:56 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=8 (SLAVE) spawned from wave 2 (progress=2/4)
16:00:58 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=9 (SLAVE) spawned from wave 2 (progress=3/4)
16:01:00 [INFO] websockets.server: connection open
16:01:00 [INFO] gameserver.network.server: WS authenticated via JWT: uid=2
16:01:00 [INFO] gameserver.network.server: Session registered: uid=2
16:01:00 [INFO] gameserver.network.server: Client connected: uid=2 remote=('192.168.178.25', 56146) UA=Mozilla/5.0 (iPhone; CPU iPhone OS 18_7 like Mac OS X) AppleWebKit/605.1.15 (KHT origin=http://192.168.178.47:8000 subprotocol=(none)
16:01:00 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=10 (SLAVE) spawned from wave 2 (progress=4/4)
16:01:00 [INFO] gameserver.network.server: Client closed cleanly: uid=2 remote=('192.168.178.25', 56146)
16:01:00 [INFO] gameserver.network.server: Session removed: uid=2
16:01:08 [INFO] websockets.server: connection open
16:01:08 [INFO] gameserver.network.server: WS authenticated via JWT: uid=2
16:01:08 [INFO] gameserver.network.server: Session registered: uid=2
16:01:08 [INFO] gameserver.network.server: Client connected: uid=2 remote=('192.168.178.2', 55815) UA=Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:147.0) Gecko/20100101 Firefox/147.0 origin=http://192.168.178.30:8000 subprotocol=(none)
16:01:08 [INFO] gameserver.network.handlers: battle_register: uid=2 registered for attack 1 (phase=in_battle)
16:01:08 [INFO] gameserver.network.handlers: _send_battle_setup: sent to uid=2 (attack_id=1)
16:01:10 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=1 (SWORDMAN) killed at path_progress=0.00
16:01:10 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=2 (SWORDMAN) killed at path_progress=0.00
16:01:10 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=3 (SWORDMAN) killed at path_progress=0.00
16:01:10 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=4 (SWORDMAN) killed at path_progress=0.00
16:01:10 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=5 (SWORDMAN) killed at path_progress=0.00
16:01:10 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=6 (SWORDMAN) killed at path_progress=0.00
16:01:10 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=7 (SLAVE) killed at path_progress=0.00
16:01:10 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=8 (SLAVE) killed at path_progress=0.00
16:01:10 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=9 (SLAVE) killed at path_progress=0.00
16:01:10 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.00
16:01:10 [INFO] gameserver.engine.battle_service: [FINISH] Battle bid=1 finished (defender won)
16:01:10 [INFO] gameserver.network.handlers: [battle] bid=1 complete: attacker_wins=False
16:01:10 [INFO] gameserver.network.handlers: [battle] bid=1 resource transfer complete
16:01:10 [INFO] gameserver.network.handlers: [battle] marked attack 1 as FINISHED
16:01:13 [WARNING] gameserver.network.handlers: battle_unregister: uid=2 not registered for any attack
16:01:13 [INFO] gameserver.network.server: Client disconnected: uid=2 code=1000 reason=leaving-battle remote=('192.168.178.2', 55815)
16:01:13 [INFO] gameserver.network.server: Session removed: uid=2
16:01:18 [INFO] websockets.server: connection open
16:01:18 [INFO] gameserver.network.server: WS authenticated via JWT: uid=2
16:01:18 [INFO] gameserver.network.server: Session registered: uid=2
16:01:18 [INFO] gameserver.network.server: Client connected: uid=2 remote=('192.168.178.25', 56154) UA=Mozilla/5.0 (iPhone; CPU iPhone OS 18_7 like Mac OS X) AppleWebKit/605.1.15 (KHT origin=http://192.168.178.47:8000 subprotocol=(none)
16:01:18 [INFO] gameserver.network.server: Client closed cleanly: uid=2 remote=('192.168.178.25', 56154)
16:01:18 [INFO] gameserver.network.server: Session removed: uid=2
16:01:24 [INFO] gameserver.network.auth: Login success: eem (uid=2)
16:01:31 [INFO] gameserver.network.auth: Login success: eem (uid=2)
16:01:40 [INFO] websockets.server: connection open
16:01:40 [INFO] gameserver.network.server: WS authenticated via JWT: uid=2
16:01:40 [INFO] gameserver.network.server: Session registered: uid=2
16:01:40 [INFO] gameserver.network.server: Client connected: uid=2 remote=('192.168.178.25', 56163) UA=Mozilla/5.0 (iPhone; CPU iPhone OS 18_7 like Mac OS X) AppleWebKit/605.1.15 (KHT origin=http://192.168.178.47:8000 subprotocol=(none)
16:01:40 [INFO] gameserver.network.server: Client closed cleanly: uid=2 remote=('192.168.178.25', 56163)
16:01:40 [INFO] gameserver.network.server: Session removed: uid=2
16:02:19 [INFO] __main__: Shutdown signal received — stopping …
16:02:20 [INFO] __main__: Shutting down …
16:02:20 [INFO] gameserver.persistence.state_save: Game state saved to state.yaml (2 empires, 0 attacks, 0 battles)
16:02:20 [INFO] websockets.server: server closing
16:02:20 [INFO] websockets.server: server closed
16:02:20 [INFO] gameserver.network.server: WebSocket server stopped
16:02:20 [INFO] __main__:   WebSocket server stopped
16:02:20 [INFO] __main__:   REST API server stopped
16:02:20 [INFO] __main__:   debug dashboard stopped
16:02:20 [INFO] __main__:   database closed
16:02:20 [INFO] __main__:   goodbye
ERROR:    Traceback (most recent call last):
  File "/home/pi/e3/.venv/lib/python3.9/site-packages/starlette/routing.py", line 701, in lifespan
    await receive()
  File "/home/pi/e3/.venv/lib/python3.9/site-packages/uvicorn/lifespan/on.py", line 137, in receive
    return await self.receive_queue.get()
  File "/usr/lib/python3.9/asyncio/queues.py", line 166, in get
    await getter
asyncio.exceptions.CancelledError

16:02:22 [INFO] __main__: === Game Server starting ===
16:02:22 [INFO] __main__: Loading configuration …
16:02:23 [INFO] __main__:   items:        210 loaded from config
16:02:23 [INFO] __main__:   map:          4 paths, 23 build tiles from config/maps/default.yaml
16:02:23 [INFO] __main__:   ai_templates: 2 entries from config/ai_templates.yaml
16:02:23 [INFO] gameserver.loaders.game_config_loader: Loaded game config from config/game.yaml (31 keys)
16:02:23 [INFO] __main__:   game_config:  loaded
16:02:23 [INFO] __main__: Initializing persistence …
16:02:23 [INFO] gameserver.persistence.database: Database connected: gameserver.db
16:02:23 [INFO] __main__:   database:     connected (gameserver.db)
16:02:23 [INFO] gameserver.persistence.state_load: Restoring state from state2.yaml (saved at 2026-02-11T04:57:57, version 1)
16:02:23 [INFO] gameserver.persistence.state_load: Restored 2 empires, 1 attacks, 0 battles
16:02:23 [INFO] __main__:   state:        restored from disk (2 empires, 1 attacks)
16:02:23 [INFO] __main__: Creating services …
16:02:23 [INFO] __main__:   upgrade_provider: 210 items registered
16:02:23 [INFO] __main__:   all services created
16:02:23 [INFO] __main__: Wiring event handlers …
16:02:23 [INFO] __main__:   event handlers registered
16:02:23 [INFO] gameserver.engine.empire_service: Empire registered: uid=100 name='TestImperium'
16:02:23 [INFO] gameserver.engine.empire_service: Empire 100: recalculated effects → {}
16:02:23 [INFO] gameserver.engine.empire_service: Empire registered: uid=2 name='Empire1'
16:02:23 [INFO] gameserver.engine.empire_service: Empire 2: recalculated effects → {'life_offset': 0.001, 'gold_offset': 0.2, 'culture_offset': 0.2, 'culture_modifier': 0.1, 'gold_modifier': 0.1, 'build_speed_modifier': 0.1}
16:02:23 [INFO] __main__: Restored 2 empires from saved state
16:02:23 [INFO] __main__: Restored 1 attacks from saved state
16:02:23 [INFO] __main__: Starting network servers …
16:02:23 [INFO] gameserver.network.handlers: Registered 32 message handlers: ping, summary_request, item_request, military_request, map_load_request, map_save_request, new_item, new_structure, delete_structure, upgrade_structure, citizen_upgrade, change_citizen, increase_life, new_army, new_attack_request, change_army, new_wave, change_wave, end_siege, battle_register, battle_unregister, battle_next_wave_request, notification_request, user_message, timeline_request, userinfo_request, hall_of_fame_request, preferences_request, change_preferences, auth_request, signup, create_empire
16:02:23 [INFO] websockets.server: server listening on 0.0.0.0:8765
16:02:23 [INFO] gameserver.network.server: WebSocket server listening on ws://0.0.0.0:8765
16:02:23 [INFO] __main__:   WebSocket server listening on 0.0.0.0:8765
16:02:24 [INFO] gameserver.network.rest_api: REST API created with 19 routes
16:02:24 [INFO] __main__:   REST API listening on http://0.0.0.0:8080
INFO:     Started server process [6902]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
16:02:24 [INFO] gameserver.debug.dashboard: Debug dashboard running at http://0.0.0.0:9000/
16:02:24 [INFO] __main__: Starting game loop …
16:02:24 [INFO] __main__:   game loop running (1 s tick)
16:02:24 [INFO] gameserver.engine.attack_service: [STATE] Attack 1: TRAVELLING → IN_SIEGE (attacker=100, defender=2, army=1)
INFO:     Uvicorn running on http://0.0.0.0:8080 (Press CTRL+C to quit)
16:02:25 [INFO] gameserver.engine.attack_service: [STATE] Attack 1: IN_SIEGE → IN_BATTLE (attacker=100, defender=2, army=1)
16:02:25 [INFO] gameserver.network.handlers: [battle:start_requested] attack_id=1 attacker=100 defender=2 army=1
16:02:25 [INFO] gameserver.network.handlers: [battle:start_requested] SUCCESS: battle 1 created (attacker=100, defender=2)
16:02:25 [INFO] gameserver.engine.battle_service: [battle_loop] Starting battle (bid=1, defender=2, attackers=[100])
16:02:25 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=1 (SWORDMAN) spawned from wave 1 (progress=1/6)
16:02:27 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=2 (SWORDMAN) spawned from wave 1 (progress=2/6)
16:02:29 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=3 (SWORDMAN) spawned from wave 1 (progress=3/6)
16:02:31 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=4 (SWORDMAN) spawned from wave 1 (progress=4/6)
16:02:33 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=5 (SWORDMAN) spawned from wave 1 (progress=5/6)
16:02:35 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=6 (SWORDMAN) spawned from wave 1 (progress=6/6)
16:02:39 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=7 (SLAVE) spawned from wave 2 (progress=1/4)
16:02:41 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=8 (SLAVE) spawned from wave 2 (progress=2/4)
16:02:43 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=9 (SLAVE) spawned from wave 2 (progress=3/4)
16:02:45 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=10 (SLAVE) spawned from wave 2 (progress=4/4)
16:02:55 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=1 (SWORDMAN) killed at path_progress=0.00
16:02:55 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=2 (SWORDMAN) killed at path_progress=0.00
16:02:55 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=3 (SWORDMAN) killed at path_progress=0.00
16:02:55 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=4 (SWORDMAN) killed at path_progress=0.00
16:02:55 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=5 (SWORDMAN) killed at path_progress=0.00
16:02:55 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=6 (SWORDMAN) killed at path_progress=0.00
16:02:55 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=7 (SLAVE) killed at path_progress=0.00
16:02:55 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=8 (SLAVE) killed at path_progress=0.00
16:02:55 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=9 (SLAVE) killed at path_progress=0.00
16:02:55 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.00
16:02:55 [INFO] gameserver.engine.battle_service: [FINISH] Battle bid=1 finished (defender won)
16:02:55 [INFO] gameserver.network.handlers: [battle] bid=1 complete: attacker_wins=False
16:02:55 [INFO] gameserver.network.handlers: [battle] bid=1 resource transfer complete
16:02:55 [INFO] gameserver.network.handlers: [battle] marked attack 1 as FINISHED
16:03:06 [INFO] __main__: Shutdown signal received — stopping …
16:03:06 [INFO] __main__: Shutting down …
16:03:06 [INFO] gameserver.persistence.state_save: Game state saved to state.yaml (2 empires, 0 attacks, 0 battles)
16:03:06 [INFO] websockets.server: server closing
16:03:06 [INFO] websockets.server: server closed
16:03:06 [INFO] gameserver.network.server: WebSocket server stopped
16:03:06 [INFO] __main__:   WebSocket server stopped
16:03:06 [INFO] __main__:   REST API server stopped
16:03:06 [INFO] __main__:   debug dashboard stopped
16:03:06 [INFO] __main__:   database closed
16:03:06 [INFO] __main__:   goodbye
ERROR:    Traceback (most recent call last):
  File "/home/pi/e3/.venv/lib/python3.9/site-packages/starlette/routing.py", line 701, in lifespan
    await receive()
  File "/home/pi/e3/.venv/lib/python3.9/site-packages/uvicorn/lifespan/on.py", line 137, in receive
    return await self.receive_queue.get()
  File "/usr/lib/python3.9/asyncio/queues.py", line 166, in get
    await getter
asyncio.exceptions.CancelledError

16:03:08 [INFO] __main__: === Game Server starting ===
16:03:08 [INFO] __main__: Loading configuration …
16:03:09 [INFO] __main__:   items:        210 loaded from config
16:03:09 [INFO] __main__:   map:          4 paths, 23 build tiles from config/maps/default.yaml
16:03:09 [INFO] __main__:   ai_templates: 2 entries from config/ai_templates.yaml
16:03:09 [INFO] gameserver.loaders.game_config_loader: Loaded game config from config/game.yaml (31 keys)
16:03:09 [INFO] __main__:   game_config:  loaded
16:03:09 [INFO] __main__: Initializing persistence …
16:03:09 [INFO] gameserver.persistence.database: Database connected: gameserver.db
16:03:09 [INFO] __main__:   database:     connected (gameserver.db)
16:03:09 [INFO] gameserver.persistence.state_load: Restoring state from state2.yaml (saved at 2026-02-11T04:57:57, version 1)
16:03:09 [INFO] gameserver.persistence.state_load: Restored 2 empires, 1 attacks, 0 battles
16:03:09 [INFO] __main__:   state:        restored from disk (2 empires, 1 attacks)
16:03:09 [INFO] __main__: Creating services …
16:03:09 [INFO] __main__:   upgrade_provider: 210 items registered
16:03:09 [INFO] __main__:   all services created
16:03:09 [INFO] __main__: Wiring event handlers …
16:03:09 [INFO] __main__:   event handlers registered
16:03:09 [INFO] gameserver.engine.empire_service: Empire registered: uid=100 name='TestImperium'
16:03:09 [INFO] gameserver.engine.empire_service: Empire 100: recalculated effects → {}
16:03:09 [INFO] gameserver.engine.empire_service: Empire registered: uid=2 name='Empire1'
16:03:09 [INFO] gameserver.engine.empire_service: Empire 2: recalculated effects → {'life_offset': 0.001, 'gold_offset': 0.2, 'culture_offset': 0.2, 'culture_modifier': 0.1, 'gold_modifier': 0.1, 'build_speed_modifier': 0.1}
16:03:09 [INFO] __main__: Restored 2 empires from saved state
16:03:09 [INFO] __main__: Restored 1 attacks from saved state
16:03:09 [INFO] __main__: Starting network servers …
16:03:09 [INFO] gameserver.network.handlers: Registered 32 message handlers: ping, summary_request, item_request, military_request, map_load_request, map_save_request, new_item, new_structure, delete_structure, upgrade_structure, citizen_upgrade, change_citizen, increase_life, new_army, new_attack_request, change_army, new_wave, change_wave, end_siege, battle_register, battle_unregister, battle_next_wave_request, notification_request, user_message, timeline_request, userinfo_request, hall_of_fame_request, preferences_request, change_preferences, auth_request, signup, create_empire
16:03:09 [INFO] websockets.server: server listening on 0.0.0.0:8765
16:03:09 [INFO] gameserver.network.server: WebSocket server listening on ws://0.0.0.0:8765
16:03:09 [INFO] __main__:   WebSocket server listening on 0.0.0.0:8765
16:03:10 [INFO] gameserver.network.rest_api: REST API created with 19 routes
16:03:10 [INFO] __main__:   REST API listening on http://0.0.0.0:8080
INFO:     Started server process [7001]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
16:03:10 [INFO] gameserver.debug.dashboard: Debug dashboard running at http://0.0.0.0:9000/
16:03:10 [INFO] __main__: Starting game loop …
16:03:10 [INFO] __main__:   game loop running (1 s tick)
16:03:10 [INFO] gameserver.engine.attack_service: [STATE] Attack 1: TRAVELLING → IN_SIEGE (attacker=100, defender=2, army=1)
INFO:     Uvicorn running on http://0.0.0.0:8080 (Press CTRL+C to quit)
16:03:11 [INFO] gameserver.engine.attack_service: [STATE] Attack 1: IN_SIEGE → IN_BATTLE (attacker=100, defender=2, army=1)
16:03:11 [INFO] gameserver.network.handlers: [battle:start_requested] attack_id=1 attacker=100 defender=2 army=1
16:03:11 [INFO] gameserver.network.handlers: [battle:start_requested] SUCCESS: battle 1 created (attacker=100, defender=2)
16:03:11 [INFO] gameserver.engine.battle_service: [battle_loop] Starting battle (bid=1, defender=2, attackers=[100])
16:03:11 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=1 (SWORDMAN) spawned from wave 1 (progress=1/6)
16:03:13 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=2 (SWORDMAN) spawned from wave 1 (progress=2/6)
16:03:15 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=3 (SWORDMAN) spawned from wave 1 (progress=3/6)
16:03:17 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=4 (SWORDMAN) spawned from wave 1 (progress=4/6)
16:03:19 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=5 (SWORDMAN) spawned from wave 1 (progress=5/6)
16:03:21 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=6 (SWORDMAN) spawned from wave 1 (progress=6/6)
16:03:25 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=7 (SLAVE) spawned from wave 2 (progress=1/4)
16:03:27 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=8 (SLAVE) spawned from wave 2 (progress=2/4)
16:03:29 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=9 (SLAVE) spawned from wave 2 (progress=3/4)
16:03:31 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=10 (SLAVE) spawned from wave 2 (progress=4/4)
16:03:41 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=1 (SWORDMAN) killed at path_progress=0.00
16:03:41 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=2 (SWORDMAN) killed at path_progress=0.00
16:03:41 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=3 (SWORDMAN) killed at path_progress=0.00
16:03:41 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=4 (SWORDMAN) killed at path_progress=0.00
16:03:41 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=5 (SWORDMAN) killed at path_progress=0.00
16:03:41 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=6 (SWORDMAN) killed at path_progress=0.00
16:03:41 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=7 (SLAVE) killed at path_progress=0.00
16:03:41 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=8 (SLAVE) killed at path_progress=0.00
16:03:41 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=9 (SLAVE) killed at path_progress=0.00
16:03:41 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.00
16:03:41 [INFO] gameserver.engine.battle_service: [FINISH] Battle bid=1 finished (defender won)
16:03:41 [INFO] gameserver.network.handlers: [battle] bid=1 complete: attacker_wins=False
16:03:41 [INFO] gameserver.network.handlers: [battle] bid=1 resource transfer complete
16:03:41 [INFO] gameserver.network.handlers: [battle] marked attack 1 as FINISHED
16:03:45 [INFO] gameserver.network.auth: Login success: eem (uid=2)
16:09:40 [INFO] websockets.server: connection open
16:09:40 [INFO] gameserver.network.server: WS authenticated via JWT: uid=2
16:09:40 [INFO] gameserver.network.server: Session registered: uid=2
16:09:40 [INFO] gameserver.network.server: Client connected: uid=2 remote=('192.168.178.25', 56239) UA=Mozilla/5.0 (iPhone; CPU iPhone OS 18_7 like Mac OS X) AppleWebKit/605.1.15 (KHT origin=http://192.168.178.47:8000 subprotocol=(none)
16:09:40 [INFO] gameserver.network.server: Client closed cleanly: uid=2 remote=('192.168.178.25', 56239)
16:09:40 [INFO] gameserver.network.server: Session removed: uid=2
16:11:20 [INFO] websockets.server: connection open
16:11:20 [INFO] gameserver.network.server: WS authenticated via JWT: uid=2
16:11:20 [INFO] gameserver.network.server: Session registered: uid=2
16:11:20 [INFO] gameserver.network.server: Client connected: uid=2 remote=('192.168.178.25', 56256) UA=Mozilla/5.0 (iPhone; CPU iPhone OS 18_7 like Mac OS X) AppleWebKit/605.1.15 (KHT origin=http://192.168.178.47:8000 subprotocol=(none)
16:11:20 [INFO] gameserver.network.server: Client closed cleanly: uid=2 remote=('192.168.178.25', 56256)
16:11:20 [INFO] gameserver.network.server: Session removed: uid=2
16:12:06 [INFO] __main__: Shutdown signal received — stopping …
16:12:06 [INFO] __main__: Shutting down …
16:12:06 [INFO] gameserver.persistence.state_save: Game state saved to state.yaml (2 empires, 0 attacks, 0 battles)
16:12:06 [INFO] websockets.server: server closing
16:12:06 [INFO] websockets.server: server closed
16:12:06 [INFO] gameserver.network.server: WebSocket server stopped
16:12:06 [INFO] __main__:   WebSocket server stopped
16:12:06 [INFO] __main__:   REST API server stopped
16:12:06 [INFO] __main__:   debug dashboard stopped
16:12:06 [INFO] __main__:   database closed
16:12:06 [INFO] __main__:   goodbye
ERROR:    Traceback (most recent call last):
  File "/home/pi/e3/.venv/lib/python3.9/site-packages/starlette/routing.py", line 701, in lifespan
    await receive()
  File "/home/pi/e3/.venv/lib/python3.9/site-packages/uvicorn/lifespan/on.py", line 137, in receive
    return await self.receive_queue.get()
  File "/usr/lib/python3.9/asyncio/queues.py", line 166, in get
    await getter
asyncio.exceptions.CancelledError

16:12:08 [INFO] __main__: === Game Server starting ===
16:12:08 [INFO] __main__: Loading configuration …
16:12:09 [INFO] __main__:   items:        210 loaded from config
16:12:09 [INFO] __main__:   map:          4 paths, 23 build tiles from config/maps/default.yaml
16:12:09 [INFO] __main__:   ai_templates: 2 entries from config/ai_templates.yaml
16:12:09 [INFO] gameserver.loaders.game_config_loader: Loaded game config from config/game.yaml (31 keys)
16:12:09 [INFO] __main__:   game_config:  loaded
16:12:09 [INFO] __main__: Initializing persistence …
16:12:09 [INFO] gameserver.persistence.database: Database connected: gameserver.db
16:12:09 [INFO] __main__:   database:     connected (gameserver.db)
16:12:09 [INFO] gameserver.persistence.state_load: Restoring state from state2.yaml (saved at 2026-02-11T04:57:57, version 1)
16:12:09 [INFO] gameserver.persistence.state_load: Restored 2 empires, 1 attacks, 0 battles
16:12:09 [INFO] __main__:   state:        restored from disk (2 empires, 1 attacks)
16:12:09 [INFO] __main__: Creating services …
16:12:09 [INFO] __main__:   upgrade_provider: 210 items registered
16:12:09 [INFO] __main__:   all services created
16:12:09 [INFO] __main__: Wiring event handlers …
16:12:09 [INFO] __main__:   event handlers registered
16:12:09 [INFO] gameserver.engine.empire_service: Empire registered: uid=100 name='TestImperium'
16:12:09 [INFO] gameserver.engine.empire_service: Empire 100: recalculated effects → {}
16:12:09 [INFO] gameserver.engine.empire_service: Empire registered: uid=2 name='Empire1'
16:12:09 [INFO] gameserver.engine.empire_service: Empire 2: recalculated effects → {'life_offset': 0.001, 'gold_offset': 0.2, 'culture_offset': 0.2, 'culture_modifier': 0.1, 'gold_modifier': 0.1, 'build_speed_modifier': 0.1}
16:12:09 [INFO] __main__: Restored 2 empires from saved state
16:12:09 [INFO] __main__: Restored 1 attacks from saved state
16:12:09 [INFO] __main__: Starting network servers …
16:12:09 [INFO] gameserver.network.handlers: Registered 32 message handlers: ping, summary_request, item_request, military_request, map_load_request, map_save_request, new_item, new_structure, delete_structure, upgrade_structure, citizen_upgrade, change_citizen, increase_life, new_army, new_attack_request, change_army, new_wave, change_wave, end_siege, battle_register, battle_unregister, battle_next_wave_request, notification_request, user_message, timeline_request, userinfo_request, hall_of_fame_request, preferences_request, change_preferences, auth_request, signup, create_empire
16:12:09 [INFO] websockets.server: server listening on 0.0.0.0:8765
16:12:09 [INFO] gameserver.network.server: WebSocket server listening on ws://0.0.0.0:8765
16:12:09 [INFO] __main__:   WebSocket server listening on 0.0.0.0:8765
16:12:10 [INFO] gameserver.network.rest_api: REST API created with 19 routes
16:12:10 [INFO] __main__:   REST API listening on http://0.0.0.0:8080
INFO:     Started server process [7621]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
16:12:10 [INFO] gameserver.debug.dashboard: Debug dashboard running at http://0.0.0.0:9000/
16:12:10 [INFO] __main__: Starting game loop …
16:12:10 [INFO] __main__:   game loop running (1 s tick)
16:12:10 [INFO] gameserver.engine.attack_service: [STATE] Attack 1: TRAVELLING → IN_SIEGE (attacker=100, defender=2, army=1)
INFO:     Uvicorn running on http://0.0.0.0:8080 (Press CTRL+C to quit)
16:12:11 [INFO] gameserver.engine.attack_service: [STATE] Attack 1: IN_SIEGE → IN_BATTLE (attacker=100, defender=2, army=1)
16:12:11 [INFO] gameserver.network.handlers: [battle:start_requested] attack_id=1 attacker=100 defender=2 army=1
16:12:11 [INFO] gameserver.network.handlers: [battle:start_requested] SUCCESS: battle 1 created (attacker=100, defender=2)
16:12:11 [INFO] gameserver.engine.battle_service: [battle_loop] Starting battle (bid=1, defender=2, attackers=[100])
16:12:11 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=1 (SWORDMAN) spawned from wave 1 (progress=1/6)
16:12:13 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=2 (SWORDMAN) spawned from wave 1 (progress=2/6)
16:12:14 [INFO] gameserver.network.auth: Login success: eem (uid=2)
16:12:15 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=3 (SWORDMAN) spawned from wave 1 (progress=3/6)
16:12:17 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=4 (SWORDMAN) spawned from wave 1 (progress=4/6)
16:12:19 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=5 (SWORDMAN) spawned from wave 1 (progress=5/6)
16:12:21 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=6 (SWORDMAN) spawned from wave 1 (progress=6/6)
16:12:26 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=7 (SLAVE) spawned from wave 2 (progress=1/4)
16:12:28 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=8 (SLAVE) spawned from wave 2 (progress=2/4)
16:12:29 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=9 (SLAVE) spawned from wave 2 (progress=3/4)
16:12:31 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=10 (SLAVE) spawned from wave 2 (progress=4/4)
16:12:41 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=1 (SWORDMAN) killed at path_progress=0.00
16:12:41 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=2 (SWORDMAN) killed at path_progress=0.00
16:12:41 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=3 (SWORDMAN) killed at path_progress=0.00
16:12:41 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=4 (SWORDMAN) killed at path_progress=0.00
16:12:41 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=5 (SWORDMAN) killed at path_progress=0.00
16:12:41 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=6 (SWORDMAN) killed at path_progress=0.00
16:12:41 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=7 (SLAVE) killed at path_progress=0.00
16:12:41 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=8 (SLAVE) killed at path_progress=0.00
16:12:41 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=9 (SLAVE) killed at path_progress=0.00
16:12:41 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.00
16:12:41 [INFO] gameserver.engine.battle_service: [FINISH] Battle bid=1 finished (defender won)
16:12:41 [INFO] gameserver.network.handlers: [battle] bid=1 complete: attacker_wins=False
16:12:41 [INFO] gameserver.network.handlers: [battle] bid=1 resource transfer complete
16:12:41 [INFO] gameserver.network.handlers: [battle] marked attack 1 as FINISHED
16:13:07 [INFO] websockets.server: connection open
16:13:07 [INFO] gameserver.network.server: WS authenticated via JWT: uid=2
16:13:07 [INFO] gameserver.network.server: Session registered: uid=2
16:13:07 [INFO] gameserver.network.server: Client connected: uid=2 remote=('192.168.178.25', 56298) UA=Mozilla/5.0 (iPhone; CPU iPhone OS 18_7 like Mac OS X) AppleWebKit/605.1.15 (KHT origin=http://192.168.178.47:8000 subprotocol=(none)
16:13:09 [INFO] gameserver.network.server: Client disconnected: uid=2 code=CloseCode.ABNORMAL_CLOSURE reason=(none) remote=('192.168.178.25', 56298)
16:13:09 [INFO] gameserver.network.server: Session removed: uid=2
16:14:03 [INFO] __main__: Shutdown signal received — stopping …
16:14:03 [INFO] __main__: Shutting down …
16:14:03 [INFO] gameserver.persistence.state_save: Game state saved to state.yaml (2 empires, 0 attacks, 0 battles)
16:14:03 [INFO] websockets.server: server closing
16:14:03 [INFO] websockets.server: server closed
16:14:03 [INFO] gameserver.network.server: WebSocket server stopped
16:14:03 [INFO] __main__:   WebSocket server stopped
16:14:03 [INFO] __main__:   REST API server stopped
16:14:03 [INFO] __main__:   debug dashboard stopped
16:14:03 [INFO] __main__:   database closed
16:14:03 [INFO] __main__:   goodbye
ERROR:    Traceback (most recent call last):
  File "/home/pi/e3/.venv/lib/python3.9/site-packages/starlette/routing.py", line 701, in lifespan
    await receive()
  File "/home/pi/e3/.venv/lib/python3.9/site-packages/uvicorn/lifespan/on.py", line 137, in receive
    return await self.receive_queue.get()
  File "/usr/lib/python3.9/asyncio/queues.py", line 166, in get
    await getter
asyncio.exceptions.CancelledError

16:14:05 [INFO] __main__: === Game Server starting ===
16:14:05 [INFO] __main__: Loading configuration …
16:14:06 [INFO] __main__:   items:        210 loaded from config
16:14:06 [INFO] __main__:   map:          4 paths, 23 build tiles from config/maps/default.yaml
16:14:06 [INFO] __main__:   ai_templates: 2 entries from config/ai_templates.yaml
16:14:06 [INFO] gameserver.loaders.game_config_loader: Loaded game config from config/game.yaml (31 keys)
16:14:06 [INFO] __main__:   game_config:  loaded
16:14:06 [INFO] __main__: Initializing persistence …
16:14:06 [INFO] gameserver.persistence.database: Database connected: gameserver.db
16:14:06 [INFO] __main__:   database:     connected (gameserver.db)
16:14:06 [INFO] gameserver.persistence.state_load: Restoring state from state2.yaml (saved at 2026-02-11T04:57:57, version 1)
16:14:06 [INFO] gameserver.persistence.state_load: Restored 2 empires, 1 attacks, 0 battles
16:14:06 [INFO] __main__:   state:        restored from disk (2 empires, 1 attacks)
16:14:06 [INFO] __main__: Creating services …
16:14:06 [INFO] __main__:   upgrade_provider: 210 items registered
16:14:06 [INFO] __main__:   all services created
16:14:06 [INFO] __main__: Wiring event handlers …
16:14:06 [INFO] __main__:   event handlers registered
16:14:06 [INFO] gameserver.engine.empire_service: Empire registered: uid=100 name='TestImperium'
16:14:06 [INFO] gameserver.engine.empire_service: Empire 100: recalculated effects → {}
16:14:06 [INFO] gameserver.engine.empire_service: Empire registered: uid=2 name='Empire1'
16:14:06 [INFO] gameserver.engine.empire_service: Empire 2: recalculated effects → {'life_offset': 0.001, 'gold_offset': 0.2, 'culture_offset': 0.2, 'culture_modifier': 0.1, 'gold_modifier': 0.1, 'build_speed_modifier': 0.1}
16:14:06 [INFO] __main__: Restored 2 empires from saved state
16:14:06 [INFO] __main__: Restored 1 attacks from saved state
16:14:06 [INFO] __main__: Starting network servers …
16:14:06 [INFO] gameserver.network.handlers: Registered 32 message handlers: ping, summary_request, item_request, military_request, map_load_request, map_save_request, new_item, new_structure, delete_structure, upgrade_structure, citizen_upgrade, change_citizen, increase_life, new_army, new_attack_request, change_army, new_wave, change_wave, end_siege, battle_register, battle_unregister, battle_next_wave_request, notification_request, user_message, timeline_request, userinfo_request, hall_of_fame_request, preferences_request, change_preferences, auth_request, signup, create_empire
16:14:06 [INFO] websockets.server: server listening on 0.0.0.0:8765
16:14:06 [INFO] gameserver.network.server: WebSocket server listening on ws://0.0.0.0:8765
16:14:06 [INFO] __main__:   WebSocket server listening on 0.0.0.0:8765
16:14:07 [INFO] gameserver.network.rest_api: REST API created with 19 routes
16:14:07 [INFO] __main__:   REST API listening on http://0.0.0.0:8080
INFO:     Started server process [7874]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
16:14:07 [INFO] gameserver.debug.dashboard: Debug dashboard running at http://0.0.0.0:9000/
16:14:07 [INFO] __main__: Starting game loop …
16:14:07 [INFO] __main__:   game loop running (1 s tick)
16:14:07 [INFO] gameserver.engine.attack_service: [STATE] Attack 1: TRAVELLING → IN_SIEGE (attacker=100, defender=2, army=1)
INFO:     Uvicorn running on http://0.0.0.0:8080 (Press CTRL+C to quit)
16:14:08 [INFO] gameserver.engine.attack_service: [STATE] Attack 1: IN_SIEGE → IN_BATTLE (attacker=100, defender=2, army=1)
16:14:08 [INFO] gameserver.network.handlers: [battle:start_requested] attack_id=1 attacker=100 defender=2 army=1
16:14:08 [INFO] gameserver.network.handlers: [battle:start_requested] SUCCESS: battle 1 created (attacker=100, defender=2)
16:14:08 [INFO] gameserver.engine.battle_service: [battle_loop] Starting battle (bid=1, defender=2, attackers=[100])
16:14:08 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=1 (SWORDMAN) spawned from wave 1 (progress=1/6)
16:14:10 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=2 (SWORDMAN) spawned from wave 1 (progress=2/6)
16:14:11 [INFO] websockets.server: connection open
16:14:11 [INFO] gameserver.network.server: WS authenticated via JWT: uid=2
16:14:11 [INFO] gameserver.network.server: Session registered: uid=2
16:14:11 [INFO] gameserver.network.server: Client connected: uid=2 remote=('192.168.178.25', 56317) UA=Mozilla/5.0 (iPhone; CPU iPhone OS 18_7 like Mac OS X) AppleWebKit/605.1.15 (KHT origin=http://192.168.178.47:8000 subprotocol=(none)
16:14:11 [INFO] gameserver.network.handlers: battle_register: uid=2 registered for attack 1 (phase=in_battle)
16:14:11 [INFO] gameserver.network.handlers: _send_battle_setup: sent to uid=2 (attack_id=1)
16:14:12 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=3 (SWORDMAN) spawned from wave 1 (progress=3/6)
16:14:13 [INFO] gameserver.network.handlers: battle_unregister: uid=2 unregistered from attack 1
16:14:13 [INFO] gameserver.network.server: Client closed cleanly: uid=2 remote=('192.168.178.25', 56317)
16:14:13 [INFO] gameserver.network.server: Session removed: uid=2
16:14:14 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=4 (SWORDMAN) spawned from wave 1 (progress=4/6)
16:14:16 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=5 (SWORDMAN) spawned from wave 1 (progress=5/6)
16:14:18 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=6 (SWORDMAN) spawned from wave 1 (progress=6/6)
16:14:23 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=7 (SLAVE) spawned from wave 2 (progress=1/4)
16:14:25 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=8 (SLAVE) spawned from wave 2 (progress=2/4)
16:14:27 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=9 (SLAVE) spawned from wave 2 (progress=3/4)
16:14:29 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=10 (SLAVE) spawned from wave 2 (progress=4/4)
16:14:38 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=1 (SWORDMAN) killed at path_progress=0.00
16:14:38 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=2 (SWORDMAN) killed at path_progress=0.00
16:14:38 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=3 (SWORDMAN) killed at path_progress=0.00
16:14:38 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=4 (SWORDMAN) killed at path_progress=0.00
16:14:38 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=5 (SWORDMAN) killed at path_progress=0.00
16:14:38 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=6 (SWORDMAN) killed at path_progress=0.00
16:14:38 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=7 (SLAVE) killed at path_progress=0.00
16:14:38 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=8 (SLAVE) killed at path_progress=0.00
16:14:38 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=9 (SLAVE) killed at path_progress=0.00
16:14:38 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.00
16:14:38 [INFO] gameserver.engine.battle_service: [FINISH] Battle bid=1 finished (defender won)
16:14:38 [INFO] gameserver.network.handlers: [battle] bid=1 complete: attacker_wins=False
16:14:38 [INFO] gameserver.network.handlers: [battle] bid=1 resource transfer complete
16:14:38 [INFO] gameserver.network.handlers: [battle] marked attack 1 as FINISHED
16:17:03 [INFO] websockets.server: connection open
16:17:03 [INFO] gameserver.network.server: WS authenticated via JWT: uid=2
16:17:03 [INFO] gameserver.network.server: Session registered: uid=2
16:17:03 [INFO] gameserver.network.server: Client connected: uid=2 remote=('192.168.178.25', 56367) UA=Mozilla/5.0 (iPhone; CPU iPhone OS 18_7 like Mac OS X) AppleWebKit/605.1.15 (KHT origin=http://192.168.178.47:8000 subprotocol=(none)
16:17:06 [INFO] gameserver.network.server: Client disconnected: uid=2 code=CloseCode.ABNORMAL_CLOSURE reason=(none) remote=('192.168.178.25', 56367)
16:17:06 [INFO] gameserver.network.server: Session removed: uid=2
16:17:48 [INFO] __main__: Shutdown signal received — stopping …
16:17:49 [INFO] __main__: Shutting down …
16:17:49 [INFO] gameserver.persistence.state_save: Game state saved to state.yaml (2 empires, 0 attacks, 0 battles)
16:17:49 [INFO] websockets.server: server closing
16:17:49 [INFO] websockets.server: server closed
16:17:49 [INFO] gameserver.network.server: WebSocket server stopped
16:17:49 [INFO] __main__:   WebSocket server stopped
16:17:49 [INFO] __main__:   REST API server stopped
16:17:49 [INFO] __main__:   debug dashboard stopped
16:17:49 [INFO] __main__:   database closed
16:17:49 [INFO] __main__:   goodbye
ERROR:    Traceback (most recent call last):
  File "/home/pi/e3/.venv/lib/python3.9/site-packages/starlette/routing.py", line 701, in lifespan
    await receive()
  File "/home/pi/e3/.venv/lib/python3.9/site-packages/uvicorn/lifespan/on.py", line 137, in receive
    return await self.receive_queue.get()
  File "/usr/lib/python3.9/asyncio/queues.py", line 166, in get
    await getter
asyncio.exceptions.CancelledError

16:17:51 [INFO] __main__: === Game Server starting ===
16:17:51 [INFO] __main__: Loading configuration …
16:17:52 [INFO] __main__:   items:        210 loaded from config
16:17:52 [INFO] __main__:   map:          4 paths, 23 build tiles from config/maps/default.yaml
16:17:52 [INFO] __main__:   ai_templates: 2 entries from config/ai_templates.yaml
16:17:52 [INFO] gameserver.loaders.game_config_loader: Loaded game config from config/game.yaml (31 keys)
16:17:52 [INFO] __main__:   game_config:  loaded
16:17:52 [INFO] __main__: Initializing persistence …
16:17:52 [INFO] gameserver.persistence.database: Database connected: gameserver.db
16:17:52 [INFO] __main__:   database:     connected (gameserver.db)
16:17:52 [INFO] gameserver.persistence.state_load: Restoring state from state.yaml (saved at 2026-02-14T16:17:49, version 1)
16:17:52 [INFO] gameserver.persistence.state_load: Restored 2 empires, 0 attacks, 0 battles
16:17:52 [INFO] __main__:   state:        restored from disk (2 empires, 0 attacks)
16:17:52 [INFO] __main__: Creating services …
16:17:52 [INFO] __main__:   upgrade_provider: 210 items registered
16:17:52 [INFO] __main__:   all services created
16:17:52 [INFO] __main__: Wiring event handlers …
16:17:52 [INFO] __main__:   event handlers registered
16:17:52 [INFO] gameserver.engine.empire_service: Empire registered: uid=100 name='TestImperium'
16:17:52 [INFO] gameserver.engine.empire_service: Empire 100: recalculated effects → {}
16:17:52 [INFO] gameserver.engine.empire_service: Empire registered: uid=2 name='Empire1'
16:17:52 [INFO] gameserver.engine.empire_service: Empire 2: recalculated effects → {'life_offset': 0.001, 'gold_offset': 0.2, 'culture_offset': 0.2, 'culture_modifier': 0.1, 'gold_modifier': 0.1, 'build_speed_modifier': 0.1}
16:17:52 [INFO] __main__: Restored 2 empires from saved state
16:17:52 [INFO] __main__: Starting network servers …
16:17:52 [INFO] gameserver.network.handlers: Registered 32 message handlers: ping, summary_request, item_request, military_request, map_load_request, map_save_request, new_item, new_structure, delete_structure, upgrade_structure, citizen_upgrade, change_citizen, increase_life, new_army, new_attack_request, change_army, new_wave, change_wave, end_siege, battle_register, battle_unregister, battle_next_wave_request, notification_request, user_message, timeline_request, userinfo_request, hall_of_fame_request, preferences_request, change_preferences, auth_request, signup, create_empire
16:17:52 [INFO] websockets.server: server listening on 0.0.0.0:8765
16:17:52 [INFO] gameserver.network.server: WebSocket server listening on ws://0.0.0.0:8765
16:17:52 [INFO] __main__:   WebSocket server listening on 0.0.0.0:8765
16:17:53 [INFO] gameserver.network.rest_api: REST API created with 20 routes
16:17:53 [INFO] __main__:   REST API listening on http://0.0.0.0:8080
INFO:     Started server process [8212]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
16:17:54 [INFO] gameserver.debug.dashboard: Debug dashboard running at http://0.0.0.0:9000/
16:17:54 [INFO] __main__: Starting game loop …
16:17:54 [INFO] __main__:   game loop running (1 s tick)
INFO:     Uvicorn running on http://0.0.0.0:8080 (Press CTRL+C to quit)
INFO:     192.168.178.25:56379 - "WebSocket /ws?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1aWQiOjIsImlhdCI6MTc3MTA4MTkzNCwiZXhwIjoxNzcxMTY4MzM0fQ.naiyflQGkVqMCpbS7de_ZKtKaPQ-u7yn00UzYzrbA0c" [accepted]
16:18:01 [INFO] gameserver.network.server: Session registered: uid=2
INFO:     connection open
16:18:01 [INFO] gameserver.network.rest_api: REST-WS client connected: uid=2
16:18:01 [WARNING] gameserver.network.handlers: battle_register: no attack found for uid=2 target=2
16:19:07 [WARNING] gameserver.network.handlers: battle_unregister: uid=2 not registered for any attack
16:19:07 [INFO] gameserver.network.rest_api: REST-WS client disconnected: uid=2
INFO:     connection closed
INFO:     192.168.178.25:56383 - "WebSocket /ws?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1aWQiOjIsImlhdCI6MTc3MTA4MTkzNCwiZXhwIjoxNzcxMTY4MzM0fQ.naiyflQGkVqMCpbS7de_ZKtKaPQ-u7yn00UzYzrbA0c" [accepted]
16:19:11 [INFO] gameserver.network.server: Session registered: uid=2
INFO:     connection open
16:19:11 [INFO] gameserver.network.rest_api: REST-WS client connected: uid=2
16:19:11 [WARNING] gameserver.network.handlers: battle_register: no attack found for uid=2 target=2
16:19:23 [WARNING] gameserver.network.handlers: battle_unregister: uid=2 not registered for any attack
16:19:23 [INFO] gameserver.network.rest_api: REST-WS client disconnected: uid=2
INFO:     connection closed
16:25:41 [WARNING] gameserver.network.handlers: Map validation failed for Empire1 (uid=2): Map must contain exactly 1 castle (found 2)
16:25:45 [INFO] gameserver.network.handlers: Map saved for empire Empire1 (uid=2): 4 tiles
16:25:46 [WARNING] gameserver.network.handlers: Map validation failed for Empire1 (uid=2): Map must contain exactly 1 castle (found 0)
16:25:49 [INFO] gameserver.network.handlers: Map saved for empire Empire1 (uid=2): 4 tiles
16:25:50 [INFO] gameserver.network.handlers: Map saved for empire Empire1 (uid=2): 4 tiles
16:33:02 [WARNING] gameserver.network.handlers: Map validation failed for Empire1 (uid=2): Map must contain exactly 1 castle (found 2)
16:33:05 [INFO] gameserver.network.handlers: Map saved for empire Empire1 (uid=2): 5 tiles
16:33:05 [INFO] gameserver.network.handlers: Map saved for empire Empire1 (uid=2): 5 tiles
16:51:54 [INFO] gameserver.network.handlers: citizen_upgrade request from uid=2
16:51:54 [INFO] gameserver.network.handlers: citizen_upgrade success uid=2
16:52:21 [WARNING] gameserver.network.handlers: Map validation failed for Empire1 (uid=2): Map must contain exactly 1 castle (found 0)
16:52:24 [INFO] gameserver.network.handlers: Map saved for empire Empire1 (uid=2): 5 tiles
16:52:25 [INFO] gameserver.network.handlers: Map saved for empire Empire1 (uid=2): 5 tiles
17:09:24 [INFO] __main__: Shutdown signal received — stopping …
17:09:24 [INFO] __main__: Shutting down …
17:09:24 [INFO] gameserver.persistence.state_save: Game state saved to state.yaml (2 empires, 0 attacks, 0 battles)
17:09:24 [INFO] websockets.server: server closing
17:09:24 [INFO] websockets.server: server closed
17:09:24 [INFO] gameserver.network.server: WebSocket server stopped
17:09:24 [INFO] __main__:   WebSocket server stopped
17:09:24 [INFO] __main__:   REST API server stopped
17:09:24 [INFO] __main__:   debug dashboard stopped
17:09:24 [INFO] __main__:   database closed
17:09:24 [INFO] __main__:   goodbye
ERROR:    Traceback (most recent call last):
  File "/home/pi/e3/.venv/lib/python3.9/site-packages/starlette/routing.py", line 701, in lifespan
    await receive()
  File "/home/pi/e3/.venv/lib/python3.9/site-packages/uvicorn/lifespan/on.py", line 137, in receive
    return await self.receive_queue.get()
  File "/usr/lib/python3.9/asyncio/queues.py", line 166, in get
    await getter
asyncio.exceptions.CancelledError

17:09:27 [INFO] __main__: === Game Server starting ===
17:09:27 [INFO] __main__: Loading configuration …
17:09:27 [INFO] __main__:   items:        210 loaded from config
17:09:27 [INFO] __main__:   map:          4 paths, 23 build tiles from config/maps/default.yaml
17:09:27 [INFO] __main__:   ai_templates: 2 entries from config/ai_templates.yaml
17:09:28 [INFO] gameserver.loaders.game_config_loader: Loaded game config from config/game.yaml (31 keys)
17:09:28 [INFO] __main__:   game_config:  loaded
17:09:28 [INFO] __main__: Initializing persistence …
17:09:28 [INFO] gameserver.persistence.database: Database connected: gameserver.db
17:09:28 [INFO] __main__:   database:     connected (gameserver.db)
17:09:28 [INFO] gameserver.persistence.state_load: Restoring state from state.yaml (saved at 2026-02-14T17:09:24, version 1)
17:09:28 [INFO] gameserver.persistence.state_load: Restored 2 empires, 0 attacks, 0 battles
17:09:28 [INFO] __main__:   state:        restored from disk (2 empires, 0 attacks)
17:09:28 [INFO] __main__: Creating services …
17:09:28 [INFO] __main__:   upgrade_provider: 210 items registered
17:09:28 [INFO] __main__:   all services created
17:09:28 [INFO] __main__: Wiring event handlers …
17:09:28 [INFO] __main__:   event handlers registered
17:09:28 [INFO] gameserver.engine.empire_service: Empire registered: uid=100 name='TestImperium'
17:09:28 [INFO] gameserver.engine.empire_service: Empire 100: recalculated effects → {}
17:09:28 [INFO] gameserver.engine.empire_service: Empire registered: uid=2 name='Empire1'
17:09:28 [INFO] gameserver.engine.empire_service: Empire 2: recalculated effects → {'life_offset': 0.001, 'gold_offset': 0.2, 'culture_offset': 0.2, 'culture_modifier': 0.1, 'gold_modifier': 0.1, 'build_speed_modifier': 0.1}
17:09:28 [INFO] __main__: Restored 2 empires from saved state
17:09:28 [INFO] __main__: Starting network servers …
17:09:28 [INFO] gameserver.network.handlers: Registered 32 message handlers: ping, summary_request, item_request, military_request, map_load_request, map_save_request, new_item, new_structure, delete_structure, upgrade_structure, citizen_upgrade, change_citizen, increase_life, new_army, new_attack_request, change_army, new_wave, change_wave, end_siege, battle_register, battle_unregister, battle_next_wave_request, notification_request, user_message, timeline_request, userinfo_request, hall_of_fame_request, preferences_request, change_preferences, auth_request, signup, create_empire
17:09:28 [INFO] websockets.server: server listening on 0.0.0.0:8765
17:09:28 [INFO] gameserver.network.server: WebSocket server listening on ws://0.0.0.0:8765
17:09:28 [INFO] __main__:   WebSocket server listening on 0.0.0.0:8765
17:09:29 [INFO] gameserver.network.rest_api: REST API created with 20 routes
17:09:29 [INFO] __main__:   REST API listening on http://0.0.0.0:8080
INFO:     Started server process [9791]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
17:09:29 [INFO] gameserver.debug.dashboard: Debug dashboard running at http://0.0.0.0:9000/
17:09:29 [INFO] __main__: Starting game loop …
17:09:29 [INFO] __main__:   game loop running (1 s tick)
INFO:     Uvicorn running on http://0.0.0.0:8080 (Press CTRL+C to quit)
17:09:39 [INFO] __main__: Shutdown signal received — stopping …
17:09:40 [INFO] __main__: Shutting down …
17:09:40 [INFO] gameserver.persistence.state_save: Game state saved to state.yaml (2 empires, 0 attacks, 0 battles)
17:09:40 [INFO] websockets.server: server closing
17:09:40 [INFO] websockets.server: server closed
17:09:40 [INFO] gameserver.network.server: WebSocket server stopped
17:09:40 [INFO] __main__:   WebSocket server stopped
17:09:40 [INFO] __main__:   REST API server stopped
17:09:40 [INFO] __main__:   debug dashboard stopped
17:09:40 [INFO] __main__:   database closed
17:09:40 [INFO] __main__:   goodbye
ERROR:    Traceback (most recent call last):
  File "/home/pi/e3/.venv/lib/python3.9/site-packages/starlette/routing.py", line 701, in lifespan
    await receive()
  File "/home/pi/e3/.venv/lib/python3.9/site-packages/uvicorn/lifespan/on.py", line 137, in receive
    return await self.receive_queue.get()
  File "/usr/lib/python3.9/asyncio/queues.py", line 166, in get
    await getter
asyncio.exceptions.CancelledError

17:09:41 [INFO] __main__: === Game Server starting ===
17:09:41 [INFO] __main__: Loading configuration …
17:09:42 [INFO] __main__:   items:        210 loaded from config
17:09:42 [INFO] __main__:   map:          4 paths, 23 build tiles from config/maps/default.yaml
17:09:42 [INFO] __main__:   ai_templates: 2 entries from config/ai_templates.yaml
17:09:42 [INFO] gameserver.loaders.game_config_loader: Loaded game config from config/game.yaml (31 keys)
17:09:42 [INFO] __main__:   game_config:  loaded
17:09:42 [INFO] __main__: Initializing persistence …
17:09:42 [INFO] gameserver.persistence.database: Database connected: gameserver.db
17:09:42 [INFO] __main__:   database:     connected (gameserver.db)
17:09:42 [INFO] gameserver.persistence.state_load: Restoring state from state2.yaml (saved at 2026-02-11T04:57:57, version 1)
17:09:42 [INFO] gameserver.persistence.state_load: Restored 2 empires, 1 attacks, 0 battles
17:09:42 [INFO] __main__:   state:        restored from disk (2 empires, 1 attacks)
17:09:42 [INFO] __main__: Creating services …
17:09:42 [INFO] __main__:   upgrade_provider: 210 items registered
17:09:42 [INFO] __main__:   all services created
17:09:42 [INFO] __main__: Wiring event handlers …
17:09:42 [INFO] __main__:   event handlers registered
17:09:42 [INFO] gameserver.engine.empire_service: Empire registered: uid=100 name='TestImperium'
17:09:42 [INFO] gameserver.engine.empire_service: Empire 100: recalculated effects → {}
17:09:42 [INFO] gameserver.engine.empire_service: Empire registered: uid=2 name='Empire1'
17:09:42 [INFO] gameserver.engine.empire_service: Empire 2: recalculated effects → {'life_offset': 0.001, 'gold_offset': 0.2, 'culture_offset': 0.2, 'culture_modifier': 0.1, 'gold_modifier': 0.1, 'build_speed_modifier': 0.1}
17:09:42 [INFO] __main__: Restored 2 empires from saved state
17:09:42 [INFO] __main__: Restored 1 attacks from saved state
17:09:42 [INFO] __main__: Starting network servers …
17:09:42 [INFO] gameserver.network.handlers: Registered 32 message handlers: ping, summary_request, item_request, military_request, map_load_request, map_save_request, new_item, new_structure, delete_structure, upgrade_structure, citizen_upgrade, change_citizen, increase_life, new_army, new_attack_request, change_army, new_wave, change_wave, end_siege, battle_register, battle_unregister, battle_next_wave_request, notification_request, user_message, timeline_request, userinfo_request, hall_of_fame_request, preferences_request, change_preferences, auth_request, signup, create_empire
17:09:42 [INFO] websockets.server: server listening on 0.0.0.0:8765
17:09:42 [INFO] gameserver.network.server: WebSocket server listening on ws://0.0.0.0:8765
17:09:42 [INFO] __main__:   WebSocket server listening on 0.0.0.0:8765
17:09:43 [INFO] gameserver.network.rest_api: REST API created with 20 routes
17:09:43 [INFO] __main__:   REST API listening on http://0.0.0.0:8080
INFO:     Started server process [9883]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
17:09:43 [INFO] gameserver.debug.dashboard: Debug dashboard running at http://0.0.0.0:9000/
17:09:43 [INFO] __main__: Starting game loop …
17:09:43 [INFO] __main__:   game loop running (1 s tick)
17:09:43 [INFO] gameserver.engine.attack_service: [STATE] Attack 1: TRAVELLING → IN_SIEGE (attacker=100, defender=2, army=1)
INFO:     Uvicorn running on http://0.0.0.0:8080 (Press CTRL+C to quit)
17:09:44 [INFO] gameserver.engine.attack_service: [STATE] Attack 1: IN_SIEGE → IN_BATTLE (attacker=100, defender=2, army=1)
17:09:44 [INFO] gameserver.network.handlers: [battle:start_requested] attack_id=1 attacker=100 defender=2 army=1
17:09:44 [ERROR] asyncio: Task exception was never retrieved
future: <Task finished name='Task-15' coro=<_create_battle_start_handler.<locals>._async_create_battle() done, defined at /home/pi/e3/python_server/src/gameserver/network/handlers.py:1604> exception=TypeError("__init__() got an unexpected keyword argument 'attacker_uids'")>
Traceback (most recent call last):
  File "/home/pi/e3/python_server/src/gameserver/network/handlers.py", line 1681, in _async_create_battle
    battle = BattleState(
TypeError: __init__() got an unexpected keyword argument 'attacker_uids'
17:10:10 [INFO] __main__: Shutdown signal received — stopping …
17:10:10 [INFO] __main__: Shutting down …
17:10:10 [INFO] gameserver.persistence.state_save: Game state saved to state.yaml (2 empires, 1 attacks, 0 battles)
17:10:10 [INFO] websockets.server: server closing
17:10:10 [INFO] websockets.server: server closed
17:10:10 [INFO] gameserver.network.server: WebSocket server stopped
17:10:10 [INFO] __main__:   WebSocket server stopped
17:10:10 [INFO] __main__:   REST API server stopped
17:10:10 [INFO] __main__:   debug dashboard stopped
17:10:10 [INFO] __main__:   database closed
17:10:10 [INFO] __main__:   goodbye
ERROR:    Traceback (most recent call last):
  File "/home/pi/e3/.venv/lib/python3.9/site-packages/starlette/routing.py", line 701, in lifespan
    await receive()
  File "/home/pi/e3/.venv/lib/python3.9/site-packages/uvicorn/lifespan/on.py", line 137, in receive
    return await self.receive_queue.get()
  File "/usr/lib/python3.9/asyncio/queues.py", line 166, in get
    await getter
asyncio.exceptions.CancelledError

17:10:12 [INFO] __main__: === Game Server starting ===
17:10:12 [INFO] __main__: Loading configuration …
17:10:13 [INFO] __main__:   items:        210 loaded from config
17:10:13 [INFO] __main__:   map:          4 paths, 23 build tiles from config/maps/default.yaml
17:10:13 [INFO] __main__:   ai_templates: 2 entries from config/ai_templates.yaml
17:10:13 [INFO] gameserver.loaders.game_config_loader: Loaded game config from config/game.yaml (31 keys)
17:10:13 [INFO] __main__:   game_config:  loaded
17:10:13 [INFO] __main__: Initializing persistence …
17:10:13 [INFO] gameserver.persistence.database: Database connected: gameserver.db
17:10:13 [INFO] __main__:   database:     connected (gameserver.db)
17:10:13 [INFO] gameserver.persistence.state_load: Restoring state from state2.yaml (saved at 2026-02-11T04:57:57, version 1)
17:10:13 [INFO] gameserver.persistence.state_load: Restored 2 empires, 1 attacks, 0 battles
17:10:13 [INFO] __main__:   state:        restored from disk (2 empires, 1 attacks)
17:10:13 [INFO] __main__: Creating services …
17:10:13 [INFO] __main__:   upgrade_provider: 210 items registered
17:10:13 [INFO] __main__:   all services created
17:10:13 [INFO] __main__: Wiring event handlers …
17:10:13 [INFO] __main__:   event handlers registered
17:10:13 [INFO] gameserver.engine.empire_service: Empire registered: uid=100 name='TestImperium'
17:10:13 [INFO] gameserver.engine.empire_service: Empire 100: recalculated effects → {}
17:10:13 [INFO] gameserver.engine.empire_service: Empire registered: uid=2 name='Empire1'
17:10:13 [INFO] gameserver.engine.empire_service: Empire 2: recalculated effects → {'life_offset': 0.001, 'gold_offset': 0.2, 'culture_offset': 0.2, 'culture_modifier': 0.1, 'gold_modifier': 0.1, 'build_speed_modifier': 0.1}
17:10:13 [INFO] __main__: Restored 2 empires from saved state
17:10:13 [INFO] __main__: Restored 1 attacks from saved state
17:10:13 [INFO] __main__: Starting network servers …
17:10:13 [INFO] gameserver.network.handlers: Registered 32 message handlers: ping, summary_request, item_request, military_request, map_load_request, map_save_request, new_item, new_structure, delete_structure, upgrade_structure, citizen_upgrade, change_citizen, increase_life, new_army, new_attack_request, change_army, new_wave, change_wave, end_siege, battle_register, battle_unregister, battle_next_wave_request, notification_request, user_message, timeline_request, userinfo_request, hall_of_fame_request, preferences_request, change_preferences, auth_request, signup, create_empire
17:10:13 [INFO] websockets.server: server listening on 0.0.0.0:8765
17:10:13 [INFO] gameserver.network.server: WebSocket server listening on ws://0.0.0.0:8765
17:10:13 [INFO] __main__:   WebSocket server listening on 0.0.0.0:8765
17:10:14 [INFO] gameserver.network.rest_api: REST API created with 20 routes
17:10:14 [INFO] __main__:   REST API listening on http://0.0.0.0:8080
INFO:     Started server process [9992]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
17:10:14 [INFO] gameserver.debug.dashboard: Debug dashboard running at http://0.0.0.0:9000/
17:10:14 [INFO] __main__: Starting game loop …
17:10:14 [INFO] __main__:   game loop running (1 s tick)
17:10:14 [INFO] gameserver.engine.attack_service: [STATE] Attack 1: TRAVELLING → IN_SIEGE (attacker=100, defender=2, army=1)
INFO:     Uvicorn running on http://0.0.0.0:8080 (Press CTRL+C to quit)
17:10:15 [INFO] gameserver.engine.attack_service: [STATE] Attack 1: IN_SIEGE → IN_BATTLE (attacker=100, defender=2, army=1)
17:10:15 [INFO] gameserver.network.handlers: [battle:start_requested] attack_id=1 attacker=100 defender=2 army=1
17:10:15 [ERROR] asyncio: Task exception was never retrieved
future: <Task finished name='Task-15' coro=<_create_battle_start_handler.<locals>._async_create_battle() done, defined at /home/pi/e3/python_server/src/gameserver/network/handlers.py:1604> exception=TypeError("__init__() got an unexpected keyword argument 'defender'")>
Traceback (most recent call last):
  File "/home/pi/e3/python_server/src/gameserver/network/handlers.py", line 1681, in _async_create_battle
    battle = BattleState(
TypeError: __init__() got an unexpected keyword argument 'defender'
17:10:33 [INFO] __main__: Shutdown signal received — stopping …
17:10:34 [INFO] __main__: Shutting down …
17:10:34 [INFO] gameserver.persistence.state_save: Game state saved to state.yaml (2 empires, 1 attacks, 0 battles)
17:10:34 [INFO] websockets.server: server closing
17:10:34 [INFO] websockets.server: server closed
17:10:34 [INFO] gameserver.network.server: WebSocket server stopped
17:10:34 [INFO] __main__:   WebSocket server stopped
17:10:34 [INFO] __main__:   REST API server stopped
17:10:34 [INFO] __main__:   debug dashboard stopped
17:10:34 [INFO] __main__:   database closed
17:10:34 [INFO] __main__:   goodbye
ERROR:    Traceback (most recent call last):
  File "/home/pi/e3/.venv/lib/python3.9/site-packages/starlette/routing.py", line 701, in lifespan
    await receive()
  File "/home/pi/e3/.venv/lib/python3.9/site-packages/uvicorn/lifespan/on.py", line 137, in receive
    return await self.receive_queue.get()
  File "/usr/lib/python3.9/asyncio/queues.py", line 166, in get
    await getter
asyncio.exceptions.CancelledError

17:10:37 [INFO] __main__: === Game Server starting ===
17:10:37 [INFO] __main__: Loading configuration …
17:10:37 [INFO] __main__:   items:        210 loaded from config
17:10:37 [INFO] __main__:   map:          4 paths, 23 build tiles from config/maps/default.yaml
17:10:37 [INFO] __main__:   ai_templates: 2 entries from config/ai_templates.yaml
17:10:37 [INFO] gameserver.loaders.game_config_loader: Loaded game config from config/game.yaml (31 keys)
17:10:37 [INFO] __main__:   game_config:  loaded
17:10:37 [INFO] __main__: Initializing persistence …
17:10:37 [INFO] gameserver.persistence.database: Database connected: gameserver.db
17:10:37 [INFO] __main__:   database:     connected (gameserver.db)
17:10:37 [INFO] gameserver.persistence.state_load: Restoring state from state2.yaml (saved at 2026-02-11T04:57:57, version 1)
17:10:37 [INFO] gameserver.persistence.state_load: Restored 2 empires, 1 attacks, 0 battles
17:10:37 [INFO] __main__:   state:        restored from disk (2 empires, 1 attacks)
17:10:37 [INFO] __main__: Creating services …
17:10:37 [INFO] __main__:   upgrade_provider: 210 items registered
17:10:37 [INFO] __main__:   all services created
17:10:37 [INFO] __main__: Wiring event handlers …
17:10:37 [INFO] __main__:   event handlers registered
17:10:37 [INFO] gameserver.engine.empire_service: Empire registered: uid=100 name='TestImperium'
17:10:37 [INFO] gameserver.engine.empire_service: Empire 100: recalculated effects → {}
17:10:37 [INFO] gameserver.engine.empire_service: Empire registered: uid=2 name='Empire1'
17:10:37 [INFO] gameserver.engine.empire_service: Empire 2: recalculated effects → {'life_offset': 0.001, 'gold_offset': 0.2, 'culture_offset': 0.2, 'culture_modifier': 0.1, 'gold_modifier': 0.1, 'build_speed_modifier': 0.1}
17:10:37 [INFO] __main__: Restored 2 empires from saved state
17:10:37 [INFO] __main__: Restored 1 attacks from saved state
17:10:37 [INFO] __main__: Starting network servers …
17:10:37 [INFO] gameserver.network.handlers: Registered 32 message handlers: ping, summary_request, item_request, military_request, map_load_request, map_save_request, new_item, new_structure, delete_structure, upgrade_structure, citizen_upgrade, change_citizen, increase_life, new_army, new_attack_request, change_army, new_wave, change_wave, end_siege, battle_register, battle_unregister, battle_next_wave_request, notification_request, user_message, timeline_request, userinfo_request, hall_of_fame_request, preferences_request, change_preferences, auth_request, signup, create_empire
17:10:37 [INFO] websockets.server: server listening on 0.0.0.0:8765
17:10:37 [INFO] gameserver.network.server: WebSocket server listening on ws://0.0.0.0:8765
17:10:37 [INFO] __main__:   WebSocket server listening on 0.0.0.0:8765
17:10:39 [INFO] gameserver.network.rest_api: REST API created with 20 routes
17:10:39 [INFO] __main__:   REST API listening on http://0.0.0.0:8080
INFO:     Started server process [10080]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
17:10:39 [INFO] gameserver.debug.dashboard: Debug dashboard running at http://0.0.0.0:9000/
17:10:39 [INFO] __main__: Starting game loop …
17:10:39 [INFO] __main__:   game loop running (1 s tick)
17:10:39 [INFO] gameserver.engine.attack_service: [STATE] Attack 1: TRAVELLING → IN_SIEGE (attacker=100, defender=2, army=1)
INFO:     Uvicorn running on http://0.0.0.0:8080 (Press CTRL+C to quit)
17:10:40 [INFO] gameserver.engine.attack_service: [STATE] Attack 1: IN_SIEGE → IN_BATTLE (attacker=100, defender=2, army=1)
17:10:40 [INFO] gameserver.network.handlers: [battle:start_requested] attack_id=1 attacker=100 defender=2 army=1
17:10:40 [INFO] gameserver.network.handlers: [battle:start_requested] SUCCESS: battle 1 created (attacker=100, defender=2)
17:10:40 [ERROR] gameserver.network.handlers: Battle loop crashed: Traceback (most recent call last):
  File "/home/pi/e3/python_server/src/gameserver/network/handlers.py", line 1490, in _run_battle_task
    await battle_svc.run_battle(battle, send_fn, broadcast_interval_ms)
  File "/home/pi/e3/python_server/src/gameserver/engine/battle_service.py", line 119, in run_battle
    battle.bid, battle.defender_uid, battle.attacker_uids)
AttributeError: 'BattleState' object has no attribute 'attacker_uids'

17:11:04 [INFO] __main__: Shutdown signal received — stopping …
17:11:05 [INFO] __main__: Shutting down …
17:11:05 [INFO] gameserver.persistence.state_save: Game state saved to state.yaml (2 empires, 1 attacks, 0 battles)
17:11:05 [INFO] websockets.server: server closing
17:11:05 [INFO] websockets.server: server closed
17:11:05 [INFO] gameserver.network.server: WebSocket server stopped
17:11:05 [INFO] __main__:   WebSocket server stopped
17:11:05 [INFO] __main__:   REST API server stopped
17:11:05 [INFO] __main__:   debug dashboard stopped
17:11:05 [INFO] __main__:   database closed
17:11:05 [INFO] __main__:   goodbye
ERROR:    Traceback (most recent call last):
  File "/home/pi/e3/.venv/lib/python3.9/site-packages/starlette/routing.py", line 701, in lifespan
    await receive()
  File "/home/pi/e3/.venv/lib/python3.9/site-packages/uvicorn/lifespan/on.py", line 137, in receive
    return await self.receive_queue.get()
  File "/usr/lib/python3.9/asyncio/queues.py", line 166, in get
    await getter
asyncio.exceptions.CancelledError

17:11:07 [INFO] __main__: === Game Server starting ===
17:11:07 [INFO] __main__: Loading configuration …
17:11:08 [INFO] __main__:   items:        210 loaded from config
17:11:08 [INFO] __main__:   map:          4 paths, 23 build tiles from config/maps/default.yaml
17:11:08 [INFO] __main__:   ai_templates: 2 entries from config/ai_templates.yaml
17:11:08 [INFO] gameserver.loaders.game_config_loader: Loaded game config from config/game.yaml (31 keys)
17:11:08 [INFO] __main__:   game_config:  loaded
17:11:08 [INFO] __main__: Initializing persistence …
17:11:08 [INFO] gameserver.persistence.database: Database connected: gameserver.db
17:11:08 [INFO] __main__:   database:     connected (gameserver.db)
17:11:08 [INFO] gameserver.persistence.state_load: Restoring state from state2.yaml (saved at 2026-02-11T04:57:57, version 1)
17:11:08 [INFO] gameserver.persistence.state_load: Restored 2 empires, 1 attacks, 0 battles
17:11:08 [INFO] __main__:   state:        restored from disk (2 empires, 1 attacks)
17:11:08 [INFO] __main__: Creating services …
17:11:08 [INFO] __main__:   upgrade_provider: 210 items registered
17:11:08 [INFO] __main__:   all services created
17:11:08 [INFO] __main__: Wiring event handlers …
17:11:08 [INFO] __main__:   event handlers registered
17:11:08 [INFO] gameserver.engine.empire_service: Empire registered: uid=100 name='TestImperium'
17:11:08 [INFO] gameserver.engine.empire_service: Empire 100: recalculated effects → {}
17:11:08 [INFO] gameserver.engine.empire_service: Empire registered: uid=2 name='Empire1'
17:11:08 [INFO] gameserver.engine.empire_service: Empire 2: recalculated effects → {'life_offset': 0.001, 'gold_offset': 0.2, 'culture_offset': 0.2, 'culture_modifier': 0.1, 'gold_modifier': 0.1, 'build_speed_modifier': 0.1}
17:11:08 [INFO] __main__: Restored 2 empires from saved state
17:11:08 [INFO] __main__: Restored 1 attacks from saved state
17:11:08 [INFO] __main__: Starting network servers …
17:11:08 [INFO] gameserver.network.handlers: Registered 32 message handlers: ping, summary_request, item_request, military_request, map_load_request, map_save_request, new_item, new_structure, delete_structure, upgrade_structure, citizen_upgrade, change_citizen, increase_life, new_army, new_attack_request, change_army, new_wave, change_wave, end_siege, battle_register, battle_unregister, battle_next_wave_request, notification_request, user_message, timeline_request, userinfo_request, hall_of_fame_request, preferences_request, change_preferences, auth_request, signup, create_empire
17:11:08 [INFO] websockets.server: server listening on 0.0.0.0:8765
17:11:08 [INFO] gameserver.network.server: WebSocket server listening on ws://0.0.0.0:8765
17:11:08 [INFO] __main__:   WebSocket server listening on 0.0.0.0:8765
17:11:10 [INFO] gameserver.network.rest_api: REST API created with 20 routes
17:11:10 [INFO] __main__:   REST API listening on http://0.0.0.0:8080
INFO:     Started server process [10186]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
17:11:10 [INFO] gameserver.debug.dashboard: Debug dashboard running at http://0.0.0.0:9000/
17:11:10 [INFO] __main__: Starting game loop …
17:11:10 [INFO] __main__:   game loop running (1 s tick)
17:11:10 [INFO] gameserver.engine.attack_service: [STATE] Attack 1: TRAVELLING → IN_SIEGE (attacker=100, defender=2, army=1)
INFO:     Uvicorn running on http://0.0.0.0:8080 (Press CTRL+C to quit)
17:11:11 [INFO] gameserver.engine.attack_service: [STATE] Attack 1: IN_SIEGE → IN_BATTLE (attacker=100, defender=2, army=1)
17:11:11 [INFO] gameserver.network.handlers: [battle:start_requested] attack_id=1 attacker=100 defender=2 army=1
17:11:11 [INFO] gameserver.network.handlers: [battle:start_requested] SUCCESS: battle 1 created (attacker=100, defender=2)
17:11:11 [INFO] gameserver.engine.battle_service: [battle_loop] Starting battle (bid=1, defender=2, attackers=100)
17:11:11 [ERROR] gameserver.network.handlers: Battle loop crashed: Traceback (most recent call last):
  File "/home/pi/e3/python_server/src/gameserver/network/handlers.py", line 1490, in _run_battle_task
    await battle_svc.run_battle(battle, send_fn, broadcast_interval_ms)
  File "/home/pi/e3/python_server/src/gameserver/engine/battle_service.py", line 127, in run_battle
    self.tick(battle, dt_ms)
  File "/home/pi/e3/python_server/src/gameserver/engine/battle_service.py", line 145, in tick
    self._step_armies(battle, dt_ms)
  File "/home/pi/e3/python_server/src/gameserver/engine/battle_service.py", line 253, in _step_armies
    if not battle.attacker:
AttributeError: 'BattleState' object has no attribute 'attacker'

17:23:11 [INFO] __main__: Shutdown signal received — stopping …
17:23:12 [INFO] __main__: Shutting down …
17:23:12 [INFO] gameserver.persistence.state_save: Game state saved to state.yaml (2 empires, 1 attacks, 0 battles)
17:23:12 [INFO] websockets.server: server closing
17:23:12 [INFO] websockets.server: server closed
17:23:12 [INFO] gameserver.network.server: WebSocket server stopped
17:23:12 [INFO] __main__:   WebSocket server stopped
17:23:12 [INFO] __main__:   REST API server stopped
17:23:12 [INFO] __main__:   debug dashboard stopped
INFO:     Shutting down
17:23:12 [INFO] __main__:   database closed
17:23:12 [INFO] __main__:   goodbye
ERROR:    Traceback (most recent call last):
  File "/home/pi/e3/.venv/lib/python3.9/site-packages/starlette/routing.py", line 701, in lifespan
    await receive()
  File "/home/pi/e3/.venv/lib/python3.9/site-packages/uvicorn/lifespan/on.py", line 137, in receive
    return await self.receive_queue.get()
  File "/usr/lib/python3.9/asyncio/queues.py", line 166, in get
    await getter
asyncio.exceptions.CancelledError

17:23:13 [INFO] __main__: === Game Server starting ===
17:23:13 [INFO] __main__: Loading configuration …
17:23:14 [INFO] __main__:   items:        210 loaded from config
17:23:14 [INFO] __main__:   map:          4 paths, 23 build tiles from config/maps/default.yaml
17:23:14 [INFO] __main__:   ai_templates: 2 entries from config/ai_templates.yaml
17:23:14 [INFO] gameserver.loaders.game_config_loader: Loaded game config from config/game.yaml (31 keys)
17:23:14 [INFO] __main__:   game_config:  loaded
17:23:14 [INFO] __main__: Initializing persistence …
17:23:14 [INFO] gameserver.persistence.database: Database connected: gameserver.db
17:23:14 [INFO] __main__:   database:     connected (gameserver.db)
17:23:14 [INFO] gameserver.persistence.state_load: Restoring state from state2.yaml (saved at 2026-02-11T04:57:57, version 1)
17:23:14 [INFO] gameserver.persistence.state_load: Restored 2 empires, 1 attacks, 0 battles
17:23:14 [INFO] __main__:   state:        restored from disk (2 empires, 1 attacks)
17:23:14 [INFO] __main__: Creating services …
17:23:14 [INFO] __main__:   upgrade_provider: 210 items registered
17:23:14 [INFO] __main__:   all services created
17:23:14 [INFO] __main__: Wiring event handlers …
17:23:14 [INFO] __main__:   event handlers registered
17:23:14 [INFO] gameserver.engine.empire_service: Empire registered: uid=100 name='TestImperium'
17:23:14 [INFO] gameserver.engine.empire_service: Empire 100: recalculated effects → {}
17:23:14 [INFO] gameserver.engine.empire_service: Empire registered: uid=2 name='Empire1'
17:23:14 [INFO] gameserver.engine.empire_service: Empire 2: recalculated effects → {'life_offset': 0.001, 'gold_offset': 0.2, 'culture_offset': 0.2, 'culture_modifier': 0.1, 'gold_modifier': 0.1, 'build_speed_modifier': 0.1}
17:23:14 [INFO] __main__: Restored 2 empires from saved state
17:23:14 [INFO] __main__: Restored 1 attacks from saved state
17:23:14 [INFO] __main__: Starting network servers …
17:23:14 [INFO] gameserver.network.handlers: Registered 32 message handlers: ping, summary_request, item_request, military_request, map_load_request, map_save_request, new_item, new_structure, delete_structure, upgrade_structure, citizen_upgrade, change_citizen, increase_life, new_army, new_attack_request, change_army, new_wave, change_wave, end_siege, battle_register, battle_unregister, battle_next_wave_request, notification_request, user_message, timeline_request, userinfo_request, hall_of_fame_request, preferences_request, change_preferences, auth_request, signup, create_empire
17:23:14 [INFO] websockets.server: server listening on 0.0.0.0:8765
17:23:14 [INFO] gameserver.network.server: WebSocket server listening on ws://0.0.0.0:8765
17:23:14 [INFO] __main__:   WebSocket server listening on 0.0.0.0:8765
17:23:15 [INFO] gameserver.network.rest_api: REST API created with 20 routes
17:23:15 [INFO] __main__:   REST API listening on http://0.0.0.0:8080
INFO:     Started server process [10841]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
17:23:15 [INFO] gameserver.debug.dashboard: Debug dashboard running at http://0.0.0.0:9000/
17:23:15 [INFO] __main__: Starting game loop …
17:23:15 [INFO] __main__:   game loop running (1 s tick)
17:23:15 [INFO] gameserver.engine.attack_service: [STATE] Attack 1: TRAVELLING → IN_SIEGE (attacker=100, defender=2, army=1)
INFO:     Uvicorn running on http://0.0.0.0:8080 (Press CTRL+C to quit)
17:23:16 [INFO] gameserver.engine.attack_service: [STATE] Attack 1: IN_SIEGE → IN_BATTLE (attacker=100, defender=2, army=1)
17:23:16 [INFO] gameserver.network.handlers: [battle:start_requested] attack_id=1 attacker=100 defender=2 army=1
17:23:16 [INFO] gameserver.network.handlers: [battle:start_requested] SUCCESS: battle 1 created (attacker=100, defender=2)
17:23:16 [INFO] gameserver.engine.battle_service: [battle_loop] Starting battle (bid=1, defender=2, attackers=100)
17:23:16 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=1 (SWORDMAN) spawned from wave 1 (progress=1/6)
17:23:18 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=2 (SWORDMAN) spawned from wave 1 (progress=2/6)
17:23:20 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=3 (SWORDMAN) spawned from wave 1 (progress=3/6)
17:23:22 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=4 (SWORDMAN) spawned from wave 1 (progress=4/6)
17:23:24 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=5 (SWORDMAN) spawned from wave 1 (progress=5/6)
17:23:26 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=6 (SWORDMAN) spawned from wave 1 (progress=6/6)
17:23:26 [ERROR] gameserver.network.handlers: Battle loop crashed: Traceback (most recent call last):
  File "/home/pi/e3/python_server/src/gameserver/network/handlers.py", line 1490, in _run_battle_task
    await battle_svc.run_battle(battle, send_fn, broadcast_interval_ms)
  File "/home/pi/e3/python_server/src/gameserver/engine/battle_service.py", line 127, in run_battle
    self.tick(battle, dt_ms)
  File "/home/pi/e3/python_server/src/gameserver/engine/battle_service.py", line 148, in tick
    self._check_finished(battle)
  File "/home/pi/e3/python_server/src/gameserver/engine/battle_service.py", line 287, in _check_finished
    for wave in battle.attacker.waves:
AttributeError: 'Empire' object has no attribute 'waves'

17:23:26 [ERROR] asyncio: Task exception was never retrieved
future: <Task finished name='Task-16' coro=<_run_battle_task() done, defined at /home/pi/e3/python_server/src/gameserver/network/handlers.py:1479> exception=AttributeError("'BattleState' object has no attribute 'defender_uid'")>
Traceback (most recent call last):
  File "/home/pi/e3/python_server/src/gameserver/network/handlers.py", line 1523, in _run_battle_task
    _active_battles.pop(battle.defender_uid, None)
AttributeError: 'BattleState' object has no attribute 'defender_uid'
17:32:54 [INFO] __main__: Shutdown signal received — stopping …
17:32:54 [INFO] __main__: Shutting down …
17:32:54 [INFO] gameserver.persistence.state_save: Game state saved to state.yaml (2 empires, 1 attacks, 0 battles)
17:32:54 [INFO] websockets.server: server closing
17:32:54 [INFO] websockets.server: server closed
17:32:54 [INFO] gameserver.network.server: WebSocket server stopped
17:32:54 [INFO] __main__:   WebSocket server stopped
17:32:54 [INFO] __main__:   REST API server stopped
17:32:54 [INFO] __main__:   debug dashboard stopped
17:32:54 [INFO] __main__:   database closed
17:32:54 [INFO] __main__:   goodbye
ERROR:    Traceback (most recent call last):
  File "/home/pi/e3/.venv/lib/python3.9/site-packages/starlette/routing.py", line 701, in lifespan
    await receive()
  File "/home/pi/e3/.venv/lib/python3.9/site-packages/uvicorn/lifespan/on.py", line 137, in receive
    return await self.receive_queue.get()
  File "/usr/lib/python3.9/asyncio/queues.py", line 166, in get
    await getter
asyncio.exceptions.CancelledError

17:32:56 [INFO] __main__: === Game Server starting ===
17:32:56 [INFO] __main__: Loading configuration …
17:32:57 [INFO] __main__:   items:        210 loaded from config
17:32:57 [INFO] __main__:   map:          4 paths, 23 build tiles from config/maps/default.yaml
17:32:57 [INFO] __main__:   ai_templates: 2 entries from config/ai_templates.yaml
17:32:57 [INFO] gameserver.loaders.game_config_loader: Loaded game config from config/game.yaml (31 keys)
17:32:57 [INFO] __main__:   game_config:  loaded
17:32:57 [INFO] __main__: Initializing persistence …
17:32:57 [INFO] gameserver.persistence.database: Database connected: gameserver.db
17:32:57 [INFO] __main__:   database:     connected (gameserver.db)
17:32:57 [INFO] gameserver.persistence.state_load: Restoring state from state2.yaml (saved at 2026-02-11T04:57:57, version 1)
17:32:57 [INFO] gameserver.persistence.state_load: Restored 2 empires, 1 attacks, 0 battles
17:32:57 [INFO] __main__:   state:        restored from disk (2 empires, 1 attacks)
17:32:57 [INFO] __main__: Creating services …
17:32:57 [INFO] __main__:   upgrade_provider: 210 items registered
17:32:57 [INFO] __main__:   all services created
17:32:57 [INFO] __main__: Wiring event handlers …
17:32:57 [INFO] __main__:   event handlers registered
17:32:57 [INFO] gameserver.engine.empire_service: Empire registered: uid=100 name='TestImperium'
17:32:57 [INFO] gameserver.engine.empire_service: Empire 100: recalculated effects → {}
17:32:57 [INFO] gameserver.engine.empire_service: Empire registered: uid=2 name='Empire1'
17:32:57 [INFO] gameserver.engine.empire_service: Empire 2: recalculated effects → {'life_offset': 0.001, 'gold_offset': 0.2, 'culture_offset': 0.2, 'culture_modifier': 0.1, 'gold_modifier': 0.1, 'build_speed_modifier': 0.1}
17:32:57 [INFO] __main__: Restored 2 empires from saved state
17:32:57 [INFO] __main__: Restored 1 attacks from saved state
17:32:57 [INFO] __main__: Starting network servers …
17:32:57 [INFO] gameserver.network.handlers: Registered 32 message handlers: ping, summary_request, item_request, military_request, map_load_request, map_save_request, new_item, new_structure, delete_structure, upgrade_structure, citizen_upgrade, change_citizen, increase_life, new_army, new_attack_request, change_army, new_wave, change_wave, end_siege, battle_register, battle_unregister, battle_next_wave_request, notification_request, user_message, timeline_request, userinfo_request, hall_of_fame_request, preferences_request, change_preferences, auth_request, signup, create_empire
17:32:57 [INFO] websockets.server: server listening on 0.0.0.0:8765
17:32:57 [INFO] gameserver.network.server: WebSocket server listening on ws://0.0.0.0:8765
17:32:57 [INFO] __main__:   WebSocket server listening on 0.0.0.0:8765
17:32:59 [INFO] gameserver.network.rest_api: REST API created with 20 routes
17:32:59 [INFO] __main__:   REST API listening on http://0.0.0.0:8080
INFO:     Started server process [11238]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
17:32:59 [INFO] gameserver.debug.dashboard: Debug dashboard running at http://0.0.0.0:9000/
17:32:59 [INFO] __main__: Starting game loop …
17:32:59 [INFO] __main__:   game loop running (1 s tick)
17:32:59 [INFO] gameserver.engine.attack_service: [STATE] Attack 1: TRAVELLING → IN_SIEGE (attacker=100, defender=2, army=1)
INFO:     Uvicorn running on http://0.0.0.0:8080 (Press CTRL+C to quit)
17:33:00 [INFO] gameserver.engine.attack_service: [STATE] Attack 1: IN_SIEGE → IN_BATTLE (attacker=100, defender=2, army=1)
17:33:00 [INFO] gameserver.network.handlers: [battle:start_requested] attack_id=1 attacker=100 defender=2 army=1
17:33:00 [INFO] gameserver.network.handlers: [battle:start_requested] SUCCESS: battle 1 created (attacker=100, defender=2)
17:33:00 [INFO] gameserver.engine.battle_service: [battle_loop] Starting battle (bid=1, defender=2, attackers=100)
17:33:00 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=1 (SWORDMAN) spawned from wave 1 (progress=1/6)
17:33:02 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=2 (SWORDMAN) spawned from wave 1 (progress=2/6)
17:33:04 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=3 (SWORDMAN) spawned from wave 1 (progress=3/6)
17:33:06 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=4 (SWORDMAN) spawned from wave 1 (progress=4/6)
17:33:08 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=5 (SWORDMAN) spawned from wave 1 (progress=5/6)
17:33:10 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=6 (SWORDMAN) spawned from wave 1 (progress=6/6)
17:33:10 [ERROR] gameserver.network.handlers: Battle loop crashed: Traceback (most recent call last):
  File "/home/pi/e3/python_server/src/gameserver/network/handlers.py", line 1490, in _run_battle_task
    await battle_svc.run_battle(battle, send_fn, broadcast_interval_ms)
  File "/home/pi/e3/python_server/src/gameserver/engine/battle_service.py", line 127, in run_battle
    self.tick(battle, dt_ms)
  File "/home/pi/e3/python_server/src/gameserver/engine/battle_service.py", line 148, in tick
    self._check_finished(battle)
  File "/home/pi/e3/python_server/src/gameserver/engine/battle_service.py", line 282, in _check_finished
    for wave in battle.attacker.waves:
AttributeError: 'Empire' object has no attribute 'waves'

17:33:10 [ERROR] asyncio: Task exception was never retrieved
future: <Task finished name='Task-16' coro=<_run_battle_task() done, defined at /home/pi/e3/python_server/src/gameserver/network/handlers.py:1479> exception=AttributeError("'BattleState' object has no attribute 'defender_uid'")>
Traceback (most recent call last):
  File "/home/pi/e3/python_server/src/gameserver/network/handlers.py", line 1523, in _run_battle_task
    _active_battles.pop(battle.defender_uid, None)
AttributeError: 'BattleState' object has no attribute 'defender_uid'
17:50:44 [INFO] __main__: Shutdown signal received — stopping …
17:50:44 [INFO] __main__: Shutting down …
17:50:44 [INFO] gameserver.persistence.state_save: Game state saved to state.yaml (2 empires, 1 attacks, 0 battles)
17:50:44 [INFO] websockets.server: server closing
17:50:44 [INFO] websockets.server: server closed
17:50:44 [INFO] gameserver.network.server: WebSocket server stopped
17:50:44 [INFO] __main__:   WebSocket server stopped
17:50:44 [INFO] __main__:   REST API server stopped
17:50:44 [INFO] __main__:   debug dashboard stopped
17:50:44 [INFO] __main__:   database closed
17:50:44 [INFO] __main__:   goodbye
ERROR:    Traceback (most recent call last):
  File "/home/pi/e3/.venv/lib/python3.9/site-packages/starlette/routing.py", line 701, in lifespan
    await receive()
  File "/home/pi/e3/.venv/lib/python3.9/site-packages/uvicorn/lifespan/on.py", line 137, in receive
    return await self.receive_queue.get()
  File "/usr/lib/python3.9/asyncio/queues.py", line 166, in get
    await getter
asyncio.exceptions.CancelledError

Traceback (most recent call last):
  File "/usr/lib/python3.9/runpy.py", line 197, in _run_module_as_main
    return _run_code(code, main_globals, None,
  File "/usr/lib/python3.9/runpy.py", line 87, in _run_code
    exec(code, run_globals)
  File "/home/pi/e3/python_server/src/gameserver/main.py", line 38, in <module>
    from gameserver.loaders.map_loader import load_map
  File "/home/pi/e3/python_server/src/gameserver/loaders/map_loader.py", line 15, in <module>
    from gameserver.models.map import Direction, HexMap
ImportError: cannot import name 'Direction' from 'gameserver.models.map' (/home/pi/e3/python_server/src/gameserver/models/map.py)
Traceback (most recent call last):
  File "/usr/lib/python3.9/runpy.py", line 197, in _run_module_as_main
    return _run_code(code, main_globals, None,
  File "/usr/lib/python3.9/runpy.py", line 87, in _run_code
    exec(code, run_globals)
  File "/home/pi/e3/python_server/src/gameserver/main.py", line 45, in <module>
    from gameserver.persistence.state_load import RestoredState, load_state
  File "/home/pi/e3/python_server/src/gameserver/persistence/state_load.py", line 18, in <module>
    from gameserver.models.battle import BattleState
  File "/home/pi/e3/python_server/src/gameserver/models/battle.py", line 15, in <module>
    from python_server.src.gameserver.models.hex import HexCoord
ModuleNotFoundError: No module named 'python_server'
Traceback (most recent call last):
  File "/usr/lib/python3.9/runpy.py", line 197, in _run_module_as_main
    return _run_code(code, main_globals, None,
  File "/usr/lib/python3.9/runpy.py", line 87, in _run_code
    exec(code, run_globals)
  File "/home/pi/e3/python_server/src/gameserver/main.py", line 45, in <module>
    from gameserver.persistence.state_load import RestoredState, load_state
  File "/home/pi/e3/python_server/src/gameserver/persistence/state_load.py", line 18, in <module>
    from gameserver.models.battle import BattleState
  File "/home/pi/e3/python_server/src/gameserver/models/battle.py", line 15, in <module>
    from python_server.src.gameserver.models.hex import HexCoord
ModuleNotFoundError: No module named 'python_server'
17:51:43 [INFO] __main__: === Game Server starting ===
17:51:43 [INFO] __main__: Loading configuration …
17:51:44 [INFO] __main__:   items:        210 loaded from config
Traceback (most recent call last):
  File "/usr/lib/python3.9/runpy.py", line 197, in _run_module_as_main
    return _run_code(code, main_globals, None,
  File "/usr/lib/python3.9/runpy.py", line 87, in _run_code
    exec(code, run_globals)
  File "/home/pi/e3/python_server/src/gameserver/main.py", line 481, in <module>
    main()
  File "/home/pi/e3/python_server/src/gameserver/main.py", line 477, in main
    asyncio.run(_start(config_dir=config_dir, state_file=state_file))
  File "/usr/lib/python3.9/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/lib/python3.9/asyncio/base_events.py", line 642, in run_until_complete
    return future.result()
  File "/home/pi/e3/python_server/src/gameserver/main.py", line 409, in _start
    config = load_configuration(config_dir=config_dir)
  File "/home/pi/e3/python_server/src/gameserver/main.py", line 142, in load_configuration
    hex_map = load_map(map_path)
  File "/home/pi/e3/python_server/src/gameserver/loaders/map_loader.py", line 43, in load_map
    ("north", Direction.NORTH),
NameError: name 'Direction' is not defined
Traceback (most recent call last):
  File "/usr/lib/python3.9/runpy.py", line 197, in _run_module_as_main
    return _run_code(code, main_globals, None,
  File "/usr/lib/python3.9/runpy.py", line 87, in _run_code
    exec(code, run_globals)
  File "/home/pi/e3/python_server/src/gameserver/main.py", line 38, in <module>
    from gameserver.loaders.map_loader import load_map
ImportError: cannot import name 'load_map' from 'gameserver.loaders.map_loader' (/home/pi/e3/python_server/src/gameserver/loaders/map_loader.py)
17:56:18 [INFO] __main__: === Game Server starting ===
17:56:18 [INFO] __main__: Loading configuration …
17:56:19 [INFO] __main__:   items:        210 loaded from config
17:56:19 [INFO] __main__:   map:          0 path tiles, 23 build tiles from config/maps/default.yaml
17:56:19 [INFO] __main__:   ai_templates: 2 entries from config/ai_templates.yaml
17:56:19 [INFO] gameserver.loaders.game_config_loader: Loaded game config from config/game.yaml (31 keys)
17:56:19 [INFO] __main__:   game_config:  loaded
17:56:19 [INFO] __main__: Initializing persistence …
17:56:19 [INFO] gameserver.persistence.database: Database connected: gameserver.db
17:56:19 [INFO] __main__:   database:     connected (gameserver.db)
17:56:19 [INFO] gameserver.persistence.state_load: Restoring state from state2.yaml (saved at 2026-02-11T04:57:57, version 1)
17:56:19 [INFO] gameserver.persistence.state_load: Restored 2 empires, 1 attacks, 0 battles
17:56:19 [INFO] __main__:   state:        restored from disk (2 empires, 1 attacks)
17:56:19 [INFO] __main__: Creating services …
17:56:19 [INFO] __main__:   upgrade_provider: 210 items registered
17:56:19 [INFO] __main__:   all services created
17:56:19 [INFO] __main__: Wiring event handlers …
17:56:19 [INFO] __main__:   event handlers registered
17:56:19 [INFO] gameserver.engine.empire_service: Empire registered: uid=100 name='TestImperium'
17:56:19 [INFO] gameserver.engine.empire_service: Empire 100: recalculated effects → {}
17:56:19 [INFO] gameserver.engine.empire_service: Empire registered: uid=2 name='Empire1'
17:56:19 [INFO] gameserver.engine.empire_service: Empire 2: recalculated effects → {'life_offset': 0.001, 'gold_offset': 0.2, 'culture_offset': 0.2, 'culture_modifier': 0.1, 'gold_modifier': 0.1, 'build_speed_modifier': 0.1}
17:56:19 [INFO] __main__: Restored 2 empires from saved state
17:56:19 [INFO] __main__: Restored 1 attacks from saved state
17:56:19 [INFO] __main__: Starting network servers …
17:56:19 [INFO] gameserver.network.handlers: Registered 32 message handlers: ping, summary_request, item_request, military_request, map_load_request, map_save_request, new_item, new_structure, delete_structure, upgrade_structure, citizen_upgrade, change_citizen, increase_life, new_army, new_attack_request, change_army, new_wave, change_wave, end_siege, battle_register, battle_unregister, battle_next_wave_request, notification_request, user_message, timeline_request, userinfo_request, hall_of_fame_request, preferences_request, change_preferences, auth_request, signup, create_empire
17:56:19 [INFO] websockets.server: server listening on 0.0.0.0:8765
17:56:19 [INFO] gameserver.network.server: WebSocket server listening on ws://0.0.0.0:8765
17:56:19 [INFO] __main__:   WebSocket server listening on 0.0.0.0:8765
17:56:20 [INFO] gameserver.network.rest_api: REST API created with 20 routes
17:56:20 [INFO] __main__:   REST API listening on http://0.0.0.0:8080
INFO:     Started server process [12647]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
17:56:20 [INFO] gameserver.debug.dashboard: Debug dashboard running at http://0.0.0.0:9000/
17:56:20 [INFO] __main__: Starting game loop …
17:56:20 [INFO] __main__:   game loop running (1 s tick)
17:56:20 [INFO] gameserver.engine.attack_service: [STATE] Attack 1: TRAVELLING → IN_SIEGE (attacker=100, defender=2, army=1)
INFO:     Uvicorn running on http://0.0.0.0:8080 (Press CTRL+C to quit)
17:56:21 [INFO] gameserver.engine.attack_service: [STATE] Attack 1: IN_SIEGE → IN_BATTLE (attacker=100, defender=2, army=1)
17:56:21 [INFO] gameserver.network.handlers: [battle:start_requested] attack_id=1 attacker=100 defender=2 army=1
17:56:21 [INFO] gameserver.network.handlers: [battle:start_requested] SUCCESS: battle 1 created (attacker=100, defender=2)
17:56:21 [INFO] gameserver.engine.battle_service: [battle_loop] Starting battle (bid=1, defender=2, attackers=100)
17:56:21 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=1 (SWORDMAN) spawned from wave 1 (progress=1/6, path_length=3)
17:56:23 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=2 (SWORDMAN) spawned from wave 1 (progress=2/6, path_length=3)
17:56:25 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=3 (SWORDMAN) spawned from wave 1 (progress=3/6, path_length=3)
17:56:27 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=4 (SWORDMAN) spawned from wave 1 (progress=4/6, path_length=3)
17:56:29 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=5 (SWORDMAN) spawned from wave 1 (progress=5/6, path_length=3)
17:56:31 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=6 (SWORDMAN) spawned from wave 1 (progress=6/6, path_length=3)
17:56:31 [ERROR] gameserver.network.handlers: Battle loop crashed: Traceback (most recent call last):
  File "/home/pi/e3/python_server/src/gameserver/network/handlers.py", line 1431, in _run_battle_task
    await battle_svc.run_battle(battle, send_fn, broadcast_interval_ms)
  File "/home/pi/e3/python_server/src/gameserver/engine/battle_service.py", line 127, in run_battle
    self.tick(battle, dt_ms)
  File "/home/pi/e3/python_server/src/gameserver/engine/battle_service.py", line 148, in tick
    self._check_finished(battle)
  File "/home/pi/e3/python_server/src/gameserver/engine/battle_service.py", line 293, in _check_finished
    for wave in battle.attacker.waves:
AttributeError: 'Empire' object has no attribute 'waves'

17:56:31 [ERROR] asyncio: Task exception was never retrieved
future: <Task finished name='Task-17' coro=<_run_battle_task() done, defined at /home/pi/e3/python_server/src/gameserver/network/handlers.py:1420> exception=AttributeError("'BattleState' object has no attribute 'defender_uid'")>
Traceback (most recent call last):
  File "/home/pi/e3/python_server/src/gameserver/network/handlers.py", line 1464, in _run_battle_task
    _active_battles.pop(battle.defender_uid, None)
AttributeError: 'BattleState' object has no attribute 'defender_uid'
17:59:15 [INFO] __main__: Shutdown signal received — stopping …
17:59:15 [INFO] __main__: Shutting down …
17:59:15 [INFO] gameserver.persistence.state_save: Game state saved to state.yaml (2 empires, 1 attacks, 0 battles)
17:59:15 [INFO] websockets.server: server closing
17:59:15 [INFO] websockets.server: server closed
17:59:15 [INFO] gameserver.network.server: WebSocket server stopped
17:59:15 [INFO] __main__:   WebSocket server stopped
17:59:15 [INFO] __main__:   REST API server stopped
17:59:15 [INFO] __main__:   debug dashboard stopped
17:59:15 [INFO] __main__:   database closed
17:59:15 [INFO] __main__:   goodbye
ERROR:    Traceback (most recent call last):
  File "/home/pi/e3/.venv/lib/python3.9/site-packages/starlette/routing.py", line 701, in lifespan
    await receive()
  File "/home/pi/e3/.venv/lib/python3.9/site-packages/uvicorn/lifespan/on.py", line 137, in receive
    return await self.receive_queue.get()
  File "/usr/lib/python3.9/asyncio/queues.py", line 166, in get
    await getter
asyncio.exceptions.CancelledError

17:59:17 [INFO] __main__: === Game Server starting ===
17:59:17 [INFO] __main__: Loading configuration …
17:59:18 [INFO] __main__:   items:        210 loaded from config
17:59:18 [INFO] __main__:   map:          0 path tiles, 23 build tiles from config/maps/default.yaml
17:59:18 [INFO] __main__:   ai_templates: 2 entries from config/ai_templates.yaml
17:59:18 [INFO] gameserver.loaders.game_config_loader: Loaded game config from config/game.yaml (31 keys)
17:59:18 [INFO] __main__:   game_config:  loaded
17:59:18 [INFO] __main__: Initializing persistence …
17:59:18 [INFO] gameserver.persistence.database: Database connected: gameserver.db
17:59:18 [INFO] __main__:   database:     connected (gameserver.db)
17:59:18 [INFO] gameserver.persistence.state_load: Restoring state from state2.yaml (saved at 2026-02-11T04:57:57, version 1)
17:59:18 [INFO] gameserver.persistence.state_load: Restored 2 empires, 1 attacks, 0 battles
17:59:18 [INFO] __main__:   state:        restored from disk (2 empires, 1 attacks)
17:59:18 [INFO] __main__: Creating services …
17:59:18 [INFO] __main__:   upgrade_provider: 210 items registered
17:59:18 [INFO] __main__:   all services created
17:59:18 [INFO] __main__: Wiring event handlers …
17:59:18 [INFO] __main__:   event handlers registered
17:59:18 [INFO] gameserver.engine.empire_service: Empire registered: uid=100 name='TestImperium'
17:59:18 [INFO] gameserver.engine.empire_service: Empire 100: recalculated effects → {}
17:59:18 [INFO] gameserver.engine.empire_service: Empire registered: uid=2 name='Empire1'
17:59:18 [INFO] gameserver.engine.empire_service: Empire 2: recalculated effects → {'life_offset': 0.001, 'gold_offset': 0.2, 'culture_offset': 0.2, 'culture_modifier': 0.1, 'gold_modifier': 0.1, 'build_speed_modifier': 0.1}
17:59:18 [INFO] __main__: Restored 2 empires from saved state
17:59:18 [INFO] __main__: Restored 1 attacks from saved state
17:59:18 [INFO] __main__: Starting network servers …
17:59:18 [INFO] gameserver.network.handlers: Registered 32 message handlers: ping, summary_request, item_request, military_request, map_load_request, map_save_request, new_item, new_structure, delete_structure, upgrade_structure, citizen_upgrade, change_citizen, increase_life, new_army, new_attack_request, change_army, new_wave, change_wave, end_siege, battle_register, battle_unregister, battle_next_wave_request, notification_request, user_message, timeline_request, userinfo_request, hall_of_fame_request, preferences_request, change_preferences, auth_request, signup, create_empire
17:59:18 [INFO] websockets.server: server listening on 0.0.0.0:8765
17:59:18 [INFO] gameserver.network.server: WebSocket server listening on ws://0.0.0.0:8765
17:59:18 [INFO] __main__:   WebSocket server listening on 0.0.0.0:8765
17:59:20 [INFO] gameserver.network.rest_api: REST API created with 20 routes
17:59:20 [INFO] __main__:   REST API listening on http://0.0.0.0:8080
INFO:     Started server process [12809]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
17:59:20 [INFO] gameserver.debug.dashboard: Debug dashboard running at http://0.0.0.0:9000/
17:59:20 [INFO] __main__: Starting game loop …
17:59:20 [INFO] __main__:   game loop running (1 s tick)
17:59:20 [INFO] gameserver.engine.attack_service: [STATE] Attack 1: TRAVELLING → IN_SIEGE (attacker=100, defender=2, army=1)
INFO:     Uvicorn running on http://0.0.0.0:8080 (Press CTRL+C to quit)
17:59:21 [INFO] gameserver.engine.attack_service: [STATE] Attack 1: IN_SIEGE → IN_BATTLE (attacker=100, defender=2, army=1)
17:59:21 [INFO] gameserver.network.handlers: [battle:start_requested] attack_id=1 attacker=100 defender=2 army=1
17:59:21 [INFO] gameserver.network.handlers: [battle:start_requested] SUCCESS: battle 1 created (attacker=100, defender=2)
17:59:21 [INFO] gameserver.engine.battle_service: [battle_loop] Starting battle (bid=1, defender=2, attackers=100)
17:59:21 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=1 (SWORDMAN) spawned from wave 1 (progress=1/6, path_length=3)
17:59:23 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=2 (SWORDMAN) spawned from wave 1 (progress=2/6, path_length=3)
17:59:25 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=3 (SWORDMAN) spawned from wave 1 (progress=3/6, path_length=3)
17:59:27 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=4 (SWORDMAN) spawned from wave 1 (progress=4/6, path_length=3)
17:59:29 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=5 (SWORDMAN) spawned from wave 1 (progress=5/6, path_length=3)
17:59:31 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=6 (SWORDMAN) spawned from wave 1 (progress=6/6, path_length=3)
17:59:35 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=7 (SLAVE) spawned from wave 2 (progress=1/4, path_length=3)
17:59:37 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=8 (SLAVE) spawned from wave 2 (progress=2/4, path_length=3)
17:59:39 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=9 (SLAVE) spawned from wave 2 (progress=3/4, path_length=3)
17:59:41 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=10 (SLAVE) spawned from wave 2 (progress=4/4, path_length=3)
17:59:51 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=1 (SWORDMAN) killed at path_progress=0.00
17:59:51 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=2 (SWORDMAN) killed at path_progress=0.00
17:59:51 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=3 (SWORDMAN) killed at path_progress=0.00
17:59:51 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=4 (SWORDMAN) killed at path_progress=0.00
17:59:51 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=5 (SWORDMAN) killed at path_progress=0.00
17:59:51 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=6 (SWORDMAN) killed at path_progress=0.00
17:59:51 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=7 (SLAVE) killed at path_progress=0.00
17:59:51 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=8 (SLAVE) killed at path_progress=0.00
17:59:51 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=9 (SLAVE) killed at path_progress=0.00
17:59:51 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.00
17:59:51 [INFO] gameserver.engine.battle_service: [FINISH] Battle bid=1 finished (defender won)
17:59:51 [INFO] gameserver.network.handlers: [battle] bid=1 complete: attacker_wins=False
17:59:51 [ERROR] gameserver.network.handlers: Battle loop crashed: Traceback (most recent call last):
  File "/home/pi/e3/python_server/src/gameserver/network/handlers.py", line 1437, in _run_battle_task
    defender_empire = svc.empire_service.get(battle.defender_uid)
AttributeError: 'BattleState' object has no attribute 'defender_uid'

17:59:51 [ERROR] asyncio: Task exception was never retrieved
future: <Task finished name='Task-15' coro=<_run_battle_task() done, defined at /home/pi/e3/python_server/src/gameserver/network/handlers.py:1420> exception=AttributeError("'BattleState' object has no attribute 'defender_uid'")>
Traceback (most recent call last):
  File "/home/pi/e3/python_server/src/gameserver/network/handlers.py", line 1464, in _run_battle_task
    _active_battles.pop(battle.defender_uid, None)
AttributeError: 'BattleState' object has no attribute 'defender_uid'
18:06:44 [INFO] __main__: Shutdown signal received — stopping …
18:06:45 [INFO] __main__: Shutting down …
18:06:45 [INFO] gameserver.persistence.state_save: Game state saved to state.yaml (2 empires, 1 attacks, 0 battles)
18:06:45 [INFO] websockets.server: server closing
18:06:45 [INFO] websockets.server: server closed
18:06:45 [INFO] gameserver.network.server: WebSocket server stopped
18:06:45 [INFO] __main__:   WebSocket server stopped
18:06:45 [INFO] __main__:   REST API server stopped
18:06:45 [INFO] __main__:   debug dashboard stopped
18:06:45 [INFO] __main__:   database closed
18:06:45 [INFO] __main__:   goodbye
ERROR:    Traceback (most recent call last):
  File "/home/pi/e3/.venv/lib/python3.9/site-packages/starlette/routing.py", line 701, in lifespan
    await receive()
  File "/home/pi/e3/.venv/lib/python3.9/site-packages/uvicorn/lifespan/on.py", line 137, in receive
    return await self.receive_queue.get()
  File "/usr/lib/python3.9/asyncio/queues.py", line 166, in get
    await getter
asyncio.exceptions.CancelledError

18:06:47 [INFO] __main__: === Game Server starting ===
18:06:47 [INFO] __main__: Loading configuration …
18:06:48 [INFO] __main__:   items:        210 loaded from config
18:06:48 [INFO] __main__:   map:          0 path tiles, 23 build tiles from config/maps/default.yaml
18:06:48 [INFO] __main__:   ai_templates: 2 entries from config/ai_templates.yaml
18:06:48 [INFO] gameserver.loaders.game_config_loader: Loaded game config from config/game.yaml (31 keys)
18:06:48 [INFO] __main__:   game_config:  loaded
18:06:48 [INFO] __main__: Initializing persistence …
18:06:48 [INFO] gameserver.persistence.database: Database connected: gameserver.db
18:06:48 [INFO] __main__:   database:     connected (gameserver.db)
18:06:48 [INFO] gameserver.persistence.state_load: Restoring state from state2.yaml (saved at 2026-02-11T04:57:57, version 1)
18:06:48 [INFO] gameserver.persistence.state_load: Restored 2 empires, 1 attacks, 0 battles
18:06:48 [INFO] __main__:   state:        restored from disk (2 empires, 1 attacks)
18:06:48 [INFO] __main__: Creating services …
18:06:48 [INFO] __main__:   upgrade_provider: 210 items registered
18:06:48 [INFO] __main__:   all services created
18:06:48 [INFO] __main__: Wiring event handlers …
18:06:48 [INFO] __main__:   event handlers registered
18:06:48 [INFO] gameserver.engine.empire_service: Empire registered: uid=100 name='TestImperium'
18:06:48 [INFO] gameserver.engine.empire_service: Empire 100: recalculated effects → {}
18:06:48 [INFO] gameserver.engine.empire_service: Empire registered: uid=2 name='Empire1'
18:06:48 [INFO] gameserver.engine.empire_service: Empire 2: recalculated effects → {'life_offset': 0.001, 'gold_offset': 0.2, 'culture_offset': 0.2, 'culture_modifier': 0.1, 'gold_modifier': 0.1, 'build_speed_modifier': 0.1}
18:06:48 [INFO] __main__: Restored 2 empires from saved state
18:06:48 [INFO] __main__: Restored 1 attacks from saved state
18:06:48 [INFO] __main__: Starting network servers …
18:06:48 [INFO] gameserver.network.handlers: Registered 32 message handlers: ping, summary_request, item_request, military_request, map_load_request, map_save_request, new_item, new_structure, delete_structure, upgrade_structure, citizen_upgrade, change_citizen, increase_life, new_army, new_attack_request, change_army, new_wave, change_wave, end_siege, battle_register, battle_unregister, battle_next_wave_request, notification_request, user_message, timeline_request, userinfo_request, hall_of_fame_request, preferences_request, change_preferences, auth_request, signup, create_empire
18:06:48 [INFO] websockets.server: server listening on 0.0.0.0:8765
18:06:48 [INFO] gameserver.network.server: WebSocket server listening on ws://0.0.0.0:8765
18:06:48 [INFO] __main__:   WebSocket server listening on 0.0.0.0:8765
18:06:49 [INFO] gameserver.network.rest_api: REST API created with 20 routes
18:06:49 [INFO] __main__:   REST API listening on http://0.0.0.0:8080
INFO:     Started server process [13098]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
18:06:49 [INFO] gameserver.debug.dashboard: Debug dashboard running at http://0.0.0.0:9000/
18:06:49 [INFO] __main__: Starting game loop …
18:06:49 [INFO] __main__:   game loop running (1 s tick)
18:06:49 [INFO] gameserver.engine.attack_service: [STATE] Attack 1: TRAVELLING → IN_SIEGE (attacker=100, defender=2, army=1)
INFO:     Uvicorn running on http://0.0.0.0:8080 (Press CTRL+C to quit)
18:06:50 [INFO] gameserver.engine.attack_service: [STATE] Attack 1: IN_SIEGE → IN_BATTLE (attacker=100, defender=2, army=1)
18:06:50 [INFO] gameserver.network.handlers: [battle:start_requested] attack_id=1 attacker=100 defender=2 army=1
18:06:50 [INFO] gameserver.network.handlers: [battle:start_requested] SUCCESS: battle 1 created (attacker=100, defender=2)
18:07:52 [INFO] __main__: Shutdown signal received — stopping …
18:07:52 [INFO] __main__: Shutting down …
18:07:52 [INFO] gameserver.persistence.state_save: Game state saved to state.yaml (2 empires, 1 attacks, 0 battles)
18:07:52 [INFO] websockets.server: server closing
18:07:52 [INFO] websockets.server: server closed
18:07:52 [INFO] gameserver.network.server: WebSocket server stopped
18:07:52 [INFO] __main__:   WebSocket server stopped
18:07:52 [INFO] __main__:   REST API server stopped
18:07:52 [INFO] __main__:   debug dashboard stopped
18:07:52 [INFO] __main__:   database closed
18:07:52 [INFO] __main__:   goodbye
ERROR:    Traceback (most recent call last):
  File "/home/pi/e3/.venv/lib/python3.9/site-packages/starlette/routing.py", line 701, in lifespan
    await receive()
  File "/home/pi/e3/.venv/lib/python3.9/site-packages/uvicorn/lifespan/on.py", line 137, in receive
    return await self.receive_queue.get()
  File "/usr/lib/python3.9/asyncio/queues.py", line 166, in get
    await getter
asyncio.exceptions.CancelledError

18:07:54 [INFO] __main__: === Game Server starting ===
18:07:54 [INFO] __main__: Loading configuration …
18:07:55 [INFO] __main__:   items:        210 loaded from config
18:07:55 [INFO] __main__:   map:          0 path tiles, 23 build tiles from config/maps/default.yaml
18:07:55 [INFO] __main__:   ai_templates: 2 entries from config/ai_templates.yaml
18:07:55 [INFO] gameserver.loaders.game_config_loader: Loaded game config from config/game.yaml (31 keys)
18:07:55 [INFO] __main__:   game_config:  loaded
18:07:55 [INFO] __main__: Initializing persistence …
18:07:55 [INFO] gameserver.persistence.database: Database connected: gameserver.db
18:07:55 [INFO] __main__:   database:     connected (gameserver.db)
18:07:55 [INFO] gameserver.persistence.state_load: Restoring state from state2.yaml (saved at 2026-02-11T04:57:57, version 1)
18:07:55 [INFO] gameserver.persistence.state_load: Restored 2 empires, 1 attacks, 0 battles
18:07:55 [INFO] __main__:   state:        restored from disk (2 empires, 1 attacks)
18:07:55 [INFO] __main__: Creating services …
18:07:55 [INFO] __main__:   upgrade_provider: 210 items registered
18:07:55 [INFO] __main__:   all services created
18:07:55 [INFO] __main__: Wiring event handlers …
18:07:55 [INFO] __main__:   event handlers registered
18:07:55 [INFO] gameserver.engine.empire_service: Empire registered: uid=100 name='TestImperium'
18:07:55 [INFO] gameserver.engine.empire_service: Empire 100: recalculated effects → {}
18:07:55 [INFO] gameserver.engine.empire_service: Empire registered: uid=2 name='Empire1'
18:07:55 [INFO] gameserver.engine.empire_service: Empire 2: recalculated effects → {'life_offset': 0.001, 'gold_offset': 0.2, 'culture_offset': 0.2, 'culture_modifier': 0.1, 'gold_modifier': 0.1, 'build_speed_modifier': 0.1}
18:07:55 [INFO] __main__: Restored 2 empires from saved state
18:07:55 [INFO] __main__: Restored 1 attacks from saved state
18:07:55 [INFO] __main__: Starting network servers …
18:07:55 [INFO] gameserver.network.handlers: Registered 32 message handlers: ping, summary_request, item_request, military_request, map_load_request, map_save_request, new_item, new_structure, delete_structure, upgrade_structure, citizen_upgrade, change_citizen, increase_life, new_army, new_attack_request, change_army, new_wave, change_wave, end_siege, battle_register, battle_unregister, battle_next_wave_request, notification_request, user_message, timeline_request, userinfo_request, hall_of_fame_request, preferences_request, change_preferences, auth_request, signup, create_empire
18:07:55 [INFO] websockets.server: server listening on 0.0.0.0:8765
18:07:55 [INFO] gameserver.network.server: WebSocket server listening on ws://0.0.0.0:8765
18:07:55 [INFO] __main__:   WebSocket server listening on 0.0.0.0:8765
18:07:56 [INFO] gameserver.network.rest_api: REST API created with 20 routes
18:07:56 [INFO] __main__:   REST API listening on http://0.0.0.0:8080
INFO:     Started server process [13200]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
18:07:56 [INFO] gameserver.debug.dashboard: Debug dashboard running at http://0.0.0.0:9000/
18:07:56 [INFO] __main__: Starting game loop …
18:07:56 [INFO] __main__:   game loop running (1 s tick)
18:07:56 [INFO] gameserver.engine.attack_service: [STATE] Attack 1: TRAVELLING → IN_SIEGE (attacker=100, defender=2, army=1)
INFO:     Uvicorn running on http://0.0.0.0:8080 (Press CTRL+C to quit)
18:07:57 [INFO] gameserver.engine.attack_service: [STATE] Attack 1: IN_SIEGE → IN_BATTLE (attacker=100, defender=2, army=1)
18:07:57 [INFO] gameserver.network.handlers: [battle:start_requested] attack_id=1 attacker=100 defender=2 army=1
18:07:57 [INFO] gameserver.network.handlers: [battle:start_requested] SUCCESS: battle 1 created (attacker=100, defender=2)
18:07:57 [INFO] gameserver.engine.battle_service: [battle_loop] Starting battle (bid=1, defender=2, attackers=100)
18:07:57 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=1 (SWORDMAN) spawned from wave 1 (progress=1/6, path_length=3)
18:07:59 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=2 (SWORDMAN) spawned from wave 1 (progress=2/6, path_length=3)
18:08:01 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=3 (SWORDMAN) spawned from wave 1 (progress=3/6, path_length=3)
18:08:03 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=4 (SWORDMAN) spawned from wave 1 (progress=4/6, path_length=3)
18:08:05 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=5 (SWORDMAN) spawned from wave 1 (progress=5/6, path_length=3)
18:08:07 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=6 (SWORDMAN) spawned from wave 1 (progress=6/6, path_length=3)
18:08:11 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=7 (SLAVE) spawned from wave 2 (progress=1/4, path_length=3)
18:08:13 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=8 (SLAVE) spawned from wave 2 (progress=2/4, path_length=3)
18:08:15 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=9 (SLAVE) spawned from wave 2 (progress=3/4, path_length=3)
18:08:17 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=10 (SLAVE) spawned from wave 2 (progress=4/4, path_length=3)
18:08:27 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=1 (SWORDMAN) killed at path_progress=0.00
18:08:27 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=2 (SWORDMAN) killed at path_progress=0.00
18:08:27 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=3 (SWORDMAN) killed at path_progress=0.00
18:08:27 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=4 (SWORDMAN) killed at path_progress=0.00
18:08:27 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=5 (SWORDMAN) killed at path_progress=0.00
18:08:27 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=6 (SWORDMAN) killed at path_progress=0.00
18:08:27 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=7 (SLAVE) killed at path_progress=0.00
18:08:27 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=8 (SLAVE) killed at path_progress=0.00
18:08:27 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=9 (SLAVE) killed at path_progress=0.00
18:08:27 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.00
18:08:27 [INFO] gameserver.engine.battle_service: [FINISH] Battle bid=1 finished (defender won)
18:08:27 [INFO] gameserver.network.handlers: [battle] bid=1 complete: attacker_wins=False
18:08:27 [ERROR] asyncio: Task exception was never retrieved
future: <Task finished name='Task-15' coro=<_run_battle_task() done, defined at /home/pi/e3/python_server/src/gameserver/network/handlers.py:1420> exception=AttributeError("'BattleState' object has no attribute 'defender_uid'")>
Traceback (most recent call last):
  File "/home/pi/e3/python_server/src/gameserver/network/handlers.py", line 1440, in _run_battle_task
    _active_battles.pop(battle.defender_uid, None)
AttributeError: 'BattleState' object has no attribute 'defender_uid'
18:08:41 [INFO] __main__: Shutdown signal received — stopping …
18:08:41 [INFO] __main__: Shutting down …
18:08:41 [INFO] gameserver.persistence.state_save: Game state saved to state.yaml (2 empires, 1 attacks, 0 battles)
18:08:41 [INFO] websockets.server: server closing
18:08:41 [INFO] websockets.server: server closed
18:08:41 [INFO] gameserver.network.server: WebSocket server stopped
18:08:41 [INFO] __main__:   WebSocket server stopped
18:08:41 [INFO] __main__:   REST API server stopped
18:08:41 [INFO] __main__:   debug dashboard stopped
18:08:41 [INFO] __main__:   database closed
18:08:41 [INFO] __main__:   goodbye
ERROR:    Traceback (most recent call last):
  File "/home/pi/e3/.venv/lib/python3.9/site-packages/starlette/routing.py", line 701, in lifespan
    await receive()
  File "/home/pi/e3/.venv/lib/python3.9/site-packages/uvicorn/lifespan/on.py", line 137, in receive
    return await self.receive_queue.get()
  File "/usr/lib/python3.9/asyncio/queues.py", line 166, in get
    await getter
asyncio.exceptions.CancelledError

18:08:43 [INFO] __main__: === Game Server starting ===
18:08:43 [INFO] __main__: Loading configuration …
18:08:44 [INFO] __main__:   items:        210 loaded from config
18:08:44 [INFO] __main__:   map:          0 path tiles, 23 build tiles from config/maps/default.yaml
18:08:44 [INFO] __main__:   ai_templates: 2 entries from config/ai_templates.yaml
18:08:44 [INFO] gameserver.loaders.game_config_loader: Loaded game config from config/game.yaml (31 keys)
18:08:44 [INFO] __main__:   game_config:  loaded
18:08:44 [INFO] __main__: Initializing persistence …
18:08:44 [INFO] gameserver.persistence.database: Database connected: gameserver.db
18:08:44 [INFO] __main__:   database:     connected (gameserver.db)
18:08:44 [INFO] gameserver.persistence.state_load: Restoring state from state2.yaml (saved at 2026-02-11T04:57:57, version 1)
18:08:44 [INFO] gameserver.persistence.state_load: Restored 2 empires, 1 attacks, 0 battles
18:08:44 [INFO] __main__:   state:        restored from disk (2 empires, 1 attacks)
18:08:44 [INFO] __main__: Creating services …
18:08:44 [INFO] __main__:   upgrade_provider: 210 items registered
18:08:44 [INFO] __main__:   all services created
18:08:44 [INFO] __main__: Wiring event handlers …
18:08:44 [INFO] __main__:   event handlers registered
18:08:44 [INFO] gameserver.engine.empire_service: Empire registered: uid=100 name='TestImperium'
18:08:44 [INFO] gameserver.engine.empire_service: Empire 100: recalculated effects → {}
18:08:44 [INFO] gameserver.engine.empire_service: Empire registered: uid=2 name='Empire1'
18:08:44 [INFO] gameserver.engine.empire_service: Empire 2: recalculated effects → {'life_offset': 0.001, 'gold_offset': 0.2, 'culture_offset': 0.2, 'culture_modifier': 0.1, 'gold_modifier': 0.1, 'build_speed_modifier': 0.1}
18:08:44 [INFO] __main__: Restored 2 empires from saved state
18:08:44 [INFO] __main__: Restored 1 attacks from saved state
18:08:44 [INFO] __main__: Starting network servers …
18:08:44 [INFO] gameserver.network.handlers: Registered 32 message handlers: ping, summary_request, item_request, military_request, map_load_request, map_save_request, new_item, new_structure, delete_structure, upgrade_structure, citizen_upgrade, change_citizen, increase_life, new_army, new_attack_request, change_army, new_wave, change_wave, end_siege, battle_register, battle_unregister, battle_next_wave_request, notification_request, user_message, timeline_request, userinfo_request, hall_of_fame_request, preferences_request, change_preferences, auth_request, signup, create_empire
18:08:44 [INFO] websockets.server: server listening on 0.0.0.0:8765
18:08:44 [INFO] gameserver.network.server: WebSocket server listening on ws://0.0.0.0:8765
18:08:44 [INFO] __main__:   WebSocket server listening on 0.0.0.0:8765
18:08:46 [INFO] gameserver.network.rest_api: REST API created with 20 routes
18:08:46 [INFO] __main__:   REST API listening on http://0.0.0.0:8080
INFO:     Started server process [13321]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
18:08:46 [INFO] gameserver.debug.dashboard: Debug dashboard running at http://0.0.0.0:9000/
18:08:46 [INFO] __main__: Starting game loop …
18:08:46 [INFO] __main__:   game loop running (1 s tick)
18:08:46 [INFO] gameserver.engine.attack_service: [STATE] Attack 1: TRAVELLING → IN_SIEGE (attacker=100, defender=2, army=1)
INFO:     Uvicorn running on http://0.0.0.0:8080 (Press CTRL+C to quit)
18:08:47 [INFO] gameserver.engine.attack_service: [STATE] Attack 1: IN_SIEGE → IN_BATTLE (attacker=100, defender=2, army=1)
18:08:47 [INFO] gameserver.network.handlers: [battle:start_requested] attack_id=1 attacker=100 defender=2 army=1
18:08:47 [INFO] gameserver.network.handlers: [battle:start_requested] SUCCESS: battle 1 created (attacker=100, defender=2)
18:08:47 [INFO] gameserver.engine.battle_service: [battle_loop] Starting battle (bid=1, defender=2, attackers=100)
18:08:47 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=1 (SWORDMAN) spawned from wave 1 (progress=1/6, path_length=3)
18:08:49 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=2 (SWORDMAN) spawned from wave 1 (progress=2/6, path_length=3)
18:08:50 [INFO] __main__: Shutdown signal received — stopping …
18:08:50 [INFO] __main__: Shutting down …
18:08:50 [INFO] gameserver.persistence.state_save: Game state saved to state.yaml (2 empires, 1 attacks, 0 battles)
18:08:50 [INFO] websockets.server: server closing
18:08:50 [INFO] websockets.server: server closed
18:08:50 [INFO] gameserver.network.server: WebSocket server stopped
18:08:50 [INFO] __main__:   WebSocket server stopped
18:08:50 [INFO] __main__:   REST API server stopped
18:08:50 [INFO] __main__:   debug dashboard stopped
18:08:50 [INFO] __main__:   database closed
18:08:50 [INFO] __main__:   goodbye
ERROR:    Traceback (most recent call last):
  File "/home/pi/e3/.venv/lib/python3.9/site-packages/starlette/routing.py", line 701, in lifespan
    await receive()
  File "/home/pi/e3/.venv/lib/python3.9/site-packages/uvicorn/lifespan/on.py", line 137, in receive
    return await self.receive_queue.get()
  File "/usr/lib/python3.9/asyncio/queues.py", line 166, in get
    await getter
asyncio.exceptions.CancelledError

18:08:52 [INFO] __main__: === Game Server starting ===
18:08:52 [INFO] __main__: Loading configuration …
18:08:53 [INFO] __main__:   items:        210 loaded from config
18:08:53 [INFO] __main__:   map:          0 path tiles, 23 build tiles from config/maps/default.yaml
18:08:53 [INFO] __main__:   ai_templates: 2 entries from config/ai_templates.yaml
18:08:53 [INFO] gameserver.loaders.game_config_loader: Loaded game config from config/game.yaml (31 keys)
18:08:53 [INFO] __main__:   game_config:  loaded
18:08:53 [INFO] __main__: Initializing persistence …
18:08:53 [INFO] gameserver.persistence.database: Database connected: gameserver.db
18:08:53 [INFO] __main__:   database:     connected (gameserver.db)
18:08:53 [INFO] gameserver.persistence.state_load: Restoring state from state2.yaml (saved at 2026-02-11T04:57:57, version 1)
18:08:53 [INFO] gameserver.persistence.state_load: Restored 2 empires, 1 attacks, 0 battles
18:08:53 [INFO] __main__:   state:        restored from disk (2 empires, 1 attacks)
18:08:53 [INFO] __main__: Creating services …
18:08:53 [INFO] __main__:   upgrade_provider: 210 items registered
18:08:53 [INFO] __main__:   all services created
18:08:53 [INFO] __main__: Wiring event handlers …
18:08:53 [INFO] __main__:   event handlers registered
18:08:53 [INFO] gameserver.engine.empire_service: Empire registered: uid=100 name='TestImperium'
18:08:53 [INFO] gameserver.engine.empire_service: Empire 100: recalculated effects → {}
18:08:53 [INFO] gameserver.engine.empire_service: Empire registered: uid=2 name='Empire1'
18:08:53 [INFO] gameserver.engine.empire_service: Empire 2: recalculated effects → {'life_offset': 0.001, 'gold_offset': 0.2, 'culture_offset': 0.2, 'culture_modifier': 0.1, 'gold_modifier': 0.1, 'build_speed_modifier': 0.1}
18:08:53 [INFO] __main__: Restored 2 empires from saved state
18:08:53 [INFO] __main__: Restored 1 attacks from saved state
18:08:53 [INFO] __main__: Starting network servers …
18:08:53 [INFO] gameserver.network.handlers: Registered 32 message handlers: ping, summary_request, item_request, military_request, map_load_request, map_save_request, new_item, new_structure, delete_structure, upgrade_structure, citizen_upgrade, change_citizen, increase_life, new_army, new_attack_request, change_army, new_wave, change_wave, end_siege, battle_register, battle_unregister, battle_next_wave_request, notification_request, user_message, timeline_request, userinfo_request, hall_of_fame_request, preferences_request, change_preferences, auth_request, signup, create_empire
18:08:53 [INFO] websockets.server: server listening on 0.0.0.0:8765
18:08:53 [INFO] gameserver.network.server: WebSocket server listening on ws://0.0.0.0:8765
18:08:53 [INFO] __main__:   WebSocket server listening on 0.0.0.0:8765
18:08:55 [INFO] gameserver.network.rest_api: REST API created with 20 routes
18:08:55 [INFO] __main__:   REST API listening on http://0.0.0.0:8080
INFO:     Started server process [13398]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
18:08:55 [INFO] gameserver.debug.dashboard: Debug dashboard running at http://0.0.0.0:9000/
18:08:55 [INFO] __main__: Starting game loop …
18:08:55 [INFO] __main__:   game loop running (1 s tick)
18:08:55 [INFO] gameserver.engine.attack_service: [STATE] Attack 1: TRAVELLING → IN_SIEGE (attacker=100, defender=2, army=1)
INFO:     Uvicorn running on http://0.0.0.0:8080 (Press CTRL+C to quit)
18:08:56 [INFO] gameserver.engine.attack_service: [STATE] Attack 1: IN_SIEGE → IN_BATTLE (attacker=100, defender=2, army=1)
18:08:56 [INFO] gameserver.network.handlers: [battle:start_requested] attack_id=1 attacker=100 defender=2 army=1
18:08:56 [ERROR] asyncio: Task exception was never retrieved
future: <Task finished name='Task-15' coro=<_create_battle_start_handler.<locals>._async_create_battle() done, defined at /home/pi/e3/python_server/src/gameserver/network/handlers.py:1521> exception=NameError("name 'defender' is not defined")>
Traceback (most recent call last):
  File "/home/pi/e3/python_server/src/gameserver/network/handlers.py", line 1594, in _async_create_battle
    _active_battles[defender.uid] = battle
NameError: name 'defender' is not defined
18:09:35 [INFO] __main__: Shutdown signal received — stopping …
18:09:36 [INFO] __main__: Shutting down …
18:09:36 [INFO] gameserver.persistence.state_save: Game state saved to state.yaml (2 empires, 1 attacks, 0 battles)
18:09:36 [INFO] websockets.server: server closing
18:09:36 [INFO] websockets.server: server closed
18:09:36 [INFO] gameserver.network.server: WebSocket server stopped
18:09:36 [INFO] __main__:   WebSocket server stopped
18:09:36 [INFO] __main__:   REST API server stopped
18:09:36 [INFO] __main__:   debug dashboard stopped
18:09:36 [INFO] __main__:   database closed
18:09:36 [INFO] __main__:   goodbye
ERROR:    Traceback (most recent call last):
  File "/home/pi/e3/.venv/lib/python3.9/site-packages/starlette/routing.py", line 701, in lifespan
    await receive()
  File "/home/pi/e3/.venv/lib/python3.9/site-packages/uvicorn/lifespan/on.py", line 137, in receive
    return await self.receive_queue.get()
  File "/usr/lib/python3.9/asyncio/queues.py", line 166, in get
    await getter
asyncio.exceptions.CancelledError

18:09:39 [INFO] __main__: === Game Server starting ===
18:09:39 [INFO] __main__: Loading configuration …
18:09:39 [INFO] __main__:   items:        210 loaded from config
18:09:39 [INFO] __main__:   map:          0 path tiles, 23 build tiles from config/maps/default.yaml
18:09:39 [INFO] __main__:   ai_templates: 2 entries from config/ai_templates.yaml
18:09:39 [INFO] gameserver.loaders.game_config_loader: Loaded game config from config/game.yaml (31 keys)
18:09:39 [INFO] __main__:   game_config:  loaded
18:09:39 [INFO] __main__: Initializing persistence …
18:09:39 [INFO] gameserver.persistence.database: Database connected: gameserver.db
18:09:39 [INFO] __main__:   database:     connected (gameserver.db)
18:09:39 [INFO] gameserver.persistence.state_load: Restoring state from state2.yaml (saved at 2026-02-11T04:57:57, version 1)
18:09:39 [INFO] gameserver.persistence.state_load: Restored 2 empires, 1 attacks, 0 battles
18:09:39 [INFO] __main__:   state:        restored from disk (2 empires, 1 attacks)
18:09:39 [INFO] __main__: Creating services …
18:09:39 [INFO] __main__:   upgrade_provider: 210 items registered
18:09:39 [INFO] __main__:   all services created
18:09:39 [INFO] __main__: Wiring event handlers …
18:09:39 [INFO] __main__:   event handlers registered
18:09:39 [INFO] gameserver.engine.empire_service: Empire registered: uid=100 name='TestImperium'
18:09:39 [INFO] gameserver.engine.empire_service: Empire 100: recalculated effects → {}
18:09:39 [INFO] gameserver.engine.empire_service: Empire registered: uid=2 name='Empire1'
18:09:39 [INFO] gameserver.engine.empire_service: Empire 2: recalculated effects → {'life_offset': 0.001, 'gold_offset': 0.2, 'culture_offset': 0.2, 'culture_modifier': 0.1, 'gold_modifier': 0.1, 'build_speed_modifier': 0.1}
18:09:39 [INFO] __main__: Restored 2 empires from saved state
18:09:39 [INFO] __main__: Restored 1 attacks from saved state
18:09:39 [INFO] __main__: Starting network servers …
18:09:39 [INFO] gameserver.network.handlers: Registered 32 message handlers: ping, summary_request, item_request, military_request, map_load_request, map_save_request, new_item, new_structure, delete_structure, upgrade_structure, citizen_upgrade, change_citizen, increase_life, new_army, new_attack_request, change_army, new_wave, change_wave, end_siege, battle_register, battle_unregister, battle_next_wave_request, notification_request, user_message, timeline_request, userinfo_request, hall_of_fame_request, preferences_request, change_preferences, auth_request, signup, create_empire
18:09:39 [INFO] websockets.server: server listening on 0.0.0.0:8765
18:09:39 [INFO] gameserver.network.server: WebSocket server listening on ws://0.0.0.0:8765
18:09:39 [INFO] __main__:   WebSocket server listening on 0.0.0.0:8765
18:09:41 [INFO] gameserver.network.rest_api: REST API created with 20 routes
18:09:41 [INFO] __main__:   REST API listening on http://0.0.0.0:8080
INFO:     Started server process [13568]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
18:09:41 [INFO] gameserver.debug.dashboard: Debug dashboard running at http://0.0.0.0:9000/
18:09:41 [INFO] __main__: Starting game loop …
18:09:41 [INFO] __main__:   game loop running (1 s tick)
18:09:41 [INFO] gameserver.engine.attack_service: [STATE] Attack 1: TRAVELLING → IN_SIEGE (attacker=100, defender=2, army=1)
INFO:     Uvicorn running on http://0.0.0.0:8080 (Press CTRL+C to quit)
18:09:42 [INFO] gameserver.engine.attack_service: [STATE] Attack 1: IN_SIEGE → IN_BATTLE (attacker=100, defender=2, army=1)
18:09:42 [INFO] gameserver.network.handlers: [battle:start_requested] attack_id=1 attacker=100 defender=2 army=1
18:09:42 [INFO] gameserver.network.handlers: [battle:start_requested] SUCCESS: battle 1 created (attacker=100, defender=2)
18:09:42 [INFO] gameserver.engine.battle_service: [battle_loop] Starting battle (bid=1, defender=2, attackers=100)
18:09:42 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=1 (SWORDMAN) spawned from wave 1 (progress=1/6, path_length=3)
18:09:44 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=2 (SWORDMAN) spawned from wave 1 (progress=2/6, path_length=3)
18:09:46 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=3 (SWORDMAN) spawned from wave 1 (progress=3/6, path_length=3)
18:09:48 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=4 (SWORDMAN) spawned from wave 1 (progress=4/6, path_length=3)
18:09:50 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=5 (SWORDMAN) spawned from wave 1 (progress=5/6, path_length=3)
18:09:51 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=6 (SWORDMAN) spawned from wave 1 (progress=6/6, path_length=3)
18:09:56 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=7 (SLAVE) spawned from wave 2 (progress=1/4, path_length=3)
18:09:58 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=8 (SLAVE) spawned from wave 2 (progress=2/4, path_length=3)
18:10:00 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=9 (SLAVE) spawned from wave 2 (progress=3/4, path_length=3)
18:10:02 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=10 (SLAVE) spawned from wave 2 (progress=4/4, path_length=3)
18:10:12 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=1 (SWORDMAN) killed at path_progress=0.00
18:10:12 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=2 (SWORDMAN) killed at path_progress=0.00
18:10:12 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=3 (SWORDMAN) killed at path_progress=0.00
18:10:12 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=4 (SWORDMAN) killed at path_progress=0.00
18:10:12 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=5 (SWORDMAN) killed at path_progress=0.00
18:10:12 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=6 (SWORDMAN) killed at path_progress=0.00
18:10:12 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=7 (SLAVE) killed at path_progress=0.00
18:10:12 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=8 (SLAVE) killed at path_progress=0.00
18:10:12 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=9 (SLAVE) killed at path_progress=0.00
18:10:12 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.00
18:10:12 [INFO] gameserver.engine.battle_service: [FINISH] Battle bid=1 finished (defender won)
18:10:12 [INFO] gameserver.network.handlers: [battle] bid=1 complete: attacker_wins=False
18:14:58 [INFO] __main__: Shutdown signal received — stopping …
18:14:58 [INFO] __main__: Shutting down …
18:14:58 [INFO] gameserver.persistence.state_save: Game state saved to state.yaml (2 empires, 1 attacks, 0 battles)
18:14:58 [INFO] websockets.server: server closing
18:14:58 [INFO] websockets.server: server closed
18:14:58 [INFO] gameserver.network.server: WebSocket server stopped
18:14:58 [INFO] __main__:   WebSocket server stopped
18:14:58 [INFO] __main__:   REST API server stopped
18:14:58 [INFO] __main__:   debug dashboard stopped
18:14:58 [INFO] __main__:   database closed
18:14:58 [INFO] __main__:   goodbye
ERROR:    Traceback (most recent call last):
  File "/home/pi/e3/.venv/lib/python3.9/site-packages/starlette/routing.py", line 701, in lifespan
    await receive()
  File "/home/pi/e3/.venv/lib/python3.9/site-packages/uvicorn/lifespan/on.py", line 137, in receive
    return await self.receive_queue.get()
  File "/usr/lib/python3.9/asyncio/queues.py", line 166, in get
    await getter
asyncio.exceptions.CancelledError

18:15:00 [INFO] __main__: === Game Server starting ===
18:15:00 [INFO] __main__: Loading configuration …
18:15:01 [INFO] __main__:   items:        210 loaded from config
18:15:01 [INFO] __main__:   map:          0 path tiles, 23 build tiles from config/maps/default.yaml
18:15:01 [INFO] __main__:   ai_templates: 2 entries from config/ai_templates.yaml
18:15:01 [INFO] gameserver.loaders.game_config_loader: Loaded game config from config/game.yaml (31 keys)
18:15:01 [INFO] __main__:   game_config:  loaded
18:15:01 [INFO] __main__: Initializing persistence …
18:15:01 [INFO] gameserver.persistence.database: Database connected: gameserver.db
18:15:01 [INFO] __main__:   database:     connected (gameserver.db)
18:15:01 [INFO] gameserver.persistence.state_load: Restoring state from state2.yaml (saved at 2026-02-11T04:57:57, version 1)
18:15:01 [INFO] gameserver.persistence.state_load: Restored 2 empires, 1 attacks, 0 battles
18:15:01 [INFO] __main__:   state:        restored from disk (2 empires, 1 attacks)
18:15:01 [INFO] __main__: Creating services …
18:15:01 [INFO] __main__:   upgrade_provider: 210 items registered
18:15:01 [INFO] __main__:   all services created
18:15:01 [INFO] __main__: Wiring event handlers …
18:15:01 [INFO] __main__:   event handlers registered
18:15:01 [INFO] gameserver.engine.empire_service: Empire registered: uid=100 name='TestImperium'
18:15:01 [INFO] gameserver.engine.empire_service: Empire 100: recalculated effects → {}
18:15:01 [INFO] gameserver.engine.empire_service: Empire registered: uid=2 name='Empire1'
18:15:01 [INFO] gameserver.engine.empire_service: Empire 2: recalculated effects → {'life_offset': 0.001, 'gold_offset': 0.2, 'culture_offset': 0.2, 'culture_modifier': 0.1, 'gold_modifier': 0.1, 'build_speed_modifier': 0.1}
18:15:01 [INFO] __main__: Restored 2 empires from saved state
18:15:01 [INFO] __main__: Restored 1 attacks from saved state
18:15:01 [INFO] __main__: Starting network servers …
18:15:01 [INFO] gameserver.network.handlers: Registered 32 message handlers: ping, summary_request, item_request, military_request, map_load_request, map_save_request, new_item, new_structure, delete_structure, upgrade_structure, citizen_upgrade, change_citizen, increase_life, new_army, new_attack_request, change_army, new_wave, change_wave, end_siege, battle_register, battle_unregister, battle_next_wave_request, notification_request, user_message, timeline_request, userinfo_request, hall_of_fame_request, preferences_request, change_preferences, auth_request, signup, create_empire
18:15:01 [INFO] websockets.server: server listening on 0.0.0.0:8765
18:15:01 [INFO] gameserver.network.server: WebSocket server listening on ws://0.0.0.0:8765
18:15:01 [INFO] __main__:   WebSocket server listening on 0.0.0.0:8765
18:15:03 [INFO] gameserver.network.rest_api: REST API created with 20 routes
18:15:03 [INFO] __main__:   REST API listening on http://0.0.0.0:8080
INFO:     Started server process [13809]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
18:15:03 [INFO] gameserver.debug.dashboard: Debug dashboard running at http://0.0.0.0:9000/
18:15:03 [INFO] __main__: Starting game loop …
18:15:03 [INFO] __main__:   game loop running (1 s tick)
18:15:03 [INFO] gameserver.engine.attack_service: [STATE] Attack 1: TRAVELLING → IN_SIEGE (attacker=100, defender=2, army=1)
INFO:     Uvicorn running on http://0.0.0.0:8080 (Press CTRL+C to quit)
18:15:04 [INFO] gameserver.engine.attack_service: [STATE] Attack 1: IN_SIEGE → IN_BATTLE (attacker=100, defender=2, army=1)
18:15:04 [INFO] gameserver.network.handlers: [battle:start_requested] attack_id=1 attacker=100 defender=2 army=1
18:15:04 [INFO] gameserver.network.handlers: [battle:start_requested] SUCCESS: battle 1 created (attacker=100, defender=2)
18:15:04 [INFO] gameserver.engine.battle_service: [battle_loop] Starting battle (bid=1, defender=2, attackers=100)
18:15:04 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=1 (SWORDMAN) spawned from wave 1 (progress=1/6, path_length=3)
18:15:06 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=2 (SWORDMAN) spawned from wave 1 (progress=2/6, path_length=3)
18:15:07 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=3 (SWORDMAN) spawned from wave 1 (progress=3/6, path_length=3)
18:15:09 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=4 (SWORDMAN) spawned from wave 1 (progress=4/6, path_length=3)
18:15:11 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=5 (SWORDMAN) spawned from wave 1 (progress=5/6, path_length=3)
18:15:13 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=6 (SWORDMAN) spawned from wave 1 (progress=6/6, path_length=3)
18:15:14 [ERROR] gameserver.network.handlers: Battle loop crashed: Traceback (most recent call last):
  File "/home/pi/e3/python_server/src/gameserver/network/handlers.py", line 1431, in _run_battle_task
    await battle_svc.run_battle(battle, send_fn, broadcast_interval_ms)
  File "/home/pi/e3/python_server/src/gameserver/engine/battle_service.py", line 127, in run_battle
    self.tick(battle, dt_ms)
  File "/home/pi/e3/python_server/src/gameserver/engine/battle_service.py", line 143, in tick
    self._step_critters(battle, dt_ms)
  File "/home/pi/e3/python_server/src/gameserver/engine/battle_service.py", line 178, in _step_critters
    self._critter_finished(battle, critter)
  File "/home/pi/e3/python_server/src/gameserver/engine/battle_service.py", line 354, in _critter_finished
    battle.finished_critter_ids.append(critter.cid)
AttributeError: 'BattleState' object has no attribute 'finished_critter_ids'

INFO:     192.168.178.25:56473 - "WebSocket /ws?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1aWQiOjIsImlhdCI6MTc3MTA4MTkzNCwiZXhwIjoxNzcxMTY4MzM0fQ.naiyflQGkVqMCpbS7de_ZKtKaPQ-u7yn00UzYzrbA0c" [accepted]
18:30:29 [INFO] gameserver.network.server: Session registered: uid=2
INFO:     connection open
18:30:29 [INFO] gameserver.network.rest_api: REST-WS client connected: uid=2
18:30:29 [INFO] gameserver.network.handlers: battle_register: uid=2 registered for attack 1 (phase=in_battle)
18:30:29 [INFO] gameserver.network.handlers: _send_battle_setup: sent to uid=2 (attack_id=1)
18:30:34 [INFO] gameserver.network.handlers: battle_unregister: uid=2 unregistered from attack 1
18:30:34 [INFO] gameserver.network.rest_api: REST-WS client disconnected: uid=2
INFO:     connection closed
18:57:16 [INFO] __main__: Shutdown signal received — stopping …
18:57:17 [INFO] __main__: Shutting down …
18:57:17 [INFO] gameserver.persistence.state_save: Game state saved to state.yaml (2 empires, 1 attacks, 0 battles)
18:57:17 [INFO] websockets.server: server closing
18:57:17 [INFO] websockets.server: server closed
18:57:17 [INFO] gameserver.network.server: WebSocket server stopped
18:57:17 [INFO] __main__:   WebSocket server stopped
18:57:17 [INFO] __main__:   REST API server stopped
18:57:17 [INFO] __main__:   debug dashboard stopped
18:57:17 [INFO] __main__:   database closed
18:57:17 [INFO] __main__:   goodbye
ERROR:    Traceback (most recent call last):
  File "/home/pi/e3/.venv/lib/python3.9/site-packages/starlette/routing.py", line 701, in lifespan
    await receive()
  File "/home/pi/e3/.venv/lib/python3.9/site-packages/uvicorn/lifespan/on.py", line 137, in receive
    return await self.receive_queue.get()
  File "/usr/lib/python3.9/asyncio/queues.py", line 166, in get
    await getter
asyncio.exceptions.CancelledError

18:57:19 [INFO] __main__: === Game Server starting ===
18:57:19 [INFO] __main__: Loading configuration …
18:57:19 [INFO] __main__:   items:        210 loaded from config
18:57:19 [INFO] __main__:   map:          0 path tiles, 23 build tiles from config/maps/default.yaml
18:57:19 [INFO] __main__:   ai_templates: 2 entries from config/ai_templates.yaml
18:57:19 [INFO] gameserver.loaders.game_config_loader: Loaded game config from config/game.yaml (31 keys)
18:57:19 [INFO] __main__:   game_config:  loaded
18:57:19 [INFO] __main__: Initializing persistence …
18:57:19 [INFO] gameserver.persistence.database: Database connected: gameserver.db
18:57:19 [INFO] __main__:   database:     connected (gameserver.db)
18:57:19 [INFO] gameserver.persistence.state_load: Restoring state from state2.yaml (saved at 2026-02-11T04:57:57, version 1)
18:57:19 [INFO] gameserver.persistence.state_load: Restored 2 empires, 1 attacks, 0 battles
18:57:19 [INFO] __main__:   state:        restored from disk (2 empires, 1 attacks)
18:57:20 [INFO] __main__: Creating services …
18:57:20 [INFO] __main__:   upgrade_provider: 210 items registered
18:57:20 [INFO] __main__:   all services created
18:57:20 [INFO] __main__: Wiring event handlers …
18:57:20 [INFO] __main__:   event handlers registered
18:57:20 [INFO] gameserver.engine.empire_service: Empire registered: uid=100 name='TestImperium'
18:57:20 [INFO] gameserver.engine.empire_service: Empire 100: recalculated effects → {}
18:57:20 [INFO] gameserver.engine.empire_service: Empire registered: uid=2 name='Empire1'
18:57:20 [INFO] gameserver.engine.empire_service: Empire 2: recalculated effects → {'life_offset': 0.001, 'gold_offset': 0.2, 'culture_offset': 0.2, 'culture_modifier': 0.1, 'gold_modifier': 0.1, 'build_speed_modifier': 0.1}
18:57:20 [INFO] __main__: Restored 2 empires from saved state
18:57:20 [INFO] __main__: Restored 1 attacks from saved state
18:57:20 [INFO] __main__: Starting network servers …
18:57:20 [INFO] gameserver.network.handlers: Registered 32 message handlers: ping, summary_request, item_request, military_request, map_load_request, map_save_request, new_item, new_structure, delete_structure, upgrade_structure, citizen_upgrade, change_citizen, increase_life, new_army, new_attack_request, change_army, new_wave, change_wave, end_siege, battle_register, battle_unregister, battle_next_wave_request, notification_request, user_message, timeline_request, userinfo_request, hall_of_fame_request, preferences_request, change_preferences, auth_request, signup, create_empire
18:57:20 [INFO] websockets.server: server listening on 0.0.0.0:8765
18:57:20 [INFO] gameserver.network.server: WebSocket server listening on ws://0.0.0.0:8765
18:57:20 [INFO] __main__:   WebSocket server listening on 0.0.0.0:8765
18:57:21 [INFO] gameserver.network.rest_api: REST API created with 20 routes
18:57:21 [INFO] __main__:   REST API listening on http://0.0.0.0:8080
INFO:     Started server process [14743]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
18:57:21 [INFO] gameserver.debug.dashboard: Debug dashboard running at http://0.0.0.0:9000/
18:57:21 [INFO] __main__: Starting game loop …
18:57:21 [INFO] __main__:   game loop running (1 s tick)
18:57:21 [INFO] gameserver.engine.attack_service: [STATE] Attack 1: TRAVELLING → IN_SIEGE (attacker=100, defender=2, army=1)
INFO:     Uvicorn running on http://0.0.0.0:8080 (Press CTRL+C to quit)
18:57:22 [INFO] gameserver.engine.attack_service: [STATE] Attack 1: IN_SIEGE → IN_BATTLE (attacker=100, defender=2, army=1)
18:57:22 [INFO] gameserver.network.handlers: [battle:start_requested] attack_id=1 attacker=100 defender=2 army=1
18:57:22 [INFO] gameserver.network.handlers: [battle:start_requested] SUCCESS: battle 1 created (attacker=100, defender=2)
18:57:22 [INFO] gameserver.engine.battle_service: [battle_loop] Starting battle (bid=1, defender=2, attackers=100)
18:57:22 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=1 (SWORDMAN) spawned from wave 1 (progress=1/6, path_length=3)
18:57:24 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=2 (SWORDMAN) spawned from wave 1 (progress=2/6, path_length=3)
18:57:26 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=3 (SWORDMAN) spawned from wave 1 (progress=3/6, path_length=3)
18:57:28 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=4 (SWORDMAN) spawned from wave 1 (progress=4/6, path_length=3)
18:57:30 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=5 (SWORDMAN) spawned from wave 1 (progress=5/6, path_length=3)
18:57:31 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=6 (SWORDMAN) spawned from wave 1 (progress=6/6, path_length=3)
18:57:36 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=7 (SLAVE) spawned from wave 2 (progress=1/4, path_length=3)
18:57:38 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=8 (SLAVE) spawned from wave 2 (progress=2/4, path_length=3)
18:57:40 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=9 (SLAVE) spawned from wave 2 (progress=3/4, path_length=3)
18:57:42 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=10 (SLAVE) spawned from wave 2 (progress=4/4, path_length=3)
18:57:52 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:57:52 [INFO] gameserver.engine.battle_service: [FINISH] Battle bid=1 finished (defender won)
18:57:52 [INFO] gameserver.network.handlers: [battle] bid=1 complete: attacker_wins=False
18:59:09 [INFO] __main__: Shutdown signal received — stopping …
18:59:09 [INFO] __main__: Shutting down …
18:59:09 [INFO] gameserver.persistence.state_save: Game state saved to state.yaml (2 empires, 1 attacks, 0 battles)
18:59:09 [INFO] websockets.server: server closing
18:59:09 [INFO] websockets.server: server closed
18:59:09 [INFO] gameserver.network.server: WebSocket server stopped
18:59:09 [INFO] __main__:   WebSocket server stopped
18:59:09 [INFO] __main__:   REST API server stopped
18:59:09 [INFO] __main__:   debug dashboard stopped
18:59:09 [INFO] __main__:   database closed
18:59:09 [INFO] __main__:   goodbye
ERROR:    Traceback (most recent call last):
  File "/home/pi/e3/.venv/lib/python3.9/site-packages/starlette/routing.py", line 701, in lifespan
    await receive()
  File "/home/pi/e3/.venv/lib/python3.9/site-packages/uvicorn/lifespan/on.py", line 137, in receive
    return await self.receive_queue.get()
  File "/usr/lib/python3.9/asyncio/queues.py", line 166, in get
    await getter
asyncio.exceptions.CancelledError

18:59:11 [INFO] __main__: === Game Server starting ===
18:59:11 [INFO] __main__: Loading configuration …
18:59:12 [INFO] __main__:   items:        210 loaded from config
18:59:12 [INFO] __main__:   map:          0 path tiles, 23 build tiles from config/maps/default.yaml
18:59:12 [INFO] __main__:   ai_templates: 2 entries from config/ai_templates.yaml
18:59:12 [INFO] gameserver.loaders.game_config_loader: Loaded game config from config/game.yaml (31 keys)
18:59:12 [INFO] __main__:   game_config:  loaded
18:59:12 [INFO] __main__: Initializing persistence …
18:59:12 [INFO] gameserver.persistence.database: Database connected: gameserver.db
18:59:12 [INFO] __main__:   database:     connected (gameserver.db)
18:59:12 [INFO] gameserver.persistence.state_load: Restoring state from state2.yaml (saved at 2026-02-11T04:57:57, version 1)
18:59:12 [INFO] gameserver.persistence.state_load: Restored 2 empires, 1 attacks, 0 battles
18:59:12 [INFO] __main__:   state:        restored from disk (2 empires, 1 attacks)
18:59:12 [INFO] __main__: Creating services …
18:59:12 [INFO] __main__:   upgrade_provider: 210 items registered
18:59:12 [INFO] __main__:   all services created
18:59:12 [INFO] __main__: Wiring event handlers …
18:59:12 [INFO] __main__:   event handlers registered
18:59:12 [INFO] gameserver.engine.empire_service: Empire registered: uid=100 name='TestImperium'
18:59:12 [INFO] gameserver.engine.empire_service: Empire 100: recalculated effects → {}
18:59:12 [INFO] gameserver.engine.empire_service: Empire registered: uid=2 name='Empire1'
18:59:12 [INFO] gameserver.engine.empire_service: Empire 2: recalculated effects → {'life_offset': 0.001, 'gold_offset': 0.2, 'culture_offset': 0.2, 'culture_modifier': 0.1, 'gold_modifier': 0.1, 'build_speed_modifier': 0.1}
18:59:12 [INFO] __main__: Restored 2 empires from saved state
18:59:12 [INFO] __main__: Restored 1 attacks from saved state
18:59:12 [INFO] __main__: Starting network servers …
18:59:12 [INFO] gameserver.network.handlers: Registered 32 message handlers: ping, summary_request, item_request, military_request, map_load_request, map_save_request, new_item, new_structure, delete_structure, upgrade_structure, citizen_upgrade, change_citizen, increase_life, new_army, new_attack_request, change_army, new_wave, change_wave, end_siege, battle_register, battle_unregister, battle_next_wave_request, notification_request, user_message, timeline_request, userinfo_request, hall_of_fame_request, preferences_request, change_preferences, auth_request, signup, create_empire
18:59:12 [INFO] websockets.server: server listening on 0.0.0.0:8765
18:59:12 [INFO] gameserver.network.server: WebSocket server listening on ws://0.0.0.0:8765
18:59:12 [INFO] __main__:   WebSocket server listening on 0.0.0.0:8765
18:59:14 [INFO] gameserver.network.rest_api: REST API created with 20 routes
18:59:14 [INFO] __main__:   REST API listening on http://0.0.0.0:8080
INFO:     Started server process [14919]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
18:59:14 [INFO] gameserver.debug.dashboard: Debug dashboard running at http://0.0.0.0:9000/
18:59:14 [INFO] __main__: Starting game loop …
18:59:14 [INFO] __main__:   game loop running (1 s tick)
18:59:14 [INFO] gameserver.engine.attack_service: [STATE] Attack 1: TRAVELLING → IN_SIEGE (attacker=100, defender=2, army=1)
INFO:     Uvicorn running on http://0.0.0.0:8080 (Press CTRL+C to quit)
18:59:15 [INFO] gameserver.engine.attack_service: [STATE] Attack 1: IN_SIEGE → IN_BATTLE (attacker=100, defender=2, army=1)
18:59:15 [INFO] gameserver.network.handlers: [battle:start_requested] attack_id=1 attacker=100 defender=2 army=1
18:59:15 [INFO] gameserver.network.handlers: [battle:start_requested] SUCCESS: battle 1 created (attacker=100, defender=2)
18:59:15 [INFO] gameserver.engine.battle_service: [battle_loop] Starting battle (bid=1, defender=2, attackers=100)
18:59:15 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=1 (SWORDMAN) spawned from wave 1 (progress=1/6, path_length=3)
18:59:17 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=2 (SWORDMAN) spawned from wave 1 (progress=2/6, path_length=3)
18:59:19 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=3 (SWORDMAN) spawned from wave 1 (progress=3/6, path_length=3)
18:59:20 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=4 (SWORDMAN) spawned from wave 1 (progress=4/6, path_length=3)
18:59:22 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=5 (SWORDMAN) spawned from wave 1 (progress=5/6, path_length=3)
18:59:24 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=6 (SWORDMAN) spawned from wave 1 (progress=6/6, path_length=3)
18:59:29 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=7 (SLAVE) spawned from wave 2 (progress=1/4, path_length=3)
18:59:31 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=8 (SLAVE) spawned from wave 2 (progress=2/4, path_length=3)
18:59:33 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=9 (SLAVE) spawned from wave 2 (progress=3/4, path_length=3)
18:59:35 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=10 (SLAVE) spawned from wave 2 (progress=4/4, path_length=3)
18:59:45 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:45 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:45 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:45 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:45 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:45 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:45 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:45 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:45 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:45 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:45 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:45 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:45 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:45 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:45 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:45 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:45 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:45 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:45 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:45 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:45 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:45 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:45 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:45 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:45 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:45 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:45 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:45 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:45 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:45 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:45 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:45 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:45 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:45 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:45 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:45 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:45 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:45 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:45 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:45 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:45 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:45 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:45 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:45 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:45 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:45 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:45 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:45 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:45 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:45 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:45 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:46 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:46 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:46 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:46 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:46 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:46 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:46 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:46 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:46 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:46 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:46 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:46 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:46 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:46 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:46 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:46 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:46 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:46 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:46 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:46 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:46 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:46 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:46 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:46 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:46 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:46 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:46 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:46 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:46 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:46 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:46 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:46 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:46 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:46 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:46 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:46 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:46 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:46 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:46 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:46 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:46 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:46 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:46 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:46 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:46 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:46 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:46 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:46 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:46 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:46 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:46 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:46 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:46 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:46 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:46 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:46 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:46 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:46 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:46 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:46 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:46 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:47 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:47 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:47 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:47 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:47 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:47 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:47 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:47 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:47 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:47 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:47 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:47 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:47 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:47 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:47 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:47 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:47 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:47 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:47 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:47 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:47 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:47 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:47 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:47 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:47 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:47 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:47 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:47 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:47 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:47 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:47 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:47 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:47 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:47 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:47 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:47 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:47 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:47 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:47 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:47 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:47 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:47 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:47 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:47 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:47 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:47 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:47 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:47 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:47 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:47 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:47 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:47 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:47 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:47 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:47 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:47 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:47 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:47 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:47 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:47 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:47 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:47 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:47 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:48 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:48 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:48 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:48 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:48 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:48 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:48 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:48 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:48 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:48 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:48 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:48 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:48 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:48 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:48 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:48 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:48 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:48 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:48 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:48 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:48 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:48 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:48 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:48 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:48 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:48 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:48 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:48 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:48 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:48 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:48 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:48 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:48 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:48 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:48 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:48 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:48 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:48 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:48 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:48 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:48 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:48 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:48 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:48 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:48 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:48 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:48 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:48 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:48 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:48 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:48 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:48 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:48 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:48 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:48 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:48 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:48 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:48 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:48 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:48 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:48 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:48 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:49 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:49 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:49 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:49 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:49 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:49 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:49 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:49 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:49 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:49 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:49 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:49 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:49 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:49 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:49 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:49 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:49 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:49 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:49 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:49 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:49 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:49 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:49 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:49 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:49 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:49 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:49 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:49 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:49 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:49 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:49 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:49 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:49 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:49 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:49 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:49 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:49 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:49 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:49 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:49 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:49 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:49 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:49 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:49 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:49 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:49 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:49 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:49 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:49 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:49 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:49 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:49 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:49 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:49 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:49 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:49 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:49 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:49 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:49 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:49 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:49 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:50 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:50 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:50 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:50 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:50 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:50 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:50 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:50 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:50 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:50 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:50 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:50 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:50 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:50 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:50 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:50 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:50 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:50 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:50 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:50 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:50 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:50 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:50 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:50 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:50 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:50 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:50 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:50 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:50 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:50 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:50 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:50 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:50 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:50 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:50 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:50 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:50 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:50 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:50 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:50 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:50 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:50 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:50 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:50 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:50 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:50 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:50 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:50 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:50 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:50 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:50 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:50 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:50 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:50 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:50 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:50 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:50 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:50 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:50 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:50 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:50 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:50 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:51 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:51 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:51 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:51 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:51 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:51 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:51 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:51 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:51 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:51 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:51 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:51 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:51 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:51 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:51 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:51 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:51 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:51 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:51 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:51 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:51 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:51 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:51 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:51 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:51 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:51 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:51 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:51 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:51 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:51 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:51 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:51 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:51 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:51 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:51 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:51 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:51 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:51 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:51 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:51 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:51 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:51 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:51 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:51 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:51 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:51 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:51 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:51 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:51 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:51 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:51 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:51 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:51 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:51 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:51 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:51 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:51 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:51 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:51 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:51 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:52 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:52 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:52 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:52 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:52 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:52 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:52 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:52 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:52 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:52 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:52 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:52 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:52 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:52 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:52 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:52 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:52 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:52 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:52 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:52 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:52 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:52 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:52 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:52 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:52 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:52 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:52 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:52 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:52 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:52 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:52 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:52 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:52 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:52 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:52 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:52 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:52 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:52 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:52 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:52 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:52 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:52 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:52 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:52 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:52 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:52 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:52 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:52 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:52 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:52 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:52 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:52 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:52 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:52 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:52 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:52 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:52 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:52 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:52 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:52 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:52 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:52 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:52 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:53 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:53 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:53 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:53 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:53 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:53 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:53 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:53 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:53 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:53 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:53 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:53 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:53 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:53 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:53 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:53 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:53 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:53 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:53 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:53 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:53 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:53 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:53 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:53 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:53 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:53 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:53 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:53 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:53 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:53 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:53 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:53 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:53 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:53 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:53 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:53 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:53 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:53 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:53 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:53 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:53 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:53 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:53 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:53 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:53 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:53 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:53 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:53 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:53 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:53 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:53 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:53 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:53 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:53 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:53 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:53 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:53 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:53 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:53 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:53 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:53 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:53 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:54 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:54 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:54 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:54 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:54 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:54 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:54 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:54 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:54 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:54 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:54 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:54 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:54 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:54 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:54 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:54 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:54 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:54 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:54 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:54 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:54 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:54 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:54 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:54 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:54 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:54 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:54 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:54 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:54 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:54 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:54 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:54 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:54 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:54 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:54 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:54 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:54 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:54 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:54 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:54 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:54 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:54 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:54 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:54 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:54 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:54 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:54 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:54 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:54 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:54 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:54 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:54 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:54 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:54 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:54 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:54 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:54 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:54 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:54 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:54 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:54 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:55 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:55 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:55 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:55 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:55 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:55 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:55 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:55 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:55 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:55 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:55 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:55 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:55 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:55 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:55 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:55 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:55 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:55 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:55 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:55 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:55 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:55 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:55 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:55 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:55 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:55 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:55 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:55 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:55 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:55 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:55 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:55 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:55 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:55 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:55 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:55 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:55 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:55 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:55 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:55 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:55 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:55 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:55 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:55 [INFO] __main__: Shutdown signal received — stopping …
18:59:55 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:55 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:55 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:55 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:55 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:55 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:55 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:55 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:55 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:55 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:55 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:55 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:55 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:55 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:55 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:55 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:55 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:55 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:55 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:55 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:56 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:56 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:56 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:56 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:56 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:56 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:56 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:56 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:56 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:56 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:56 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:56 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:56 [INFO] __main__: Shutting down …
18:59:56 [INFO] gameserver.persistence.state_save: Game state saved to state.yaml (2 empires, 1 attacks, 0 battles)
18:59:56 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.97
18:59:56 [INFO] websockets.server: server closing
18:59:56 [INFO] websockets.server: server closed
18:59:56 [INFO] gameserver.network.server: WebSocket server stopped
18:59:56 [INFO] __main__:   WebSocket server stopped
18:59:56 [INFO] __main__:   REST API server stopped
18:59:56 [INFO] __main__:   debug dashboard stopped
18:59:56 [INFO] __main__:   database closed
18:59:56 [INFO] __main__:   goodbye
ERROR:    Traceback (most recent call last):
  File "/home/pi/e3/.venv/lib/python3.9/site-packages/starlette/routing.py", line 701, in lifespan
    await receive()
  File "/home/pi/e3/.venv/lib/python3.9/site-packages/uvicorn/lifespan/on.py", line 137, in receive
    return await self.receive_queue.get()
  File "/usr/lib/python3.9/asyncio/queues.py", line 166, in get
    await getter
asyncio.exceptions.CancelledError

19:31:01 [INFO] __main__: === Game Server starting ===
19:31:01 [INFO] __main__: Loading configuration …
19:31:02 [INFO] __main__:   items:        210 loaded from config
19:31:02 [INFO] __main__:   map:          0 path tiles, 23 build tiles from config/maps/default.yaml
19:31:02 [INFO] __main__:   ai_templates: 2 entries from config/ai_templates.yaml
19:31:02 [INFO] gameserver.loaders.game_config_loader: Loaded game config from config/game.yaml (31 keys)
19:31:02 [INFO] __main__:   game_config:  loaded
19:31:02 [INFO] __main__: Initializing persistence …
19:31:02 [INFO] gameserver.persistence.database: Database connected: gameserver.db
19:31:02 [INFO] __main__:   database:     connected (gameserver.db)
19:31:02 [INFO] gameserver.persistence.state_load: Restoring state from state2.yaml (saved at 2026-02-11T04:57:57, version 1)
19:31:02 [INFO] gameserver.persistence.state_load: Restored 2 empires, 1 attacks, 0 battles
19:31:02 [INFO] __main__:   state:        restored from disk (2 empires, 1 attacks)
19:31:02 [INFO] __main__: Creating services …
19:31:02 [INFO] __main__:   upgrade_provider: 210 items registered
19:31:02 [INFO] __main__:   all services created
19:31:02 [INFO] __main__: Wiring event handlers …
19:31:02 [INFO] __main__:   event handlers registered
19:31:02 [INFO] gameserver.engine.empire_service: Empire registered: uid=100 name='TestImperium'
19:31:02 [INFO] gameserver.engine.empire_service: Empire 100: recalculated effects → {}
19:31:02 [INFO] gameserver.engine.empire_service: Empire registered: uid=2 name='Empire1'
19:31:02 [INFO] gameserver.engine.empire_service: Empire 2: recalculated effects → {'life_offset': 0.001, 'gold_offset': 0.2, 'culture_offset': 0.2, 'culture_modifier': 0.1, 'gold_modifier': 0.1, 'build_speed_modifier': 0.1}
19:31:02 [INFO] __main__: Restored 2 empires from saved state
19:31:02 [INFO] __main__: Restored 1 attacks from saved state
19:31:02 [INFO] __main__: Starting network servers …
19:31:02 [INFO] gameserver.network.handlers: Registered 32 message handlers: ping, summary_request, item_request, military_request, map_load_request, map_save_request, new_item, new_structure, delete_structure, upgrade_structure, citizen_upgrade, change_citizen, increase_life, new_army, new_attack_request, change_army, new_wave, change_wave, end_siege, battle_register, battle_unregister, battle_next_wave_request, notification_request, user_message, timeline_request, userinfo_request, hall_of_fame_request, preferences_request, change_preferences, auth_request, signup, create_empire
19:31:02 [INFO] websockets.server: server listening on 0.0.0.0:8765
19:31:02 [INFO] gameserver.network.server: WebSocket server listening on ws://0.0.0.0:8765
19:31:02 [INFO] __main__:   WebSocket server listening on 0.0.0.0:8765
19:31:04 [INFO] gameserver.network.rest_api: REST API created with 20 routes
19:31:04 [INFO] __main__:   REST API listening on http://0.0.0.0:8080
INFO:     Started server process [17010]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
19:31:04 [INFO] gameserver.debug.dashboard: Debug dashboard running at http://0.0.0.0:9000/
19:31:04 [INFO] __main__: Starting game loop …
19:31:04 [INFO] __main__:   game loop running (1 s tick)
19:31:04 [INFO] gameserver.engine.attack_service: [STATE] Attack 1: TRAVELLING → IN_SIEGE (attacker=100, defender=2, army=1)
INFO:     Uvicorn running on http://0.0.0.0:8080 (Press CTRL+C to quit)
19:31:05 [INFO] gameserver.engine.attack_service: [STATE] Attack 1: IN_SIEGE → IN_BATTLE (attacker=100, defender=2, army=1)
19:31:05 [INFO] gameserver.network.handlers: [battle:start_requested] attack_id=1 attacker=100 defender=2 army=1
19:31:05 [INFO] gameserver.network.handlers: [battle:start_requested] SUCCESS: battle 1 created (attacker=100, defender=2)
19:31:05 [INFO] gameserver.engine.battle_service: [battle_loop] Starting battle (bid=1, defender=2, attackers=100)
19:31:05 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=1 (SWORDMAN) spawned from wave 1 (progress=1/6, path_length=3)
19:31:07 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=2 (SWORDMAN) spawned from wave 1 (progress=2/6, path_length=3)
19:31:09 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=3 (SWORDMAN) spawned from wave 1 (progress=3/6, path_length=3)
19:31:11 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=4 (SWORDMAN) spawned from wave 1 (progress=4/6, path_length=3)
19:31:13 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=5 (SWORDMAN) spawned from wave 1 (progress=5/6, path_length=3)
19:31:15 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=6 (SWORDMAN) spawned from wave 1 (progress=6/6, path_length=3)
19:31:20 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=7 (SLAVE) spawned from wave 2 (progress=1/4, path_length=3)
19:31:22 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=8 (SLAVE) spawned from wave 2 (progress=2/4, path_length=3)
19:31:24 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=9 (SLAVE) spawned from wave 2 (progress=3/4, path_length=3)
19:31:26 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=10 (SLAVE) spawned from wave 2 (progress=4/4, path_length=3)
19:31:35 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=1 (SWORDMAN) killed at path_progress=1.00
19:31:35 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=2 (SWORDMAN) killed at path_progress=1.00
19:31:35 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=3 (SWORDMAN) killed at path_progress=1.00
19:31:35 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=4 (SWORDMAN) killed at path_progress=1.00
19:31:35 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=5 (SWORDMAN) killed at path_progress=1.00
19:31:35 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=6 (SWORDMAN) killed at path_progress=1.00
19:31:35 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=7 (SLAVE) killed at path_progress=1.00
19:31:35 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=8 (SLAVE) killed at path_progress=1.00
19:31:35 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=9 (SLAVE) killed at path_progress=1.00
19:31:35 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.95
19:31:35 [INFO] gameserver.engine.battle_service: [FINISH] Battle bid=1 finished (defender won)
19:31:35 [INFO] gameserver.network.handlers: [battle] bid=1 complete: attacker_wins=False
19:32:05 [INFO] __main__: Shutdown signal received — stopping …
19:32:05 [INFO] __main__: Shutting down …
19:32:05 [INFO] gameserver.persistence.state_save: Game state saved to state.yaml (2 empires, 1 attacks, 0 battles)
19:32:05 [INFO] websockets.server: server closing
19:32:05 [INFO] websockets.server: server closed
19:32:05 [INFO] gameserver.network.server: WebSocket server stopped
19:32:05 [INFO] __main__:   WebSocket server stopped
19:32:05 [INFO] __main__:   REST API server stopped
19:32:05 [INFO] __main__:   debug dashboard stopped
19:32:05 [INFO] __main__:   database closed
19:32:05 [INFO] __main__:   goodbye
ERROR:    Traceback (most recent call last):
  File "/home/pi/e3/.venv/lib/python3.9/site-packages/starlette/routing.py", line 701, in lifespan
    await receive()
  File "/home/pi/e3/.venv/lib/python3.9/site-packages/uvicorn/lifespan/on.py", line 137, in receive
    return await self.receive_queue.get()
  File "/usr/lib/python3.9/asyncio/queues.py", line 166, in get
    await getter
asyncio.exceptions.CancelledError

19:32:07 [INFO] __main__: === Game Server starting ===
19:32:07 [INFO] __main__: Loading configuration …
19:32:08 [INFO] __main__:   items:        210 loaded from config
19:32:08 [INFO] __main__:   map:          0 path tiles, 23 build tiles from config/maps/default.yaml
19:32:08 [INFO] __main__:   ai_templates: 2 entries from config/ai_templates.yaml
19:32:08 [INFO] gameserver.loaders.game_config_loader: Loaded game config from config/game.yaml (31 keys)
19:32:08 [INFO] __main__:   game_config:  loaded
19:32:08 [INFO] __main__: Initializing persistence …
19:32:08 [INFO] gameserver.persistence.database: Database connected: gameserver.db
19:32:08 [INFO] __main__:   database:     connected (gameserver.db)
19:32:08 [INFO] gameserver.persistence.state_load: Restoring state from state2.yaml (saved at 2026-02-11T04:57:57, version 1)
19:32:08 [INFO] gameserver.persistence.state_load: Restored 2 empires, 1 attacks, 0 battles
19:32:08 [INFO] __main__:   state:        restored from disk (2 empires, 1 attacks)
19:32:08 [INFO] __main__: Creating services …
19:32:08 [INFO] __main__:   upgrade_provider: 210 items registered
19:32:08 [INFO] __main__:   all services created
19:32:08 [INFO] __main__: Wiring event handlers …
19:32:08 [INFO] __main__:   event handlers registered
19:32:08 [INFO] gameserver.engine.empire_service: Empire registered: uid=100 name='TestImperium'
19:32:08 [INFO] gameserver.engine.empire_service: Empire 100: recalculated effects → {}
19:32:08 [INFO] gameserver.engine.empire_service: Empire registered: uid=2 name='Empire1'
19:32:08 [INFO] gameserver.engine.empire_service: Empire 2: recalculated effects → {'life_offset': 0.001, 'gold_offset': 0.2, 'culture_offset': 0.2, 'culture_modifier': 0.1, 'gold_modifier': 0.1, 'build_speed_modifier': 0.1}
19:32:08 [INFO] __main__: Restored 2 empires from saved state
19:32:08 [INFO] __main__: Restored 1 attacks from saved state
19:32:08 [INFO] __main__: Starting network servers …
19:32:08 [INFO] gameserver.network.handlers: Registered 32 message handlers: ping, summary_request, item_request, military_request, map_load_request, map_save_request, new_item, new_structure, delete_structure, upgrade_structure, citizen_upgrade, change_citizen, increase_life, new_army, new_attack_request, change_army, new_wave, change_wave, end_siege, battle_register, battle_unregister, battle_next_wave_request, notification_request, user_message, timeline_request, userinfo_request, hall_of_fame_request, preferences_request, change_preferences, auth_request, signup, create_empire
19:32:08 [INFO] websockets.server: server listening on 0.0.0.0:8765
19:32:08 [INFO] gameserver.network.server: WebSocket server listening on ws://0.0.0.0:8765
19:32:08 [INFO] __main__:   WebSocket server listening on 0.0.0.0:8765
19:32:10 [INFO] gameserver.network.rest_api: REST API created with 20 routes
19:32:10 [INFO] __main__:   REST API listening on http://0.0.0.0:8080
INFO:     Started server process [17203]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
19:32:10 [INFO] gameserver.debug.dashboard: Debug dashboard running at http://0.0.0.0:9000/
19:32:10 [INFO] __main__: Starting game loop …
19:32:10 [INFO] __main__:   game loop running (1 s tick)
19:32:10 [INFO] gameserver.engine.attack_service: [STATE] Attack 1: TRAVELLING → IN_SIEGE (attacker=100, defender=2, army=1)
INFO:     Uvicorn running on http://0.0.0.0:8080 (Press CTRL+C to quit)
19:32:11 [INFO] gameserver.engine.attack_service: [STATE] Attack 1: IN_SIEGE → IN_BATTLE (attacker=100, defender=2, army=1)
19:32:11 [INFO] gameserver.network.handlers: [battle:start_requested] attack_id=1 attacker=100 defender=2 army=1
19:32:11 [INFO] gameserver.network.handlers: [battle:start_requested] SUCCESS: battle 1 created (attacker=100, defender=2)
19:32:11 [INFO] gameserver.engine.battle_service: [battle_loop] Starting battle (bid=1, defender=2, attackers=100)
19:32:11 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=1 (SWORDMAN) spawned from wave 1 (progress=1/6, path_length=3)
19:32:13 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=2 (SWORDMAN) spawned from wave 1 (progress=2/6, path_length=3)
19:32:15 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=3 (SWORDMAN) spawned from wave 1 (progress=3/6, path_length=3)
19:32:17 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=4 (SWORDMAN) spawned from wave 1 (progress=4/6, path_length=3)
19:32:19 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=5 (SWORDMAN) spawned from wave 1 (progress=5/6, path_length=3)
19:32:21 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=6 (SWORDMAN) spawned from wave 1 (progress=6/6, path_length=3)
19:32:26 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=7 (SLAVE) spawned from wave 2 (progress=1/4, path_length=3)
19:32:28 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=8 (SLAVE) spawned from wave 2 (progress=2/4, path_length=3)
19:32:29 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=9 (SLAVE) spawned from wave 2 (progress=3/4, path_length=3)
19:32:31 [INFO] gameserver.engine.battle_service: [SPAWN] Critter cid=10 (SLAVE) spawned from wave 2 (progress=4/4, path_length=3)
19:32:41 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=1 (SWORDMAN) killed at path_progress=1.00
19:32:41 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=2 (SWORDMAN) killed at path_progress=1.00
19:32:41 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=3 (SWORDMAN) killed at path_progress=1.00
19:32:41 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=4 (SWORDMAN) killed at path_progress=1.00
19:32:41 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=5 (SWORDMAN) killed at path_progress=1.00
19:32:41 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=6 (SWORDMAN) killed at path_progress=1.00
19:32:41 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=7 (SLAVE) killed at path_progress=1.00
19:32:41 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=8 (SLAVE) killed at path_progress=1.00
19:32:41 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=9 (SLAVE) killed at path_progress=0.87
19:32:41 [INFO] gameserver.engine.battle_service: [KILLED] Critter cid=10 (SLAVE) killed at path_progress=0.73
19:32:41 [INFO] gameserver.engine.battle_service: [FINISH] Battle bid=1 finished (defender won)
19:32:41 [INFO] gameserver.network.handlers: [battle] bid=1 complete: attacker_wins=False
